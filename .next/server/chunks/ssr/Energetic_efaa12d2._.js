module.exports=[77534,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},64756,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},27046,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={UnrecognizedActionError:function(){return f},unstable_isUnrecognizedActionError:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});class f extends Error{constructor(...a){super(...a),this.name="UnrecognizedActionError"}}function g(a){return!!(a&&"object"==typeof a&&a instanceof f)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},10037,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return e}});class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class e extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},31711,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"RedirectStatusCode",{enumerable:!0,get:function(){return e}});var d,e=((d={})[d.SeeOther=303]="SeeOther",d[d.TemporaryRedirect=307]="TemporaryRedirect",d[d.PermanentRedirect=308]="PermanentRedirect",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},52448,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={REDIRECT_ERROR_CODE:function(){return h},RedirectType:function(){return i},isRedirectError:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(31711),h="NEXT_REDIRECT";var i=((d={}).push="push",d.replace="replace",d);function j(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let b=a.digest.split(";"),[c,d]=b,e=b.slice(2,-2).join(";"),f=Number(b.at(-2));return c===h&&("replace"===d||"push"===d)&&"string"==typeof e&&!isNaN(f)&&f in g.RedirectStatusCode}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},25618,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return n},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return k},redirect:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(31711),g=a.r(52448),h=a.r(20635).actionAsyncStorage;function i(a,b,c=f.RedirectStatusCode.TemporaryRedirect){let d=Object.defineProperty(Error(g.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return d.digest=`${g.REDIRECT_ERROR_CODE};${b};${a};${c};`,d}function j(a,b){throw i(a,b??=h?.getStore()?.isAction?g.RedirectType.push:g.RedirectType.replace,f.RedirectStatusCode.TemporaryRedirect)}function k(a,b=g.RedirectType.replace){throw i(a,b,f.RedirectStatusCode.PermanentRedirect)}function l(a){return(0,g.isRedirectError)(a)?a.digest.split(";").slice(2,-2).join(";"):null}function m(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return a.digest.split(";",2)[1]}function n(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(a.digest.split(";").at(-2))}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},85927,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HTTPAccessErrorStatus:function(){return f},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return h},getAccessFallbackErrorTypeByStatus:function(){return k},getAccessFallbackHTTPStatus:function(){return j},isHTTPAccessFallbackError:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},g=new Set(Object.values(f)),h="NEXT_HTTP_ERROR_FALLBACK";function i(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let[b,c]=a.digest.split(";");return b===h&&g.has(Number(c))}function j(a){return Number(a.digest.split(";")[1])}function k(a){switch(a){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},49692,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"notFound",{enumerable:!0,get:function(){return f}});let d=a.r(85927),e=`${d.HTTP_ERROR_FALLBACK_ERROR_CODE};404`;function f(){let a=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=e,a}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},69701,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"forbidden",{enumerable:!0,get:function(){return d}}),a.r(85927).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},94809,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unauthorized",{enumerable:!0,get:function(){return d}}),a.r(85927).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},36509,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isHangingPromiseRejectionError:function(){return f},makeDevtoolsIOAwarePromise:function(){return l},makeHangingPromise:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===g}let g="HANGING_PROMISE_REJECTION";class h extends Error{constructor(a,b){super(`During prerendering, ${b} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${b} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${a}".`),this.route=a,this.expression=b,this.digest=g}}let i=new WeakMap;function j(a,b,c){if(a.aborted)return Promise.reject(new h(b,c));{let d=new Promise((d,e)=>{let f=e.bind(null,new h(b,c)),g=i.get(a);if(g)g.push(f);else{let b=[f];i.set(a,b),a.addEventListener("abort",()=>{for(let a=0;a<b.length;a++)b[a]()},{once:!0})}});return d.catch(k),d}}function k(){}function l(a,b,c){return b.stagedRendering?b.stagedRendering.delayUntilStage(c,void 0,a):new Promise(b=>{setTimeout(()=>{b(a)},0)})}},72211,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isPostpone",{enumerable:!0,get:function(){return e}});let d=Symbol.for("react.postpone");function e(a){return"object"==typeof a&&null!==a&&a.$$typeof===d}},93034,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isNextRouterError",{enumerable:!0,get:function(){return f}});let d=a.r(85927),e=a.r(52448);function f(a){return(0,e.isRedirectError)(a)||(0,d.isHTTPAccessFallbackError)(a)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},33631,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DynamicServerError:function(){return g},isDynamicServerError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="DYNAMIC_SERVER_USAGE";class g extends Error{constructor(a){super(`Dynamic server usage: ${a}`),this.description=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&"string"==typeof a.digest&&a.digest===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},49043,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={StaticGenBailoutError:function(){return g},isStaticGenBailoutError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="NEXT_STATIC_GEN_BAILOUT";class g extends Error{constructor(...a){super(...a),this.code=f}}function h(a){return"object"==typeof a&&null!==a&&"code"in a&&a.code===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},84252,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={METADATA_BOUNDARY_NAME:function(){return f},OUTLET_BOUNDARY_NAME:function(){return h},ROOT_LAYOUT_BOUNDARY_NAME:function(){return i},VIEWPORT_BOUNDARY_NAME:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="__next_metadata_boundary__",g="__next_viewport_boundary__",h="__next_outlet_boundary__",i="__next_root_layout_boundary__"},63874,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={atLeastOneTask:function(){return h},scheduleImmediate:function(){return g},scheduleOnNextTick:function(){return f},waitAtLeastOneReactRenderTask:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a=>{Promise.resolve().then(()=>{process.nextTick(a)})},g=a=>{setImmediate(a)};function h(){return new Promise(a=>g(a))}function i(){return new Promise(a=>setImmediate(a))}},42428,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"InvariantError",{enumerable:!0,get:function(){return d}});class d extends Error{constructor(a,b){super(`Invariant: ${a.endsWith(".")?a:a+"."} This is a bug in Next.js.`,b),this.name="InvariantError"}}},84785,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e,f={Postpone:function(){return B},PreludeState:function(){return $},abortAndThrowOnSynchronousRequestDataAccess:function(){return A},abortOnSynchronousPlatformIOAccess:function(){return z},accessedDynamicData:function(){return J},annotateDynamicAccess:function(){return O},consumeDynamicAccess:function(){return K},createDynamicTrackingState:function(){return s},createDynamicValidationState:function(){return t},createHangingInputAbortSignal:function(){return N},createRenderInBrowserAbortSignal:function(){return M},delayUntilRuntimeStage:function(){return ac},formatDynamicAPIAccesses:function(){return L},getFirstDynamicReason:function(){return u},getStaticShellDisallowedDynamicReasons:function(){return ab},isDynamicPostpone:function(){return E},isPrerenderInterruptedError:function(){return I},logDisallowedDynamicError:function(){return _},markCurrentScopeAsDynamic:function(){return v},postponeWithTracking:function(){return C},throwIfDisallowedDynamic:function(){return aa},throwToInterruptStaticGeneration:function(){return w},trackAllowedDynamicAccess:function(){return W},trackDynamicDataInDynamicRender:function(){return x},trackDynamicHoleInRuntimeShell:function(){return X},trackDynamicHoleInStaticShell:function(){return Y},useDynamicRouteParams:function(){return P},useDynamicSearchParams:function(){return Q}};for(var g in f)Object.defineProperty(c,g,{enumerable:!0,get:f[g]});let h=(d=a.r(43261))&&d.__esModule?d:{default:d},i=a.r(33631),j=a.r(49043),k=a.r(32319),l=a.r(56704),m=a.r(36509),n=a.r(84252),o=a.r(63874),p=a.r(65469),q=a.r(42428),r="function"==typeof h.default.unstable_postpone;function s(a){return{isDebugDynamicAccesses:a,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function t(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,dynamicMetadata:null,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function u(a){var b;return null==(b=a.dynamicAccesses[0])?void 0:b.expression}function v(a,b,c){if(b)switch(b.type){case"cache":case"unstable-cache":case"private-cache":return}if(!a.forceDynamic&&!a.forceStatic){if(a.dynamicShouldError)throw Object.defineProperty(new j.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${c}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(b)switch(b.type){case"prerender-ppr":return C(a.route,c,b.dynamicTracking);case"prerender-legacy":b.revalidate=0;let d=Object.defineProperty(new i.DynamicServerError(`Route ${a.route} couldn't be rendered statically because it used ${c}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw a.dynamicUsageDescription=c,a.dynamicUsageStack=d.stack,d}}}function w(a,b,c){let d=Object.defineProperty(new i.DynamicServerError(`Route ${b.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.revalidate=0,b.dynamicUsageDescription=a,b.dynamicUsageStack=d.stack,d}function x(a){switch(a.type){case"cache":case"unstable-cache":case"private-cache":return}}function y(a,b,c){let d=H(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`);c.controller.abort(d);let e=c.dynamicTracking;e&&e.dynamicAccesses.push({stack:e.isDebugDynamicAccesses?Error().stack:void 0,expression:b})}function z(a,b,c,d){let e=d.dynamicTracking;y(a,b,d),e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}function A(a,b,c,d){if(!1===d.controller.signal.aborted){y(a,b,d);let e=d.dynamicTracking;e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}throw H(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`)}function B({reason:a,route:b}){let c=k.workUnitAsyncStorage.getStore();C(b,a,c&&"prerender-ppr"===c.type?c.dynamicTracking:null)}function C(a,b,c){(function(){if(!r)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:b}),h.default.unstable_postpone(D(a,b))}function D(a,b){return`Route ${a} needs to bail out of prerendering at this point because it used ${b}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function E(a){return"object"==typeof a&&null!==a&&"string"==typeof a.message&&F(a.message)}function F(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===F(D("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let G="NEXT_PRERENDER_INTERRUPTED";function H(a){let b=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return b.digest=G,b}function I(a){return"object"==typeof a&&null!==a&&a.digest===G&&"name"in a&&"message"in a&&a instanceof Error}function J(a){return a.length>0}function K(a,b){return a.dynamicAccesses.push(...b.dynamicAccesses),a.dynamicAccesses}function L(a){return a.filter(a=>"string"==typeof a.stack&&a.stack.length>0).map(({expression:a,stack:b})=>(b=b.split("\n").slice(4).filter(a=>!(a.includes("node_modules/next/")||a.includes(" (<anonymous>)")||a.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${a}:
${b}`))}function M(){let a=new AbortController;return a.abort(Object.defineProperty(new p.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),a.signal}function N(a){switch(a.type){case"prerender":case"prerender-runtime":let b=new AbortController;if(a.cacheSignal)a.cacheSignal.inputReady().then(()=>{b.abort()});else{let c=(0,k.getRuntimeStagePromise)(a);c?c.then(()=>(0,o.scheduleOnNextTick)(()=>b.abort())):(0,o.scheduleOnNextTick)(()=>b.abort())}return b.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function O(a,b){let c=b.dynamicTracking;c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:a})}function P(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b&&c)switch(c.type){case"prerender-client":case"prerender":{let d=c.fallbackRouteParams;d&&d.size>0&&h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d&&d.size>0)return C(b.route,a,c.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called during a runtime prerender. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function Q(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b)switch(!c&&(0,k.throwForMissingRequestStore)(a),c.type){case"prerender-client":h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break;case"prerender-legacy":case"prerender-ppr":if(b.forceStatic)return;throw Object.defineProperty(new p.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called from a Server Component. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let R=/\n\s+at Suspense \(<anonymous>\)/,S=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${n.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),T=RegExp(`\\n\\s+at ${n.METADATA_BOUNDARY_NAME}[\\n\\s]`),U=RegExp(`\\n\\s+at ${n.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),V=RegExp(`\\n\\s+at ${n.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function W(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.hasDynamicMetadata=!0;return}if(U.test(b)){c.hasDynamicViewport=!0;return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function X(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.dynamicMetadata=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed inside \`generateMetadata\`. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,b);return}if(U.test(b)){let d=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,b);c.dynamicErrors.push(d);return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function Y(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.dynamicMetadata=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateMetadata\` or you have file-based metadata such as icons that depend on dynamic params segments. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,b);return}if(U.test(b)){let d=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,b);c.dynamicErrors.push(d);return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function Z(a,b){let c=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return c.stack=c.name+": "+a+b,c}var $=((e={})[e.Full=0]="Full",e[e.Empty=1]="Empty",e[e.Errored=2]="Errored",e);function _(a,b){console.error(b),a.dev||(a.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function aa(a,b,c,d){if(d.syncDynamicErrorWithStack)throw _(a,d.syncDynamicErrorWithStack),new j.StaticGenBailoutError;if(0!==b){if(c.hasSuspenseAboveBody)return;let d=c.dynamicErrors;if(d.length>0){for(let b=0;b<d.length;b++)_(a,d[b]);throw new j.StaticGenBailoutError}if(c.hasDynamicViewport)throw console.error(`Route "${a.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new j.StaticGenBailoutError;if(1===b)throw console.error(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new j.StaticGenBailoutError}else if(!1===c.hasAllowedDynamic&&c.hasDynamicMetadata)throw console.error(`Route "${a.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new j.StaticGenBailoutError}function ab(a,b,c){if(c.hasSuspenseAboveBody)return[];if(0!==b){let d=c.dynamicErrors;if(d.length>0)return d;if(1===b)return[Object.defineProperty(new q.InvariantError(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason.`),"__NEXT_ERROR_CODE",{value:"E936",enumerable:!1,configurable:!0})]}else if(!1===c.hasAllowedDynamic&&0===c.dynamicErrors.length&&c.dynamicMetadata)return[c.dynamicMetadata];return[]}function ac(a,b){return a.runtimeStagePromise?a.runtimeStagePromise.then(()=>b):b}},63952,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return function a(b){if((0,g.isNextRouterError)(b)||(0,f.isBailoutToCSRError)(b)||(0,i.isDynamicServerError)(b)||(0,h.isDynamicPostpone)(b)||(0,e.isPostpone)(b)||(0,d.isHangingPromiseRejectionError)(b)||(0,h.isPrerenderInterruptedError)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}}});let d=a.r(36509),e=a.r(72211),f=a.r(65469),g=a.r(93034),h=a.r(84785),i=a.r(33631);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},42159,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let d=a.r(63952).unstable_rethrow;("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},16852,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ReadonlyURLSearchParams:function(){return f.ReadonlyURLSearchParams},RedirectType:function(){return h.RedirectType},forbidden:function(){return j.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return g.permanentRedirect},redirect:function(){return g.redirect},unauthorized:function(){return k.unauthorized},unstable_isUnrecognizedActionError:function(){return m},unstable_rethrow:function(){return l.unstable_rethrow}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(10037),g=a.r(25618),h=a.r(52448),i=a.r(49692),j=a.r(69701),k=a.r(94809),l=a.r(42159);function m(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},22309,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ReadonlyURLSearchParams:function(){return h.ReadonlyURLSearchParams},RedirectType:function(){return l.RedirectType},ServerInsertedHTMLContext:function(){return j.ServerInsertedHTMLContext},forbidden:function(){return l.forbidden},notFound:function(){return l.notFound},permanentRedirect:function(){return l.permanentRedirect},redirect:function(){return l.redirect},unauthorized:function(){return l.unauthorized},unstable_isUnrecognizedActionError:function(){return k.unstable_isUnrecognizedActionError},unstable_rethrow:function(){return l.unstable_rethrow},useParams:function(){return r},usePathname:function(){return p},useRouter:function(){return q},useSearchParams:function(){return o},useSelectedLayoutSegment:function(){return t},useSelectedLayoutSegments:function(){return s},useServerInsertedHTML:function(){return j.useServerInsertedHTML}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(77534)._(a.r(43261)),g=a.r(91480),h=a.r(52874),i=a.r(64756),j=a.r(33624),k=a.r(27046),l=a.r(16852),m=a.r(84785).useDynamicRouteParams,n=a.r(84785).useDynamicSearchParams;function o(){n?.("useSearchParams()");let a=(0,f.useContext)(h.SearchParamsContext);return(0,f.useMemo)(()=>a?new h.ReadonlyURLSearchParams(a):null,[a])}function p(){return m?.("usePathname()"),(0,f.useContext)(h.PathnameContext)}function q(){let a=(0,f.useContext)(g.AppRouterContext);if(null===a)throw Object.defineProperty(Error("invariant expected app router to be mounted"),"__NEXT_ERROR_CODE",{value:"E238",enumerable:!1,configurable:!0});return a}function r(){return m?.("useParams()"),(0,f.useContext)(h.PathParamsContext)}function s(a="children"){m?.("useSelectedLayoutSegments()");let b=(0,f.useContext)(g.LayoutRouterContext);return b?(0,i.getSelectedLayoutSegmentPath)(b.parentTree,a):null}function t(a="children"){m?.("useSelectedLayoutSegment()"),(0,f.useContext)(h.NavigationPromisesContext);let b=s(a);return(0,i.computeSelectedLayoutSegment)(b,a)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},57036,(a,b,c)=>{b.exports=a.r(22309)},94229,a=>{"use strict";var b=a.i(8944),c=a.i(43261),d=a.i(57036),e=void 0,f="u">typeof globalThis?globalThis:e;"u"<typeof self&&(f.self=f),"u"<typeof File&&(f.File=function(){});var g=Array.prototype,h=g.forEach,i=g.indexOf,j=null==f?void 0:f.navigator,k=null==f?void 0:f.document,l=null==f?void 0:f.location,m=null==f?void 0:f.fetch,n=null!=f&&f.XMLHttpRequest&&"withCredentials"in new f.XMLHttpRequest?f.XMLHttpRequest:void 0,o=null==f?void 0:f.AbortController,p=null==j?void 0:j.userAgent,q=null!=e?e:{},r={DEBUG:!1,LIB_VERSION:"1.336.4"};function s(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function t(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){s(f,d,e,g,h,"next",a)}function h(a){s(f,d,e,g,h,"throw",a)}g(void 0)})}}function u(){return(u=Object.assign.bind()).apply(null,arguments)}function v(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}var w=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],x=function(a,b){if(void 0===b&&(b=[]),!a)return!1;var c=a.toLowerCase();return w.concat(b).some(a=>{var b=a.toLowerCase();return -1!==c.indexOf(b)})},y=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function z(a,b){return -1!==a.indexOf(b)}var A=function(a){return a.trim()},B=function(a){return a.replace(/^\$/,"")},C=Array.isArray,D=Object.prototype,E=D.hasOwnProperty,F=D.toString,G=C||function(a){return"[object Array]"===F.call(a)},H=a=>"function"==typeof a,I=a=>a===Object(a)&&!G(a),J=a=>{if(I(a)){for(var b in a)if(E.call(a,b))return!1;return!0}return!1},K=a=>void 0===a,L=a=>"[object String]"==F.call(a),M=a=>L(a)&&0===a.trim().length,N=a=>null===a,O=a=>K(a)||N(a),P=a=>"[object Number]"==F.call(a)&&a==a,Q=a=>P(a)&&a>0,R=a=>"[object Boolean]"===F.call(a),S=a=>z(y,a);function T(a){return null===a||"object"!=typeof a}function U(a,b){return Object.prototype.toString.call(a)==="[object "+b+"]"}function V(a){return!K(Event)&&function(a,b){try{return a instanceof b}catch(a){return!1}}(a,Event)}var W=[!0,"true",1,"1","yes"],X=[!1,"false",0,"0","no"];function Y(a,b,c,d,e){return b>c&&(d.warn("min cannot be greater than max."),b=c),P(a)?a>c?(d.warn(" cannot be  greater than max: "+c+". Using max value instead."),c):a<b?(d.warn(" cannot be less than min: "+b+". Using min value instead."),b):a:(d.warn(" must be a number. using max or fallback. max: "+c+", fallback: "+e),Y(e||c,b,c,d))}class Z{constructor(a){this.t={},this.i=a.i,this.o=Y(a.bucketSize,0,100,a.h),this.m=Y(a.refillRate,0,this.o,a.h),this.$=Y(a.refillInterval,0,864e5,a.h)}S(a,b){var c=Math.floor((b-a.lastAccess)/this.$);if(c>0){var d=c*this.m;a.tokens=Math.min(a.tokens+d,this.o),a.lastAccess=a.lastAccess+c*this.$}}consumeRateLimit(a){var b,c=Date.now(),d=String(a),e=this.t[d];return e?this.S(e,c):(e={tokens:this.o,lastAccess:c},this.t[d]=e),0===e.tokens||(e.tokens--,0===e.tokens&&(null==(b=this.i)||b.call(this,a)),0===e.tokens)}stop(){this.t={}}}var $,_,aa,ab="Mobile",ac="Android",ad="Tablet",ae=ac+" "+ad,af="iPad",ag="Apple",ah=ag+" Watch",ai="Safari",aj="BlackBerry",ak="Samsung",al=ak+"Browser",am=ak+" Internet",an="Chrome",ao=an+" OS",ap=an+" iOS",aq="Internet Explorer",ar=aq+" "+ab,as="Opera",at=as+" Mini",au="Edge",av="Microsoft "+au,aw="Firefox",ax=aw+" iOS",ay="Nintendo",az="PlayStation",aA="Xbox",aB=ac+" "+ab,aC=ab+" "+ai,aD="Windows",aE=aD+" Phone",aF="Nokia",aG="Ouya",aH="Generic",aI=aH+" "+ab.toLowerCase(),aJ=aH+" "+ad.toLowerCase(),aK="Konqueror",aL="(\\d+(\\.\\d+)?)",aM=RegExp("Version/"+aL),aN=RegExp(aA,"i"),aO=RegExp(az+" \\w+","i"),aP=RegExp(ay+" \\w+","i"),aQ=RegExp(aj+"|PlayBook|BB10","i"),aR={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},aS=function(a,b){var c;return b=b||"",z(a," OPR/")&&z(a,"Mini")?at:z(a," OPR/")?as:aQ.test(a)?aj:z(a,"IE"+ab)||z(a,"WPDesktop")?ar:z(a,al)?am:z(a,au)||z(a,"Edg/")?av:z(a,"FBIOS")?"Facebook "+ab:z(a,"UCWEB")||z(a,"UCBrowser")?"UC Browser":z(a,"CriOS")?ap:z(a,"CrMo")||z(a,an)?an:z(a,ac)&&z(a,ai)?aB:z(a,"FxiOS")?ax:z(a.toLowerCase(),aK.toLowerCase())?aK:(c=b)&&z(c,ag)||z(a,ai)&&!z(a,an)&&!z(a,ac)?z(a,ab)?aC:ai:z(a,aw)?aw:z(a,"MSIE")||z(a,"Trident/")?aq:z(a,"Gecko")?aw:""},aT={[ar]:[RegExp("rv:"+aL)],[av]:[RegExp(au+"?\\/"+aL)],[an]:[RegExp("("+an+"|CrMo)\\/"+aL)],[ap]:[RegExp("CriOS\\/"+aL)],"UC Browser":[RegExp("(UCBrowser|UCWEB)\\/"+aL)],[ai]:[aM],[aC]:[aM],[as]:[RegExp("(Opera|OPR)\\/"+aL)],[aw]:[RegExp(aw+"\\/"+aL)],[ax]:[RegExp("FxiOS\\/"+aL)],[aK]:[RegExp("Konqueror[:/]?"+aL,"i")],[aj]:[RegExp(aj+" "+aL),aM],[aB]:[RegExp("android\\s"+aL,"i")],[am]:[RegExp(al+"\\/"+aL)],[aq]:[RegExp("(rv:|MSIE )"+aL)],Mozilla:[RegExp("rv:"+aL)]},aU=function(a,b){var c=aT[aS(a,b)];if(K(c))return null;for(var d=0;d<c.length;d++){var e=c[d],f=a.match(e);if(f)return parseFloat(f[f.length-2])}return null},aV=[[RegExp(aA+"; "+aA+" (.*?)[);]","i"),a=>[aA,a&&a[1]||""]],[RegExp(ay,"i"),[ay,""]],[RegExp(az,"i"),[az,""]],[aQ,[aj,""]],[RegExp(aD,"i"),(a,b)=>{if(/Phone/.test(b)||/WPDesktop/.test(b))return[aE,""];if(new RegExp(ab).test(b)&&!/IEMobile\b/.test(b))return[aD+" "+ab,""];var c=/Windows NT ([0-9.]+)/i.exec(b);if(c&&c[1]){var d=aR[c[1]]||"";return/arm/i.test(b)&&(d="RT"),[aD,d]}return[aD,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,a=>a&&a[3]?["iOS",[a[3],a[4],a[5]||"0"].join(".")]:["iOS",""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,a=>{var b="";return a&&a.length>=3&&(b=K(a[2])?a[3]:a[2]),["watchOS",b]}],[RegExp("("+ac+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+ac+")","i"),a=>a&&a[2]?[ac,[a[2],a[3],a[4]||"0"].join(".")]:[ac,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,a=>{var b=["Mac OS X",""];if(a&&a[1]){var c=[a[1],a[2],a[3]||"0"];b[1]=c.join(".")}return b}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[ao,""]],[/Linux|debian/i,["Linux",""]]],aW=function(a){return aP.test(a)?ay:aO.test(a)?az:aN.test(a)?aA:RegExp(aG,"i").test(a)?aG:RegExp("("+aE+"|WPDesktop)","i").test(a)?aE:/iPad/.test(a)?af:/iPod/.test(a)?"iPod Touch":/iPhone/.test(a)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(a)?ah:aQ.test(a)?aj:/(kobo)\s(ereader|touch)/i.test(a)?"Kobo":RegExp(aF,"i").test(a)?aF:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(a)||/(kf[a-z]+)( bui|\)).+silk\//i.test(a)?"Kindle Fire":/(Android|ZTE)/i.test(a)?new RegExp(ab).test(a)&&!/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(a)||/pixel[\daxl ]{1,6}/i.test(a)&&!/pixel c/i.test(a)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(a)||/lmy47v/i.test(a)&&!/QTAQZ3/i.test(a)?ac:ae:RegExp("(pda|"+ab+")","i").test(a)?aI:RegExp(ad,"i").test(a)&&!RegExp(ad+" pc","i").test(a)?aJ:""},aX=a=>a instanceof Error;class aY{constructor(a,b,c){void 0===c&&(c=[]),this.coercers=a,this.stackParser=b,this.modifiers=c}buildFromUnknown(a,b){void 0===b&&(b={});var c=b&&b.mechanism||{handled:!0,type:"generic"},d=this.buildCoercingContext(c,b,0).apply(a),e=this.buildParsingContext(),f=this.parseStacktrace(d,e);return{$exception_list:this.convertToExceptionList(f,c),$exception_level:"error"}}modifyFrames(a){var b=this;return t(function*(){for(var c of a)c.stacktrace&&c.stacktrace.frames&&G(c.stacktrace.frames)&&(c.stacktrace.frames=yield b.applyModifiers(c.stacktrace.frames));return a})()}coerceFallback(a){var b;return{type:"Error",value:"Unknown error",stack:null==(b=a.syntheticException)?void 0:b.stack,synthetic:!0}}parseStacktrace(a,b){var c,d;return null!=a.cause&&(c=this.parseStacktrace(a.cause,b)),""!=a.stack&&null!=a.stack&&(d=this.applyChunkIds(this.stackParser(a.stack,+!!a.synthetic),b.chunkIdMap)),u({},a,{cause:c,stack:d})}applyChunkIds(a,b){return a.map(a=>(a.filename&&b&&(a.chunk_id=b[a.filename]),a))}applyCoercers(a,b){for(var c of this.coercers)if(c.match(a))return c.coerce(a,b);return this.coerceFallback(b)}applyModifiers(a){var b=this;return t(function*(){var c=a;for(var d of b.modifiers)c=yield d(c);return c})()}convertToExceptionList(a,b){var c,d,e,f={type:a.type,value:a.value,mechanism:{type:null!=(c=b.type)?c:"generic",handled:null==(d=b.handled)||d,synthetic:null!=(e=a.synthetic)&&e}};a.stack&&(f.stacktrace={type:"raw",frames:a.stack});var g=[f];return null!=a.cause&&g.push(...this.convertToExceptionList(a.cause,u({},b,{handled:!0}))),g}buildParsingContext(){return{chunkIdMap:function(a){var b=globalThis._posthogChunkIds;if(b){var c=Object.keys(b);return aa&&c.length===_||(_=c.length,aa=c.reduce((c,d)=>{$||($={});var e=$[d];if(e)c[e[0]]=e[1];else for(var f=a(d),g=f.length-1;g>=0;g--){var h=f[g],i=null==h?void 0:h.filename,j=b[d];if(i&&j){c[i]=j,$[d]=[i,j];break}}return c},{})),aa}}(this.stackParser)}}buildCoercingContext(a,b,c){void 0===c&&(c=0);var d=(c,d)=>{if(d<=4){var e=this.buildCoercingContext(a,b,d);return this.applyCoercers(c,e)}};return u({},b,{syntheticException:0==c?b.syntheticException:void 0,mechanism:a,apply:a=>d(a,c),next:a=>d(a,c+1)})}}function aZ(a,b,c,d,e){var f={platform:a,filename:b,function:"<anonymous>"===c?"?":c,in_app:!0};return K(d)||(f.lineno=d),K(e)||(f.colno=e),f}var a$=(a,b)=>{var c=-1!==a.indexOf("safari-extension"),d=-1!==a.indexOf("safari-web-extension");return c||d?[-1!==a.indexOf("@")?a.split("@")[0]:"?",c?"safari-extension:"+b:"safari-web-extension:"+b]:[a,b]},a_=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,a0=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a1=/\((\S*)(?::(\d+))(?::(\d+))\)/,a2=(a,b)=>{var c=a_.exec(a);if(c){var[,d,e,f]=c;return aZ(b,d,"?",+e,+f)}var g=a0.exec(a);if(g){if(g[2]&&0===g[2].indexOf("eval")){var h=a1.exec(g[2]);h&&(g[2]=h[1],g[3]=h[2],g[4]=h[3])}var[i,j]=a$(g[1]||"?",g[2]);return aZ(b,j,i,g[3]?+g[3]:void 0,g[4]?+g[4]:void 0)}},a3=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,a4=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,a5=(a,b)=>{var c=a3.exec(a);if(c){if(c[3]&&c[3].indexOf(" > eval")>-1){var d=a4.exec(c[3]);d&&(c[1]=c[1]||"eval",c[3]=d[1],c[4]=d[2],c[5]="")}var e=c[3],f=c[1]||"?";return[f,e]=a$(f,e),aZ(b,e,f,c[4]?+c[4]:void 0,c[5]?+c[5]:void 0)}},a6=/\(error: (.*)\)/;class a7{match(a){return this.isDOMException(a)||this.isDOMError(a)}coerce(a,b){var c=L(a.stack);return{type:this.getType(a),value:this.getValue(a),stack:c?a.stack:void 0,cause:a.cause?b.next(a.cause):void 0,synthetic:!1}}getType(a){return this.isDOMError(a)?"DOMError":"DOMException"}getValue(a){var b=a.name||(this.isDOMError(a)?"DOMError":"DOMException");return a.message?b+": "+a.message:b}isDOMException(a){return U(a,"DOMException")}isDOMError(a){return U(a,"DOMError")}}class a8{match(a){return a instanceof Error}coerce(a,b){return{type:this.getType(a),value:this.getMessage(a,b),stack:this.getStack(a),cause:a.cause?b.next(a.cause):void 0,synthetic:!1}}getType(a){return a.name||a.constructor.name}getMessage(a,b){var c=a.message;return c.error&&"string"==typeof c.error.message?String(c.error.message):String(c)}getStack(a){return a.stacktrace||a.stack||void 0}}class a9{match(a){return U(a,"ErrorEvent")&&null!=a.error}coerce(a,b){var c;return b.apply(a.error)||{type:"ErrorEvent",value:a.message,stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}}}var ba=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class bb{match(a){return"string"==typeof a}coerce(a,b){var c,[d,e]=this.getInfos(a);return{type:null!=d?d:"Error",value:null!=e?e:a,stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}}getInfos(a){var b="Error",c=a,d=a.match(ba);return d&&(b=d[1],c=d[2]),[b,c]}}var bc=["fatal","error","warning","log","info","debug"];function bd(a,b){void 0===b&&(b=40);var c=Object.keys(a);if(c.sort(),!c.length)return"[object has no keys]";for(var d=c.length;d>0;d--){var e=c.slice(0,d).join(", ");if(!(e.length>b))return d===c.length||e.length<=b?e:e.slice(0,b)+"..."}return""}class be{match(a){return"object"==typeof a&&null!==a}coerce(a,b){var c,d=this.getErrorPropertyFromObject(a);return d?b.apply(d):{type:this.getType(a),value:this.getValue(a),stack:null==(c=b.syntheticException)?void 0:c.stack,level:this.isSeverityLevel(a.level)?a.level:"error",synthetic:!0}}getType(a){return V(a)?a.constructor.name:"Error"}getValue(a){if("name"in a&&"string"==typeof a.name){var b="'"+a.name+"' captured as exception";return"message"in a&&"string"==typeof a.message&&(b+=" with message: '"+a.message+"'"),b}if("message"in a&&"string"==typeof a.message)return a.message;var c=this.getObjectClassName(a);return(c&&"Object"!==c?"'"+c+"'":"Object")+" captured as exception with keys: "+bd(a)}isSeverityLevel(a){return L(a)&&!M(a)&&bc.indexOf(a)>=0}getErrorPropertyFromObject(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)){var c=a[b];if(aX(c))return c}}getObjectClassName(a){try{var b=Object.getPrototypeOf(a);return b?b.constructor.name:void 0}catch(a){return}}}class bf{match(a){return V(a)}coerce(a,b){var c,d=a.constructor.name;return{type:d,value:d+" captured as exception with keys: "+bd(a),stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}}}class bg{match(a){return T(a)}coerce(a,b){var c;return{type:"Error",value:"Primitive value captured as exception: "+String(a),stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}}}class bh{match(a){return U(a,"PromiseRejectionEvent")}coerce(a,b){var c,d=this.getUnhandledRejectionReason(a);return T(d)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(d),stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}:b.apply(d)}getUnhandledRejectionReason(a){if(T(a))return a;try{if("reason"in a)return a.reason;if("detail"in a&&"reason"in a.detail)return a.detail.reason}catch(a){}return a}}var bi=function(a,b){var{debugEnabled:c}=void 0===b?{}:b,d={k:function(a){e&&(r.DEBUG||q.POSTHOG_DEBUG||c)&&!K(e.console)&&e.console},info:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];d.k("log",...b)},warn:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];d.k("warn",...b)},error:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];d.k("error",...b)},critical:function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];console.error(a,...c)},uninitializedWarning:a=>{d.error("You must initialize PostHog before calling "+a)},createLogger:(b,c)=>bi(a+" "+b,c)};return d},bj=bi("[PostHog.js]"),bk=bj.createLogger,bl=bk("[ExternalScriptsLoader]"),bm=(a,b,c)=>{if(a.config.disable_external_dependency_loading)return bl.warn(b+" was requested but loading of external scripts is disabled."),c("Loading of external scripts is disabled");var d=null==k?void 0:k.querySelectorAll("script");if(d){for(var e,f=0;f<d.length;f++)if(e=function(){if(d[f].src===b){var a=d[f];return a.__posthog_loading_callback_fired?{v:c()}:(a.addEventListener("load",b=>{a.__posthog_loading_callback_fired=!0,c(void 0,b)}),a.onerror=a=>c(a),{v:void 0})}}())return e.v}var g=()=>{if(!k)return c("document not found");var d=k.createElement("script");if(d.type="text/javascript",d.crossOrigin="anonymous",d.src=b,d.onload=a=>{d.__posthog_loading_callback_fired=!0,c(void 0,a)},d.onerror=a=>c(a),a.config.prepare_external_dependency_script&&(d=a.config.prepare_external_dependency_script(d)),!d)return c("prepare_external_dependency_script returned null");if("head"===a.config.external_scripts_inject_target)k.head.appendChild(d);else{var e,f=k.querySelectorAll("body > script");f.length>0?null==(e=f[0].parentNode)||e.insertBefore(d,f[0]):k.body.appendChild(d)}};null!=k&&k.body?g():null==k||k.addEventListener("DOMContentLoaded",g)};q.__PosthogExtensions__=q.__PosthogExtensions__||{},q.__PosthogExtensions__.loadExternalDependency=(a,b,c)=>{var d="/static/"+b+".js?v="+a.version;"remote-config"===b&&(d="/array/"+a.config.token+"/config.js"),"toolbar"===b&&(d=d+"&t="+3e5*Math.floor(Date.now()/3e5));var e=a.requestRouter.endpointFor("assets",d);bm(a,e,c)},q.__PosthogExtensions__.loadSiteApp=(a,b,c)=>{var d=a.requestRouter.endpointFor("api",b);bm(a,d,c)};var bn={};function bo(a,b,c){if(G(a)){if(h&&a.forEach===h)a.forEach(b,c);else if("length"in a&&a.length===+a.length){for(var d=0,e=a.length;d<e;d++)if(d in a&&b.call(c,a[d],d)===bn)return}}}function bp(a,b,c){if(!O(a)){if(G(a))return bo(a,b,c);if(a instanceof FormData){for(var d of a.entries())if(b.call(c,d[1],d[0])===bn)return}else for(var e in a)if(E.call(a,e)&&b.call(c,a[e],e)===bn)return}}var bq=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return bo(c,function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])}),a},br=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return bo(c,function(b){bo(b,function(b){a.push(b)})}),a};function bs(a){for(var b=Object.keys(a),c=b.length,d=Array(c);c--;)d[c]=[b[c],a[b[c]]];return d}var bt=function(a){try{return a()}catch(a){return}},bu=function(a){return function(){try{for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return a.apply(this,c)}catch(a){bj.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),bj.critical(a)}}},bv=function(a){var b={};return bp(a,function(a,c){(L(a)&&a.length>0||P(a))&&(b[c]=a)}),b},bw=["herokuapp.com","vercel.app","netlify.app"];function bx(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return a[c]}function by(a,b,c,d){var{capture:e=!1,passive:f=!0}=null!=d?d:{};null==a||a.addEventListener(b,c,{capture:e,passive:f})}var bz="$people_distinct_id",bA="__alias",bB="__timers",bC="$autocapture_disabled_server_side",bD="$heatmaps_enabled_server_side",bE="$exception_capture_enabled_server_side",bF="$error_tracking_suppression_rules",bG="$error_tracking_capture_extension_exceptions",bH="$web_vitals_enabled_server_side",bI="$dead_clicks_enabled_server_side",bJ="$product_tours_enabled_server_side",bK="$web_vitals_allowed_metrics",bL="$session_recording_remote_config",bM="$sesid",bN="$session_is_sampled",bO="$enabled_feature_flags",bP="$early_access_features",bQ="$feature_flag_details",bR="$stored_person_properties",bS="$stored_group_properties",bT="$surveys",bU="$flag_call_reported",bV="$user_state",bW="$client_session_props",bX="$capture_rate_limit",bY="$initial_campaign_params",bZ="$initial_referrer_info",b$="$initial_person_info",b_="$epp",b0="__POSTHOG_TOOLBAR__",b1="$posthog_cookieless",b2=[bz,bA,"__cmpns",bB,"$session_recording_enabled_server_side",bD,bM,bO,bF,bV,bP,bQ,bS,bR,bT,bU,bW,bX,bY,bZ,b_,b$,"$conversations_widget_session_id","$conversations_ticket_id","$conversations_widget_state","$conversations_user_traits"];function b3(a){return a instanceof Element&&(a.id===b0||!(null==a.closest||!a.closest(".toolbar-global-fade-container")))}function b4(a){return!!a&&1===a.nodeType}function b5(a,b){return!!a&&!!a.tagName&&a.tagName.toLowerCase()===b.toLowerCase()}function b6(a){return!!a&&3===a.nodeType}function b7(a){return a?A(a).split(/\s+/):[]}function b8(a){var b=null==e?void 0:e.location.href;return!!(b&&a&&a.some(a=>b.match(a)))}function b9(a){var b="";switch(typeof a.className){case"string":b=a.className;break;case"object":b=(a.className&&"baseVal"in a.className?a.className.baseVal:null)||a.getAttribute("class")||"";break;default:b=""}return b7(b)}function ca(a){return O(a)?null:A(a).split(/(\s+)/).filter(a=>cn(a)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function cb(a){var b="";return cf(a)&&!cg(a)&&a.childNodes&&a.childNodes.length&&bp(a.childNodes,function(a){var c;b6(a)&&a.textContent&&(b+=null!=(c=ca(a.textContent))?c:"")}),A(b)}function cc(a){var b;return K(a.target)?a.srcElement||null:null!=(b=a.target)&&b.shadowRoot?a.composedPath()[0]||null:a.target||null}var cd=["a","button","form","input","select","textarea","label"],ce=a=>!a||b5(a,"html")||!b4(a);function cf(a){for(var b=a;b.parentNode&&!b5(b,"body");b=b.parentNode){var c=b9(b);if(z(c,"ph-sensitive")||z(c,"ph-no-capture"))return!1}if(z(b9(a),"ph-include"))return!0;var d=a.type||"";if(L(d))switch(d.toLowerCase()){case"hidden":case"password":return!1}var e=a.name||a.id||"";return!(L(e)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(e.replace(/[^a-zA-Z0-9]/g,"")))}function cg(a){return!!(b5(a,"input")&&!["button","checkbox","submit","reset"].includes(a.type)||b5(a,"select")||b5(a,"textarea")||"true"===a.getAttribute("contenteditable"))}var ch="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",ci=RegExp("^(?:"+ch+")$"),cj=new RegExp(ch),ck="\\d{3}-?\\d{2}-?\\d{4}",cl=RegExp("^("+ck+")$"),cm=RegExp("("+ck+")");function cn(a,b){return void 0===b&&(b=!0),!(O(a)||L(a)&&(a=A(a),(b?ci:cj).test((a||"").replace(/[- ]/g,""))||(b?cl:cm).test(a)))&&!0}function co(a){var b=cb(a);return cn(b=(b+" "+function a(b){var c="";return b&&b.childNodes&&b.childNodes.length&&bp(b.childNodes,function(b){var d;if(b&&"span"===(null==(d=b.tagName)?void 0:d.toLowerCase()))try{var e=cb(b);c=(c+" "+e).trim(),b.childNodes&&b.childNodes.length&&(c=(c+" "+a(b)).trim())}catch(a){bj.error("[AutoCapture]",a)}}),c}(a)).trim())?b:""}function cp(a){return a.replace(/"|\\"/g,'\\"')}class cq{constructor(a){this.disabled=!1===a;var b=I(a)?a:{};this.thresholdPx=b.threshold_px||30,this.timeoutMs=b.timeout_ms||1e3,this.clickCount=b.click_count||3,this.clicks=[]}isRageClick(a,b,c){if(this.disabled)return!1;var d=this.clicks[this.clicks.length-1];if(d&&Math.abs(a-d.x)+Math.abs(b-d.y)<this.thresholdPx&&c-d.timestamp<this.timeoutMs){if(this.clicks.push({x:a,y:b,timestamp:c}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:a,y:b,timestamp:c}];return!1}}var cr=a=>{var b=null==k?void 0:k.createElement("a");return K(b)?null:(b.href=a,b)},cs=function(a,b){void 0===b&&(b="&");var c,d,e=[];return bp(a,function(a,b){K(a)||K(b)||"undefined"===b||(c=encodeURIComponent(a instanceof File?a.name:a.toString()),d=encodeURIComponent(b),e[e.length]=d+"="+c)}),e.join(b)},ct=function(a,b){for(var c,d=((a.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(f[0]===b){c=f;break}}if(!G(c)||c.length<2)return"";var g=c[1];try{g=decodeURIComponent(g)}catch(a){bj.error("Skipping decoding for malformed query param: "+g)}return g.replace(/\+/g," ")},cu=function(a,b,c){if(!a||!b||!b.length)return a;for(var d=a.split("#"),e=d[0]||"",f=d[1],g=e.split("?"),h=g[1],i=g[0],j=(h||"").split("&"),k=[],l=0;l<j.length;l++){var m=j[l].split("=");G(m)&&(b.includes(m[0])?k.push(m[0]+"="+c):k.push(j[l]))}var n=i;return null!=h&&(n+="?"+k.join("&")),null!=f&&(n+="#"+f),n},cv=function(a,b){var c=a.match(RegExp(b+"=([^&]*)"));return c?c[1]:null},cw="$copy_autocapture",cx=bk("[AutoCapture]");function cy(a,b){return b.length>a?b.slice(0,a)+"...":b}class cz{constructor(a){this.P=!1,this.T=null,this.I=!1,this.instance=a,this.rageclicks=new cq(a.config.rageclick),this.C=null}get R(){var a,b,c=I(this.instance.config.autocapture)?this.instance.config.autocapture:{};return c.url_allowlist=null==(a=c.url_allowlist)?void 0:a.map(a=>new RegExp(a)),c.url_ignorelist=null==(b=c.url_ignorelist)?void 0:b.map(a=>new RegExp(a)),c}F(){this.isBrowserSupported()||cx.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.F(),this.P=!0)}onRemoteConfig(a){a.elementsChainAsString&&(this.I=a.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[bC]:!!a.autocapture_opt_out}),this.T=!!a.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(a){this.C=a}getElementSelectors(a){var b,c=[];return null==(b=this.C)||b.forEach(b=>{var d=null==k?void 0:k.querySelectorAll(b);null==d||d.forEach(d=>{a===d&&c.push(b)})}),c}get isEnabled(){var a,b,c=null==(a=this.instance.persistence)?void 0:a.props[bC];if(N(this.T)&&!R(c)&&!this.instance.O())return!1;var d=null!=(b=this.T)?b:!!c;return!!this.instance.config.autocapture&&!d}M(a,b){if(void 0===b&&(b="$autocapture"),this.isEnabled){var c,d=cc(a);b6(d)&&(d=d.parentNode||null),"$autocapture"===b&&"click"===a.type&&a instanceof MouseEvent&&this.instance.config.rageclick&&null!=(c=this.rageclicks)&&c.isRageClick(a.clientX,a.clientY,a.timeStamp||(new Date).getTime())&&function(a,b){if(!e||ce(a))return!1}(d,this.instance.config.rageclick)&&this.M(a,"$rageclick");var f=b===cw;if(d&&function(a,b,c,d,f){if(void 0===c&&(c=void 0),!e||ce(a)||null!=(g=c)&&g.url_allowlist&&!b8(c.url_allowlist)||null!=(h=c)&&h.url_ignorelist&&b8(c.url_ignorelist))return!1;if(null!=(i=c)&&i.dom_event_allowlist){var g,h,i,j,k=c.dom_event_allowlist;if(k&&!k.some(a=>b.type===a))return!1}var{parentIsUsefulElement:l,targetElementList:m}=((a,b)=>{if(!e||ce(a))return{parentIsUsefulElement:!1,targetElementList:[]}})(a,0);if(!function(a,b){var c=null==b?void 0:b.element_allowlist;if(K(c))return!0;var d,e=function(a){if(c.some(b=>a.tagName.toLowerCase()===b))return{v:!0}};for(var f of a)if(d=e(f))return d.v;return!1}(m,c)||!function(a,b){if(K(b))return!0;var c,d=function(a){if(b.some(b=>a.matches(b)))return{v:!0}};for(var e of a)if(c=d(e))return c.v;return!1}(m,null==(j=c)?void 0:j.css_selector_allowlist))return!1;var n=e.getComputedStyle(a);if(n&&"pointer"===n.getPropertyValue("cursor")&&"click"===b.type)return!0;var o=a.tagName.toLowerCase();switch(o){case"html":return!1;case"form":return(f||["submit"]).indexOf(b.type)>=0;case"input":case"select":case"textarea":return(f||["change","click"]).indexOf(b.type)>=0;default:return l?(f||["click"]).indexOf(b.type)>=0:(f||["click"]).indexOf(b.type)>=0&&(cd.indexOf(o)>-1||"true"===a.getAttribute("contenteditable"))}}(d,a,this.R,0,f?["copy","cut"]:void 0)){var{props:g,explicitNoCapture:h}=function(a,b){for(var c,d,{e:f,maskAllElementAttributes:g,maskAllText:h,elementAttributeIgnoreList:i,elementsChainAsString:j}=b,k=[a],l=a;l.parentNode&&!b5(l,"body");)(m=l.parentNode)&&11===m.nodeType?(k.push(l.parentNode.host),l=l.parentNode.host):(k.push(l.parentNode),l=l.parentNode);var m,n,o=[],p={},q=!1,r=!1;if(bp(k,a=>{var b=cf(a);"a"===a.tagName.toLowerCase()&&(q=a.getAttribute("href"),q=b&&q&&cn(q)&&q),z(b9(a),"ph-no-capture")&&(r=!0),o.push(function(a,b,c,d){var e=a.tagName.toLowerCase(),f={tag_name:e};cd.indexOf(e)>-1&&!c&&("a"===e.toLowerCase()||"button"===e.toLowerCase()?f.$el_text=cy(1024,co(a)):f.$el_text=cy(1024,cb(a)));var g=b9(a);g.length>0&&(f.classes=g.filter(function(a){return""!==a})),bp(a.attributes,function(c){var e;if((!cg(a)||-1!==["name","id","class","aria-label"].indexOf(c.name))&&(null==d||!d.includes(c.name))&&!b&&cn(c.value)&&(!L(e=c.name)||"_ngcontent"!==e.substring(0,10)&&"_nghost"!==e.substring(0,7))){var g=c.value;"class"===c.name&&(g=b7(g).join(" ")),f["attr__"+c.name]=cy(1024,g)}});for(var h=1,i=1,j=a;j=function(a){if(a.previousElementSibling)return a.previousElementSibling;var b=a;do b=b.previousSibling;while(b&&!b4(b))return b}(j);)h++,j.tagName===a.tagName&&i++;return f.nth_child=h,f.nth_of_type=i,f}(a,g,h,i)),bq(p,function(a){if(!cf(a))return{};var b={};return bp(a.attributes,function(a){if(a.name&&0===a.name.indexOf("data-ph-capture-attribute")){var c=a.name.replace("data-ph-capture-attribute-",""),d=a.value;c&&d&&cn(d)&&(b[c]=d)}}),b}(a))}),r)return{props:{},explicitNoCapture:r};if(h||("a"===a.tagName.toLowerCase()||"button"===a.tagName.toLowerCase()?o[0].$el_text=co(a):o[0].$el_text=cb(a)),q){o[0].attr__href=q;var s,t,v=null==(s=cr(q))?void 0:s.host,w=null==e||null==(t=e.location)?void 0:t.host;v&&w&&v!==w&&(n=q)}return{props:bq({$event_type:f.type,$ce_version:1},j?{}:{$elements:o},{$elements_chain:o.map(a=>{var b,c,d,e={text:null==(c=a.$el_text)?void 0:c.slice(0,400),tag_name:a.tag_name,href:null==(d=a.attr__href)?void 0:d.slice(0,2048),attr_class:(b=a.attr__class)?G(b)?b:b7(b):void 0,attr_id:a.attr__id,nth_child:a.nth_child,nth_of_type:a.nth_of_type,attributes:{}};return bs(a).filter(a=>{var[b]=a;return 0===b.indexOf("attr__")}).forEach(a=>{var[b,c]=a;return e.attributes[b]=c}),e}).map(a=>{var b,c,d="";if(a.tag_name&&(d+=a.tag_name),a.attr_class)for(var e of(a.attr_class.sort(),a.attr_class))d+="."+e.replace(/"/g,"");var f=u({},a.text?{text:a.text}:{},{"nth-child":null!=(b=a.nth_child)?b:0,"nth-of-type":null!=(c=a.nth_of_type)?c:0},a.href?{href:a.href}:{},a.attr_id?{attr_id:a.attr_id}:{},a.attributes),g={};return bs(f).sort((a,b)=>{var[c]=a,[d]=b;return c.localeCompare(d)}).forEach(a=>{var[b,c]=a;return g[cp(b.toString())]=cp(c.toString())}),d+=":",d+=bs(g).map(a=>{var[b,c]=a;return b+'="'+c+'"'}).join("")}).join(";")},null!=(c=o[0])&&c.$el_text?{$el_text:null==(d=o[0])?void 0:d.$el_text}:{},n&&"click"===f.type?{$external_click_url:n}:{},p)}}(d,{e:a,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.R.element_attribute_ignorelist,elementsChainAsString:this.I});if(h)return!1;var i=this.getElementSelectors(d);if(i&&i.length>0&&(g.$element_selectors=i),b===cw){var j,k=ca(null==e||null==(j=e.getSelection())?void 0:j.toString()),l=a.type||"clipboard";if(!k)return!1;g.$selected_content=k,g.$copy_type=l}return this.instance.capture(b,g),!0}}}isBrowserSupported(){return H(null==k?void 0:k.querySelectorAll)}}Math.trunc||(Math.trunc=function(a){return a<0?Math.ceil(a):Math.floor(a)}),Number.isInteger||(Number.isInteger=function(a){return P(a)&&isFinite(a)&&Math.floor(a)===a});var cA="0123456789abcdef";class cB{constructor(a){if(this.bytes=a,16!==a.length)throw TypeError("not 128-bit length")}static fromFieldsV7(a,b,c,d){if(!Number.isInteger(a)||!Number.isInteger(b)||!Number.isInteger(c)||!Number.isInteger(d)||a<0||b<0||c<0||d<0||a>0xffffffffffff||b>4095||c>0x3fffffff||d>0xffffffff)throw RangeError("invalid field value");var e=new Uint8Array(16);return e[0]=a/0x10000000000,e[1]=a/0x100000000,e[2]=a/0x1000000,e[3]=a/65536,e[4]=a/256,e[5]=a,e[6]=112|b>>>8,e[7]=b,e[8]=128|c>>>24,e[9]=c>>>16,e[10]=c>>>8,e[11]=c,e[12]=d>>>24,e[13]=d>>>16,e[14]=d>>>8,e[15]=d,new cB(e)}toString(){for(var a="",b=0;b<this.bytes.length;b++)a=a+cA.charAt(this.bytes[b]>>>4)+cA.charAt(15&this.bytes[b]),3!==b&&5!==b&&7!==b&&9!==b||(a+="-");if(36!==a.length)throw Error("Invalid UUIDv7 was generated");return a}clone(){return new cB(this.bytes.slice(0))}equals(a){return 0===this.compareTo(a)}compareTo(a){for(var b=0;b<16;b++){var c=this.bytes[b]-a.bytes[b];if(0!==c)return Math.sign(c)}return 0}}class cC{constructor(){this.A=0,this.D=0,this.j=new cF}generate(){var a=this.generateOrAbort();if(K(a)){this.A=0;var b=this.generateOrAbort();if(K(b))throw Error("Could not generate UUID after timestamp reset");return b}return a}generateOrAbort(){var a=Date.now();if(a>this.A)this.A=a,this.L();else{if(!(a+1e4>this.A))return;this.D++,this.D>0x3ffffffffff&&(this.A++,this.L())}return cB.fromFieldsV7(this.A,Math.trunc(this.D/0x40000000),0x3fffffff&this.D,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}}var cD,cE=a=>{if("u">typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw Error("no cryptographically strong RNG available");for(var b=0;b<a.length;b++)a[b]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return a};e&&!K(e.crypto)&&crypto.getRandomValues&&(cE=a=>crypto.getRandomValues(a));class cF{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(cE(this.N),this.U=0),this.N[this.U++]}}var cG=()=>cH().toString(),cH=()=>(cD||(cD=new cC)).generate(),cI="",cJ=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,cK={H:()=>!!k,B:function(a){bj.error("cookieStore error: "+a)},q:function(a){if(k){try{for(var b=a+"=",c=k.cookie.split(";").filter(a=>a.length),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return decodeURIComponent(e.substring(b.length,e.length))}}catch(a){}return null}},W:function(a){var b;try{b=JSON.parse(cK.q(a))||{}}catch(a){}return b},G:function(a,b,c,d,e){if(k)try{var f="",g="",h=function(a,b){if(b){var c=function(a,b){if(void 0===b&&(b=k),cI)return cI;if(!b||["localhost","127.0.0.1"].includes(a))return"";for(var c=a.split("."),d=Math.min(c.length,8),e="dmn_chk_"+cG();!cI&&d--;){var f=c.slice(d).join("."),g=e+"=1;domain=."+f+";path=/";b.cookie=g+";max-age=3",b.cookie.includes(e)&&(b.cookie=g+";max-age=0",cI=f)}return cI}(a);if(!c){var d,e=(d=a.match(cJ))?d[0]:"";e!==c&&bj.info("Warning: cookie subdomain discovery mismatch",e,c),c=e}return c?"; domain=."+c:""}return""}(k.location.hostname,d);if(c){var i=new Date;i.setTime(i.getTime()+24*c*36e5),f="; expires="+i.toUTCString()}e&&(g="; secure");var j=a+"="+encodeURIComponent(JSON.stringify(b))+f+"; SameSite=Lax; path=/"+h+g;return j.length>3686.4&&bj.warn("cookieStore warning: large cookie, len="+j.length),k.cookie=j,j}catch(a){return}},V:function(a,b){if(null!=k&&k.cookie)try{cK.G(a,"",-1,b)}catch(a){return}}},cL=null,cM={H:function(){if(!N(cL))return cL;var a=!0;return K(e)&&(a=!1),a||bj.error("localStorage unsupported; falling back to cookie store"),cL=a,a},B:function(a){bj.error("localStorage error: "+a)},q:function(a){try{return null==e?void 0:e.localStorage.getItem(a)}catch(a){cM.B(a)}return null},W:function(a){try{return JSON.parse(cM.q(a))||{}}catch(a){}return null},G:function(a,b){try{null==e||e.localStorage.setItem(a,JSON.stringify(b))}catch(a){cM.B(a)}},V:function(a){try{null==e||e.localStorage.removeItem(a)}catch(a){cM.B(a)}}},cN=["$device_id","distinct_id",bM,bN,b_,b$],cO={},cP={H:function(){return!0},B:function(a){bj.error("memoryStorage error: "+a)},q:function(a){return cO[a]||null},W:function(a){return cO[a]||null},G:function(a,b){cO[a]=b},V:function(a){delete cO[a]}},cQ=null,cR={H:function(){if(!N(cQ))return cQ;if(cQ=!0,K(e))cQ=!1;else try{var a="__support__";cR.G(a,"xyz"),'"xyz"'!==cR.q(a)&&(cQ=!1),cR.V(a)}catch(a){cQ=!1}return cQ},B:function(a){bj.error("sessionStorage error: ",a)},q:function(a){try{return null==e?void 0:e.sessionStorage.getItem(a)}catch(a){cR.B(a)}return null},W:function(a){try{return JSON.parse(cR.q(a))||null}catch(a){}return null},G:function(a,b){try{null==e||e.sessionStorage.setItem(a,JSON.stringify(b))}catch(a){cR.B(a)}},V:function(a){try{null==e||e.sessionStorage.removeItem(a)}catch(a){cR.B(a)}}},cS=((fk={})[fk.PENDING=-1]="PENDING",fk[fk.DENIED=0]="DENIED",fk[fk.GRANTED=1]="GRANTED",fk);class cT{constructor(a){this._instance=a}get R(){return this._instance.config}get consent(){return this.J()?cS.DENIED:this.K}isOptedOut(){return"always"===this.R.cookieless_mode||this.consent===cS.DENIED||this.consent===cS.PENDING&&(this.R.opt_out_capturing_by_default||"on_reject"===this.R.cookieless_mode)}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===cS.DENIED}optInOut(a){this.Y.G(this.X,+!!a,this.R.cookie_expiration,this.R.cross_subdomain_cookie,this.R.secure_cookie)}reset(){this.Y.V(this.X,this.R.cross_subdomain_cookie)}get X(){var{token:a,opt_out_capturing_cookie_prefix:b,consent_persistence_name:c}=this._instance.config;return c||(b?b+a:"__ph_opt_in_out_"+a)}get K(){var a=this.Y.q(this.X);return z(W,a)?cS.GRANTED:z(X,a)?cS.DENIED:cS.PENDING}get Y(){if(!this.Z){var a=this.R.opt_out_capturing_persistence_type;this.Z="localStorage"===a?cM:cK;var b="localStorage"===a?cK:cM;b.q(this.X)&&(this.Z.q(this.X)||this.optInOut(z(W,b.q(this.X))),b.V(this.X,this.R.cross_subdomain_cookie))}return this.Z}J(){return!!this.R.respect_dnt&&!!bx([null==j?void 0:j.doNotTrack,null==j?void 0:j.msDoNotTrack,q.doNotTrack],a=>z(W,a))}}var cU=bk("[Dead Clicks]"),cV=()=>!0,cW=a=>{var b,c=!(null==(b=a.instance.persistence)||!b.get_property(bI)),d=a.instance.config.capture_dead_clicks;return R(d)?d:!!I(d)||c};class cX{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(a,b,c){this.instance=a,this.isEnabled=b,this.onCapture=c,this.startIfEnabled()}onRemoteConfig(a){this.instance.persistence&&this.instance.persistence.register({[bI]:null==a?void 0:a.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it(()=>{this.et()})}it(a){var b,c;null!=(b=q.__PosthogExtensions__)&&b.initDeadClicksAutocapture&&a(),null==(c=q.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this.instance,"dead-clicks-autocapture",b=>{b?cU.error("failed to load script",b):a()})}et(){var a;if(k){if(!this.tt&&null!=(a=q.__PosthogExtensions__)&&a.initDeadClicksAutocapture){var b=I(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};b.__onCapture=this.onCapture,this.tt=q.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,b),this.tt.start(k),cU.info("starting...")}}else cU.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,cU.info("stopping..."))}}var cY=bk("[ExceptionAutocapture]");class cZ{constructor(a){var b,c,d;this.rt=()=>{var a;e&&this.isEnabled&&null!=(a=q.__PosthogExtensions__)&&a.errorWrappingFunctions},this._instance=a,this.ht=!(null==(b=this._instance.persistence)||!b.props[bE]),this.dt=new Z({refillRate:null!=(c=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)?c:1,bucketSize:null!=(d=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)?d:10,refillInterval:1e4,h:cY}),this.R=this.vt(),this.startIfEnabledOrStop()}vt(){var a=this._instance.config.capture_exceptions,b={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return I(a)?b=u({},b,a):(K(a)?this.ht:a)&&(b=u({},b,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),b}get isEnabled(){return this.R.capture_console_errors||this.R.capture_unhandled_errors||this.R.capture_unhandled_rejections}startIfEnabledOrStop(){this.isEnabled?(cY.info("enabled"),this.ut(),this.it(this.rt)):this.ut()}it(a){var b,c;null!=(b=q.__PosthogExtensions__)&&b.errorWrappingFunctions&&a(),null==(c=q.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"exception-autocapture",b=>{if(b)return cY.error("failed to load script",b);a()})}ut(){var a,b,c;null==(a=this.st)||a.call(this),this.st=void 0,null==(b=this.nt)||b.call(this),this.nt=void 0,null==(c=this.ot)||c.call(this),this.ot=void 0}onRemoteConfig(a){var b=a.autocaptureExceptions;this.ht=!!b,this._instance.persistence&&this._instance.persistence.register({[bE]:this.ht}),this.R=this.vt(),this.startIfEnabledOrStop()}onConfigChange(){this.R=this.vt()}captureException(a){var b,c,d=null!=(b=null==a||null==(c=a.$exception_list)||null==(c=c[0])?void 0:c.type)?b:"Exception";this.dt.consumeRateLimit(d)?cY.info("Skipping exception capture because of client rate limiting.",{exception:d}):this._instance.exceptions.sendExceptionEvent(a)}}class c${constructor(a){var b;this._instance=a,this.ct=(null==e||null==(b=e.location)?void 0:b.pathname)||""}get isEnabled(){return"history_change"===this._instance.config.capture_pageview}startIfEnabled(){this.isEnabled&&(bj.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ft&&this.ft(),this.ft=void 0,bj.info("History API monitoring stopped")}monitorHistoryChanges(){}_t(a){try{var b,c=null==e||null==(b=e.location)?void 0:b.pathname;if(!c)return;c!==this.ct&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:a}),this.ct=c}catch(b){bj.error("Error capturing "+a+" pageview",b)}}yt(){if(!this.ft){var a=()=>{this._t("popstate")};by(e,"popstate",a),this.ft=()=>{e&&e.removeEventListener("popstate",a)}}}}var c_=bk("[SegmentIntegration]"),c0="posthog-js";function c1(a,b){var{organization:c,projectId:d,prefix:e,severityAllowList:f=["error"],sendExceptionsToPostHog:g=!0}=void 0===b?{}:b;return b=>{if(!("*"===f||f.includes(b.level))||!a.__loaded)return b;b.tags||(b.tags={});var h,i,j,k,l,m=a.requestRouter.endpointFor("ui","/project/"+a.config.token+"/person/"+a.get_distinct_id());b.tags["PostHog Person URL"]=m,a.sessionRecordingStarted()&&(b.tags["PostHog Recording URL"]=a.get_session_replay_url({withTimestamp:!0}));var n=(null==(h=b.exception)?void 0:h.values)||[],o=n.map(a=>u({},a,{stacktrace:a.stacktrace?u({},a.stacktrace,{type:"raw",frames:(a.stacktrace.frames||[]).map(a=>u({},a,{platform:"web:javascript"}))}):void 0})),p={$exception_message:(null==(i=n[0])?void 0:i.value)||b.message,$exception_type:null==(j=n[0])?void 0:j.type,$exception_level:b.level,$exception_list:o,$sentry_event_id:b.event_id,$sentry_exception:b.exception,$sentry_exception_message:(null==(k=n[0])?void 0:k.value)||b.message,$sentry_exception_type:null==(l=n[0])?void 0:l.type,$sentry_tags:b.tags};return c&&d&&(p.$sentry_url=(e||"https://sentry.io/organizations/")+c+"/issues/?project="+d+"&query="+b.event_id),g&&a.exceptions.sendExceptionEvent(p),b}}class c2{constructor(a,b,c,d,e,f){this.name=c0,this.setupOnce=function(g){g(c1(a,{organization:b,projectId:c,prefix:d,severityAllowList:e,sendExceptionsToPostHog:null==f||f}))}}}var c3=null!=e&&e.location?cv(e.location.hash,"__posthog")||cv(location.hash,"state"):null,c4=bk("[Toolbar]"),c5=((fl=c5||{})[fl.UNINITIALIZED=0]="UNINITIALIZED",fl[fl.LOADING=1]="LOADING",fl[fl.LOADED=2]="LOADED",fl);class c6{constructor(a){this.instance=a}bt(a){q.ph_toolbar_state=a}wt(){var a;return null!=(a=q.ph_toolbar_state)?a:c5.UNINITIALIZED}maybeLoadToolbar(a,b,c){if(void 0===a&&(a=void 0),void 0===b&&(b=void 0),void 0===c&&(c=void 0),!e||!k)return!1;a=null!=a?a:e.location,c=null!=c?c:e.history;try{if(!b){try{e.localStorage.setItem("test","test"),e.localStorage.removeItem("test")}catch(a){return!1}b=null==e?void 0:e.localStorage}var d,f=c3||cv(a.hash,"__posthog")||cv(a.hash,"state"),g=f?bt(()=>JSON.parse(atob(decodeURIComponent(f))))||bt(()=>JSON.parse(decodeURIComponent(f))):null;return g&&"ph_authorize"===g.action?((d=g).source="url",d&&Object.keys(d).length>0&&(g.desiredHash?a.hash=g.desiredHash:c?c.replaceState(c.state,"",a.pathname+a.search):a.hash="")):((d=JSON.parse(b.getItem("_postHogToolbarParams")||"{}")).source="localstorage",delete d.userIntent),!(!d.token||this.instance.config.token!==d.token)&&(this.loadToolbar(d),!0)}catch(a){return!1}}xt(a){var b=q.ph_load_toolbar||q.ph_load_editor;!O(b)&&H(b)?b(a,this.instance):c4.warn("No toolbar load function found")}loadToolbar(a){return null!=k&&k.getElementById(b0),!1}Et(a){return this.loadToolbar(a)}maybeLoadEditor(a,b,c){return void 0===a&&(a=void 0),void 0===b&&(b=void 0),void 0===c&&(c=void 0),this.maybeLoadToolbar(a,b,c)}}var c7=bk("[TracingHeaders]");class c8{constructor(a){this.$t=void 0,this.St=void 0,this.rt=()=>{var a,b;K(this.$t)&&(null==(a=q.__PosthogExtensions__)||null==(a=a.tracingHeadersPatchFns)||a._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),K(this.St)&&(null==(b=q.__PosthogExtensions__)||null==(b=b.tracingHeadersPatchFns)||b._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=a}it(a){var b,c;null!=(b=q.__PosthogExtensions__)&&b.tracingHeadersPatchFns&&a(),null==(c=q.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"tracing-headers",b=>{if(b)return c7.error("failed to load script",b);a()})}startIfEnabledOrStop(){var a,b;this._instance.config.__add_tracing_headers?this.it(this.rt):(null==(a=this.$t)||a.call(this),null==(b=this.St)||b.call(this),this.$t=void 0,this.St=void 0)}}var c9="https?://(.*)",da=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],db=br(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],da),dc="<masked>",dd=["li_fat_id"];function de(a,b,c){if(!k)return{};var d,e=b?br([],da,c||[]):[],f=df(cu(k.URL,e,dc),a);return bq((d={},bp(dd,function(a){var b=cK.q(a);d[a]=b||null}),d),f)}function df(a,b){var c=db.concat(b||[]),d={};return bp(c,function(b){var c=ct(a,b);d[b]=c||null}),d}function dg(a){var b=a?0===a.search(c9+"google.([^/?]*)")?"google":0===a.search(c9+"bing.com")?"bing":0===a.search(c9+"yahoo.com")?"yahoo":0===a.search(c9+"duckduckgo.com")?"duckduckgo":null:null,c={};if(!N(b)){c.$search_engine=b;var d=k?ct(k.referrer,"yahoo"!=b?"q":"p"):"";d.length&&(c.ph_keyword=d)}return c}function dh(){return navigator.language||navigator.userLanguage}function di(){return(null==k?void 0:k.referrer)||"$direct"}function dj(a,b){var c=a?br([],da,b||[]):[],d=null==l?void 0:l.href.substring(0,1e3);return{r:di().substring(0,1e3),u:d?cu(d,c,dc):void 0}}function dk(a){var b,{r:c,u:d}=a,e={$referrer:c,$referring_domain:null==c?void 0:"$direct"==c?"$direct":null==(b=cr(c))?void 0:b.host};if(d){e.$current_url=d;var f=cr(d);e.$host=null==f?void 0:f.host,e.$pathname=null==f?void 0:f.pathname,bq(e,df(d))}return c&&bq(e,dg(c)),e}function dl(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(a){return}}var dm=bk("[Web Vitals]");class dn{constructor(a){var b;this.kt=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Pt=()=>{clearTimeout(this.Tt),0!==this.N.metrics.length&&(this._instance.capture("$web_vitals",this.N.metrics.reduce((a,b)=>u({},a,{["$web_vitals_"+b.name+"_event"]:u({},b),["$web_vitals_"+b.name+"_value"]:b.value}),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.It=a=>{var b,c=null==(b=this._instance.sessionManager)?void 0:b.checkAndGetSessionAndWindowId(!0);if(K(c))dm.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var d=this.Ct();K(d)||(O(null==a?void 0:a.name)||O(null==a?void 0:a.value)?dm.error("Invalid metric received",a):this.Rt&&a.value>=this.Rt?dm.error("Ignoring metric with value >= "+this.Rt,a):(this.N.url!==d&&(this.Pt(),this.Tt=setTimeout(this.Pt,this.flushToCaptureTimeoutMs)),K(this.N.url)&&(this.N.url=d),this.N.firstMetricTimestamp=K(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,a.attribution&&a.attribution.interactionTargetElement&&(a.attribution.interactionTargetElement=void 0),this.N.metrics.push(u({},a,{$current_url:d,$session_id:c.sessionId,$window_id:c.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.Pt()))}},this.rt=()=>{if(!this.P){var a,b,c,d,e=q.__PosthogExtensions__;K(e)||K(e.postHogWebVitalsCallbacks)||({onLCP:a,onCLS:b,onFCP:c,onINP:d}=e.postHogWebVitalsCallbacks),a&&b&&c&&d?(this.allowedMetrics.indexOf("LCP")>-1&&a(this.It.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&b(this.It.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&c(this.It.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&d(this.It.bind(this)),this.P=!0):dm.error("web vitals callbacks not loaded - not starting")}},this._instance=a,this.kt=!(null==(b=this._instance.persistence)||!b.props[bH]),this.startIfEnabled()}get allowedMetrics(){var a,b,c=I(this._instance.config.capture_performance)?null==(a=this._instance.config.capture_performance)?void 0:a.web_vitals_allowed_metrics:void 0;return O(c)?(null==(b=this._instance.persistence)?void 0:b.props[bK])||["CLS","FCP","INP","LCP"]:c}get flushToCaptureTimeoutMs(){return(I(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get useAttribution(){var a=I(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_attribution:void 0;return null!=a&&a}get Rt(){var a=I(this._instance.config.capture_performance)&&P(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:9e5;return 0<a&&a<=6e4?9e5:a}get isEnabled(){var a=null==l?void 0:l.protocol;if("http:"!==a&&"https:"!==a)return dm.info("Web Vitals are disabled on non-http/https protocols"),!1;var b=I(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:R(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return R(b)?b:this.kt}startIfEnabled(){this.isEnabled&&!this.P&&(dm.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(a){var b=I(a.capturePerformance)&&!!a.capturePerformance.web_vitals,c=I(a.capturePerformance)?a.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[bH]:b}),this._instance.persistence.register({[bK]:c})),this.kt=b,this.startIfEnabled()}it(a){var b,c;if(null!=(b=q.__PosthogExtensions__)&&b.postHogWebVitalsCallbacks)a();else{var d=this.useAttribution?"web-vitals-with-attribution":"web-vitals";null==(c=q.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,d,b=>{b?dm.error("failed to load script",b):a()})}}Ct(){dm.error("Could not determine current URL")}}var dp=bk("[Heatmaps]");function dq(a){return I(a)&&"clientX"in a&&"clientY"in a&&P(a.clientX)&&P(a.clientY)}class dr{constructor(a){var b;this.kt=!1,this.P=!1,this.Ft=null,this.instance=a,this.kt=!(null==(b=this.instance.persistence)||!b.props[bD]),this.rageclicks=new cq(a.config.rageclick)}get flushIntervalMilliseconds(){var a=5e3;return I(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(a=this.instance.config.capture_heatmaps.flush_interval_milliseconds),a}get isEnabled(){return O(this.instance.config.capture_heatmaps)?O(this.instance.config.enable_heatmaps)?this.kt:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled)this.P||(dp.info("starting..."),this.Mt(),this.Ot());else{var a;clearInterval(null!=(a=this.Ft)?a:void 0),this.At(),this.getAndClearBuffer()}}onRemoteConfig(a){var b=!!a.heatmaps;this.instance.persistence&&this.instance.persistence.register({[bD]:b}),this.kt=b,this.startIfEnabled()}getAndClearBuffer(){var a=this.N;return this.N=void 0,a}Dt(a){this.jt(a.originalEvent,"deadclick")}Ot(){this.Ft&&clearInterval(this.Ft),this.Ft="visible"===(null==k?void 0:k.visibilityState)?setInterval(this.Lt.bind(this),this.flushIntervalMilliseconds):null}Mt(){e&&k&&(this.Nt=this.Lt.bind(this),by(e,"beforeunload",this.Nt),this.Ut=a=>this.jt(a||(null==e?void 0:e.event)),by(k,"click",this.Ut,{capture:!0}),this.zt=a=>this.Ht(a||(null==e?void 0:e.event)),by(k,"mousemove",this.zt,{capture:!0}),this.Bt=new cX(this.instance,cV,this.Dt.bind(this)),this.Bt.startIfEnabled(),this.qt=this.Ot.bind(this),by(k,"visibilitychange",this.qt),this.P=!0)}At(){var a;e&&k&&(this.Nt&&e.removeEventListener("beforeunload",this.Nt),this.Ut&&k.removeEventListener("click",this.Ut,{capture:!0}),this.zt&&k.removeEventListener("mousemove",this.zt,{capture:!0}),this.qt&&k.removeEventListener("visibilitychange",this.qt),clearTimeout(this.Wt),null==(a=this.Bt)||a.stop(),this.P=!1)}Gt(a,b){var c=this.instance.scrollManager.scrollY(),d=this.instance.scrollManager.scrollX(),f=this.instance.scrollManager.scrollElement(),g=function(a,b,c){for(var d=a;d&&b4(d)&&!b5(d,"body")&&d!==c;){if(z(b,null==e?void 0:e.getComputedStyle(d).position))return!0;d=function(a){var b=a.parentNode;return!(!b||!b4(b))&&b}(d)}return!1}(cc(a),["fixed","sticky"],f);return{x:a.clientX+(g?0:d),y:a.clientY+(g?0:c),target_fixed:g,type:b}}jt(a,b){var c;if(void 0===b&&(b="click"),!b3(a.target)&&dq(a)){var d=this.Gt(a,b);null!=(c=this.rageclicks)&&c.isRageClick(a.clientX,a.clientY,(new Date).getTime())&&this.Vt(u({},d,{type:"rageclick"})),this.Vt(d)}}Ht(a){!b3(a.target)&&dq(a)&&(clearTimeout(this.Wt),this.Wt=setTimeout(()=>{this.Vt(this.Gt(a,"mousemove"))},500))}Vt(a){}Lt(){this.N&&!J(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class ds{constructor(a){this.Jt=(a,b,c)=>{c&&(c.noSessionId||c.activityTimeout||c.sessionPastMaximumLength)&&(bj.info("[PageViewManager] Session rotated, clearing pageview state",{sessionId:a,changeReason:c}),this.Kt=void 0,this._instance.scrollManager.resetContext())},this._instance=a,this.Yt()}Yt(){var a;this.Xt=null==(a=this._instance.sessionManager)?void 0:a.onSessionId(this.Jt)}destroy(){var a;null==(a=this.Xt)||a.call(this),this.Xt=void 0}doPageView(a,b){var c,d=this.Qt(a,b);return this.Kt={pathname:null!=(c=null==e?void 0:e.location.pathname)?c:"",pageViewId:b,timestamp:a},this._instance.scrollManager.resetContext(),d}doPageLeave(a){var b;return this.Qt(a,null==(b=this.Kt)?void 0:b.pageViewId)}doEvent(){var a;return{$pageview_id:null==(a=this.Kt)?void 0:a.pageViewId}}Qt(a,b){var c=this.Kt;if(!c)return{$pageview_id:b};var d={$pageview_id:b,$prev_pageview_id:c.pageViewId},e=this._instance.scrollManager.getContext();if(e&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:f,lastScrollY:g,maxScrollY:h,maxContentHeight:i,lastContentY:j,maxContentY:k}=e;if(!(K(f)||K(g)||K(h)||K(i)||K(j)||K(k))){f=Math.ceil(f),g=Math.ceil(g),h=Math.ceil(h),i=Math.ceil(i),j=Math.ceil(j),k=Math.ceil(k);var l=f<=1?1:Y(g/f,0,1,bj),m=f<=1?1:Y(h/f,0,1,bj),n=i<=1?1:Y(j/i,0,1,bj),o=i<=1?1:Y(k/i,0,1,bj);d=bq(d,{$prev_pageview_last_scroll:g,$prev_pageview_last_scroll_percentage:l,$prev_pageview_max_scroll:h,$prev_pageview_max_scroll_percentage:m,$prev_pageview_last_content:j,$prev_pageview_last_content_percentage:n,$prev_pageview_max_content:k,$prev_pageview_max_content_percentage:o})}}return c.pathname&&(d.$prev_pageview_pathname=c.pathname),c.timestamp&&(d.$prev_pageview_duration=(a.getTime()-c.timestamp.getTime())/1e3),d}}var dt=((fm={}).GZipJS="gzip-js",fm.Base64="base64",fm),du=Uint8Array,dv=Uint16Array,dw=Uint32Array,dx=new du([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dy=new du([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dz=new du([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dA=function(a,b){for(var c=new dv(31),d=0;d<31;++d)c[d]=b+=1<<a[d-1];var e=new dw(c[30]);for(d=1;d<30;++d)for(var f=c[d];f<c[d+1];++f)e[f]=f-c[d]<<5|d;return[c,e]},dB=dA(dx,2),dC=dB[0],dD=dB[1];dC[28]=258,dD[258]=28;for(var dE=dA(dy,0)[1],dF=new dv(32768),dG=0;dG<32768;++dG){var dH=(43690&dG)>>>1|(21845&dG)<<1;dH=(61680&(dH=(52428&dH)>>>2|(13107&dH)<<2))>>>4|(3855&dH)<<4,dF[dG]=((65280&dH)>>>8|(255&dH)<<8)>>>1}var dI=function(a,b,c){for(var d=a.length,e=0,f=new dv(b);e<d;++e)++f[a[e]-1];var g,h=new dv(b);for(e=0;e<b;++e)h[e]=h[e-1]+f[e-1]<<1;if(c){g=new dv(1<<b);var i=15-b;for(e=0;e<d;++e)if(a[e])for(var j=e<<4|a[e],k=b-a[e],l=h[a[e]-1]++<<k,m=l|(1<<k)-1;l<=m;++l)g[dF[l]>>>i]=j}else for(g=new dv(d),e=0;e<d;++e)g[e]=dF[h[a[e]-1]++]>>>15-a[e];return g},dJ=new du(288);for(dG=0;dG<144;++dG)dJ[dG]=8;for(dG=144;dG<256;++dG)dJ[dG]=9;for(dG=256;dG<280;++dG)dJ[dG]=7;for(dG=280;dG<288;++dG)dJ[dG]=8;var dK=new du(32);for(dG=0;dG<32;++dG)dK[dG]=5;var dL=dI(dJ,9,0),dM=dI(dK,5,0),dN=function(a){return(a/8|0)+(7&a&&1)},dO=function(a,b,c){(null==c||c>a.length)&&(c=a.length);var d=new(a instanceof dv?dv:a instanceof dw?dw:du)(c-b);return d.set(a.subarray(b,c)),d},dP=function(a,b,c){c<<=7&b;var d=b/8|0;a[d]|=c,a[d+1]|=c>>>8},dQ=function(a,b,c){c<<=7&b;var d=b/8|0;a[d]|=c,a[d+1]|=c>>>8,a[d+2]|=c>>>16},dR=function(a,b){for(var c=[],d=0;d<a.length;++d)a[d]&&c.push({s:d,f:a[d]});var e=c.length,f=c.slice();if(!e)return[new du(0),0];if(1==e){var g=new du(c[0].s+1);return g[c[0].s]=1,[g,1]}c.sort(function(a,b){return a.f-b.f}),c.push({s:-1,f:25001});var h=c[0],i=c[1],j=0,k=1,l=2;for(c[0]={s:-1,f:h.f+i.f,l:h,r:i};k!=e-1;)h=c[c[j].f<c[l].f?j++:l++],i=c[j!=k&&c[j].f<c[l].f?j++:l++],c[k++]={s:-1,f:h.f+i.f,l:h,r:i};var m=f[0].s;for(d=1;d<e;++d)f[d].s>m&&(m=f[d].s);var n=new dv(m+1),o=dS(c[k-1],n,0);if(o>b){d=0;var p=0,q=o-b,r=1<<q;for(f.sort(function(a,b){return n[b.s]-n[a.s]||a.f-b.f});d<e;++d){var s=f[d].s;if(!(n[s]>b))break;p+=r-(1<<o-n[s]),n[s]=b}for(p>>>=q;p>0;){var t=f[d].s;n[t]<b?p-=1<<b-n[t]++-1:++d}for(;d>=0&&p;--d){var u=f[d].s;n[u]==b&&(--n[u],++p)}o=b}return[new du(n),o]},dS=function(a,b,c){return -1==a.s?Math.max(dS(a.l,b,c+1),dS(a.r,b,c+1)):b[a.s]=c},dT=function(a){for(var b=a.length;b&&!a[--b];);for(var c=new dv(++b),d=0,e=a[0],f=1,g=function(a){c[d++]=a},h=1;h<=b;++h)if(a[h]==e&&h!=b)++f;else{if(!e&&f>2){for(;f>138;f-=138)g(32754);f>2&&(g(f>10?f-11<<5|28690:f-3<<5|12305),f=0)}else if(f>3){for(g(e),--f;f>6;f-=6)g(8304);f>2&&(g(f-3<<5|8208),f=0)}for(;f--;)g(e);f=1,e=a[h]}return[c.subarray(0,d),b]},dU=function(a,b){for(var c=0,d=0;d<b.length;++d)c+=a[d]*b[d];return c},dV=function(a,b,c){var d=c.length,e=dN(b+2);a[e]=255&d,a[e+1]=d>>>8,a[e+2]=255^a[e],a[e+3]=255^a[e+1];for(var f=0;f<d;++f)a[e+f+4]=c[f];return 8*(e+4+d)},dW=function(a,b,c,d,e,f,g,h,i,j,k){dP(b,k++,c),++e[256];for(var l=dR(e,15),m=l[0],n=l[1],o=dR(f,15),p=o[0],q=o[1],r=dT(m),s=r[0],t=r[1],u=dT(p),v=u[0],w=u[1],x=new dv(19),y=0;y<s.length;++y)x[31&s[y]]++;for(y=0;y<v.length;++y)x[31&v[y]]++;for(var z=dR(x,7),A=z[0],B=z[1],C=19;C>4&&!A[dz[C-1]];--C);var D,E,F,G,H=j+5<<3,I=dU(e,dJ)+dU(f,dK)+g,J=dU(e,m)+dU(f,p)+g+14+3*C+dU(x,A)+(2*x[16]+3*x[17]+7*x[18]);if(H<=I&&H<=J)return dV(b,k,a.subarray(i,i+j));if(dP(b,k,1+(J<I)),k+=2,J<I){D=dI(m,n,0),E=m,F=dI(p,q,0),G=p;var K=dI(A,B,0);for(dP(b,k,t-257),dP(b,k+5,w-1),dP(b,k+10,C-4),k+=14,y=0;y<C;++y)dP(b,k+3*y,A[dz[y]]);k+=3*C;for(var L=[s,v],M=0;M<2;++M){var N=L[M];for(y=0;y<N.length;++y){var O=31&N[y];dP(b,k,K[O]),k+=A[O],O>15&&(dP(b,k,N[y]>>>5&127),k+=N[y]>>>12)}}}else D=dL,E=dJ,F=dM,G=dK;for(y=0;y<h;++y)if(d[y]>255){dQ(b,k,D[(O=d[y]>>>18&31)+257]),k+=E[O+257],O>7&&(dP(b,k,d[y]>>>23&31),k+=dx[O]);var P=31&d[y];dQ(b,k,F[P]),k+=G[P],P>3&&(dQ(b,k,d[y]>>>5&8191),k+=dy[P])}else dQ(b,k,D[d[y]]),k+=E[d[y]];return dQ(b,k,D[256]),k+E[256]},dX=new dw([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),dY=function(){for(var a=new dw(256),b=0;b<256;++b){for(var c=b,d=9;--d;)c=(1&c&&0xedb88320)^c>>>1;a[b]=c}return a}(),dZ=function(a,b,c){for(;c;++b)a[b]=c,c>>>=8},d$=function(a){var b,c,d,e,f="";for(b=c=0,d=(a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,e=0;e<d;e++){var g=a.charCodeAt(e),h=null;g<128?c++:h=g>127&&g<2048?String.fromCharCode(g>>6|192,63&g|128):String.fromCharCode(g>>12|224,g>>6&63|128,63&g|128),N(h)||(c>b&&(f+=a.substring(b,c)),f+=h,b=c=e+1)}return c>b&&(f+=a.substring(b,a.length)),f},d_=!!n||!!m,d0="text/plain",d1=function(a,b,c){void 0===c&&(c=!0);var d,[e,f]=a.split("?"),g=u({},b),h=null!=(d=null==f?void 0:f.split("&").map(a=>{var b,[d,e]=a.split("="),f=c&&null!=(b=g[d])?b:e;return delete g[d],d+"="+f}))?d:[],i=cs(g);return i&&h.push(i),e+"?"+h.join("&")},d2=(a,b)=>JSON.stringify(a,(a,b)=>"bigint"==typeof b?b.toString():b,b),d3=a=>{var{data:b,compression:c}=a;if(b){if(c===dt.GZipJS){var d,e,f,g,h,i,j,k,l=new Blob([(d=function(a,b){var c=a.length;if("u">typeof TextEncoder)return(new TextEncoder).encode(a);for(var d=new du(a.length+(a.length>>>1)),e=0,f=function(a){d[e++]=a},g=0;g<c;++g){if(e+5>d.length){var h=new du(e+8+(c-g<<1));h.set(d),d=h}var i=a.charCodeAt(g);i<128?f(i):(i<2048?f(192|i>>>6):(i>55295&&i<57344?(f(240|(i=65536+(1047552&i)|1023&a.charCodeAt(++g))>>>18),f(128|i>>>12&63)):f(224|i>>>12),f(128|i>>>6&63)),f(128|63&i))}return dO(d,0,e)}(d2(b)),e={mtime:0},f=0xffffffff,g={p:function(a){for(var b=f,c=0;c<a.length;++c)b=dY[255&b^a[c]]^b>>>8;f=b},d:function(){return 0xffffffff^f}},h=d.length,g.p(d),k=(i=10+(e.filename&&e.filename.length+1||0),j=function(a,b,c,d,e,f){var g=a.length,h=new du(d+g+5*(1+Math.floor(g/7e3))+8),i=h.subarray(d,h.length-8),j=0;if(!b||g<8)for(var k=0;k<=g;k+=65535){var l=k+65535;l<g?j=dV(i,j,a.subarray(k,l)):(i[k]=f,j=dV(i,j,a.subarray(k,g)))}else{for(var m=dX[b-1],n=m>>>13,o=8191&m,p=(1<<c)-1,q=new dv(32768),r=new dv(p+1),s=Math.ceil(c/3),t=2*s,u=function(b){return(a[b]^a[b+1]<<s^a[b+2]<<t)&p},v=new dw(25e3),w=new dv(288),x=new dv(32),y=0,z=0,A=(k=0,0),B=0,C=0;k<g;++k){var D=u(k),E=32767&k,F=r[D];if(q[E]=F,r[D]=E,B<=k){var G=g-k;if((y>7e3||A>24576)&&G>423){j=dW(a,i,0,v,w,x,z,A,C,k-C,j),A=y=z=0,C=k;for(var H=0;H<286;++H)w[H]=0;for(H=0;H<30;++H)x[H]=0}var I=2,J=0,K=o,L=E-F&32767;if(G>2&&D==u(k-L))for(var M=Math.min(n,G)-1,N=Math.min(32767,k),O=Math.min(258,G);L<=N&&--K&&E!=F;){if(a[k+I]==a[k+I-L]){for(var P=0;P<O&&a[k+P]==a[k+P-L];++P);if(P>I){if(I=P,J=L,P>M)break;var Q=Math.min(L,P-2),R=0;for(H=0;H<Q;++H){var S=k-L+H+32768&32767,T=S-q[S]+32768&32767;T>R&&(R=T,F=S)}}}L+=(E=F)-(F=q[E])+32768&32767}if(J){v[A++]=0x10000000|dD[I]<<18|dE[J];var U=31&dD[I],V=31&dE[J];z+=dx[U]+dy[V],++w[257+U],++x[V],B=k+I,++y}else v[A++]=a[k],++w[a[k]]}}j=dW(a,i,f,v,w,x,z,A,C,k-C,j)}return dO(h,0,d+dN(j)+8)}(d,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(d.length)))):12+e.mem,i,8,!0)).length,function(a,b){var c=b.filename;if(a[0]=31,a[1]=139,a[2]=8,a[8]=b.level<2?4:2*(9==b.level),a[9]=3,0!=b.mtime&&dZ(a,4,Math.floor(new Date(b.mtime||Date.now())/1e3)),c){a[3]=8;for(var d=0;d<=c.length;++d)a[d+10]=c.charCodeAt(d)}}(j,e),dZ(j,k-8,g.d()),dZ(j,k-4,h),j)],{type:d0});return{contentType:d0,body:l,estimatedSize:l.size}}if(c===dt.Base64){let a;var m="data="+encodeURIComponent("string"==typeof(a=function(a){var b,c,d,e,f,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,i=0,j="",k=[];if(!a)return a;a=d$(a);do b=(f=a.charCodeAt(h++)<<16|a.charCodeAt(h++)<<8|a.charCodeAt(h++))>>18&63,c=f>>12&63,d=f>>6&63,e=63&f,k[i++]=g.charAt(b)+g.charAt(c)+g.charAt(d)+g.charAt(e);while(h<a.length)switch(j=k.join(""),a.length%3){case 1:j=j.slice(0,-2)+"==";break;case 2:j=j.slice(0,-1)+"="}return j}(d2(b)))?a:d2(a));return{contentType:"application/x-www-form-urlencoded",body:m,estimatedSize:new Blob([m]).size}}var n=d2(b);return{contentType:"application/json",body:n,estimatedSize:new Blob([n]).size}}},d4=[];m&&d4.push({transport:"fetch",method:a=>{var b,c,{contentType:d,body:e,estimatedSize:f}=null!=(b=d3(a))?b:{},g=new Headers;bp(a.headers,function(a,b){g.append(b,a)}),d&&g.append("Content-Type",d);var h=a.url,i=null;if(o){var j=new o;i={signal:j.signal,timeout:setTimeout(()=>j.abort(),a.timeout)}}m(h,u({method:(null==a?void 0:a.method)||"GET",headers:g,keepalive:"POST"===a.method&&52428.8>(f||0),body:e,signal:null==(c=i)?void 0:c.signal},a.fetchOptions)).then(b=>b.text().then(c=>{var d={statusCode:b.status,text:c};if(200===b.status)try{d.json=JSON.parse(c)}catch(a){bj.error(a)}null==a.callback||a.callback(d)})).catch(b=>{bj.error(b),null==a.callback||a.callback({statusCode:0,text:b})}).finally(()=>i?clearTimeout(i.timeout):null)}}),n&&d4.push({transport:"XHR",method:a=>{var b,c=new n;c.open(a.method||"GET",a.url,!0);var{contentType:d,body:e}=null!=(b=d3(a))?b:{};bp(a.headers,function(a,b){c.setRequestHeader(b,a)}),d&&c.setRequestHeader("Content-Type",d),a.timeout&&(c.timeout=a.timeout),a.disableXHRCredentials||(c.withCredentials=!0),c.onreadystatechange=()=>{if(4===c.readyState){var b={statusCode:c.status,text:c.responseText};if(200===c.status)try{b.json=JSON.parse(c.responseText)}catch(a){}null==a.callback||a.callback(b)}},c.send(e)}}),null!=j&&j.sendBeacon&&d4.push({transport:"sendBeacon",method:a=>{var b=d1(a.url,{beacon:"1"});try{var c,{contentType:d,body:e}=null!=(c=d3(a))?c:{},f="string"==typeof e?new Blob([e],{type:d}):e;j.sendBeacon(b,f)}catch(a){}}});var d5=function(a,b){if(!function(a){try{new RegExp(a)}catch(a){return!1}return!0}(b))return!1;try{return new RegExp(b).test(a)}catch(a){return!1}};function d6(a,b,c){return d2({distinct_id:a,userPropertiesToSet:b,userPropertiesToSetOnce:c})}var d7={exact:(a,b)=>b.some(b=>a.some(a=>b===a)),is_not:(a,b)=>b.every(b=>a.every(a=>b!==a)),regex:(a,b)=>b.some(b=>a.some(a=>d5(b,a))),not_regex:(a,b)=>b.every(b=>a.every(a=>!d5(b,a))),icontains:(a,b)=>b.map(d8).some(b=>a.map(d8).some(a=>b.includes(a))),not_icontains:(a,b)=>b.map(d8).every(b=>a.map(d8).every(a=>!b.includes(a))),gt:(a,b)=>b.some(b=>{var c=parseFloat(b);return!isNaN(c)&&a.some(a=>c>parseFloat(a))}),lt:(a,b)=>b.some(b=>{var c=parseFloat(b);return!isNaN(c)&&a.some(a=>c<parseFloat(a))})},d8=a=>a.toLowerCase();function d9(a,b){return!a||Object.entries(a).every(a=>{var[c,d]=a,e=null==b?void 0:b[c];if(K(e)||N(e))return!1;var f=[String(e)],g=d7[d.operator];return!!g&&g(d.values,f)})}var ea=bk("[Error tracking]");class eb{constructor(a){var b,c;this.Zt=[],this.ti=new aY([new a7,new bh,new a9,new a8,new bf,new be,new bb,new bg],function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return function(b,d){void 0===d&&(d=0);for(var e=[],f=b.split("\n"),g=d;g<f.length;g++){var h=f[g];if(!(h.length>1024)){var i=a6.test(h)?h.replace(a6,"$1"):h;if(!i.match(/\S*Error: /)){for(var j of c){var k=j(i,a);if(k){e.push(k);break}}if(e.length>=50)break}}}if(!e.length)return[];var l=Array.from(e);return l.reverse(),l.slice(0,50).map(a=>u({},a,{filename:a.filename||(l[l.length-1]||{}).filename,function:a.function||"?"}))}}("web:javascript",a2,a5)),this._instance=a,this.Zt=null!=(b=null==(c=this._instance.persistence)?void 0:c.get_property(bF))?b:[]}onRemoteConfig(a){var b,c,d,e=null!=(b=null==(c=a.errorTracking)?void 0:c.suppressionRules)?b:[],f=null==(d=a.errorTracking)?void 0:d.captureExtensionExceptions;this.Zt=e,this._instance.persistence&&this._instance.persistence.register({[bF]:this.Zt,[bG]:f})}get ii(){var a,b=!!this._instance.get_property(bG),c=this._instance.config.error_tracking.captureExtensionExceptions;return null!=(a=null!=c?c:b)&&a}buildProperties(a,b){return this.ti.buildFromUnknown(a,{syntheticException:null==b?void 0:b.syntheticException,mechanism:{handled:null==b?void 0:b.handled}})}sendExceptionEvent(a){var b=a.$exception_list;if(this.ei(b)){if(this.ri(b))return void ea.info("Skipping exception capture because a suppression rule matched");if(!this.ii&&this.si(b))return void ea.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ni(b))return void ea.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",a,{_noTruncate:!0,_batchKey:"exceptionEvent"})}ri(a){if(0===a.length)return!1;var b=a.reduce((a,b)=>{var{type:c,value:d}=b;return L(c)&&c.length>0&&a.$exception_types.push(c),L(d)&&d.length>0&&a.$exception_values.push(d),a},{$exception_types:[],$exception_values:[]});return this.Zt.some(a=>{var c=a.values.map(a=>{var c,d=d7[a.operator],e=G(a.value)?a.value:[a.value],f=null!=(c=b[a.key])?c:[];return e.length>0&&d(e,f)});return"OR"===a.type?c.some(Boolean):c.every(Boolean)})}si(a){return a.flatMap(a=>{var b,c;return null!=(b=null==(c=a.stacktrace)?void 0:c.frames)?b:[]}).some(a=>a.filename&&a.filename.startsWith("chrome-extension://"))}ni(a){if(a.length>0){var b,c,d,e,f=null!=(b=null==(c=a[0].stacktrace)?void 0:c.frames)?b:[],g=f[f.length-1];return null!=(d=null==g||null==(e=g.filename)?void 0:e.includes("posthog.com/static"))&&d}return!1}ei(a){return!O(a)&&G(a)}}var ec=bk("[FeatureFlags]"),ed=bk("[FeatureFlags]",{debugEnabled:!0}),ee="$active_feature_flags",ef="$override_feature_flags",eg="$feature_flag_payloads",eh="$override_feature_flag_payloads",ei="$feature_flag_request_id",ej="$feature_flag_evaluated_at",ek=a=>{var b={};for(var[c,d]of bs(a||{}))d&&(b[c]=d);return b},el=((fn={}).FeatureFlags="feature_flags",fn.Recordings="recordings",fn);class em{constructor(a){this.oi=!1,this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this.ci=!1,this._instance=a,this.featureFlagEventHandlers=[]}fi(){var a,b=null!=(a=this._instance.config.evaluation_contexts)?a:this._instance.config.evaluation_environments;return!this._instance.config.evaluation_environments||this._instance.config.evaluation_contexts||this.ci||(ec.warn("evaluation_environments is deprecated. Use evaluation_contexts instead. evaluation_environments will be removed in a future version."),this.ci=!0),null!=b&&b.length?b.filter(a=>{var b=a&&"string"==typeof a&&a.trim().length>0;return b||ec.error("Invalid evaluation context found:",a,"Expected non-empty string"),b}):[]}pi(){return this.fi().length>0}flags(){if(this._instance.config.__preview_remote_config)this.di=!0;else{var a=!this.gi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.mi({disableFlags:a})}}get hasLoadedFlags(){return this.ai}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var a=this._instance.get_property(bQ),b=this._instance.get_property(ef),c=this._instance.get_property(eh);if(!c&&!b)return a||{};var d=bq({},a||{});for(var e of[...new Set([...Object.keys(c||{}),...Object.keys(b||{})])]){var f,g,h=d[e],i=null==b?void 0:b[e],j=K(i)?null!=(f=null==h?void 0:h.enabled)&&f:!!i,k=K(i)?h.variant:"string"==typeof i?i:void 0,l=null==c?void 0:c[e],m=u({},h,{enabled:j,variant:j?null!=k?k:null==h?void 0:h.variant:void 0});j!==(null==h?void 0:h.enabled)&&(m.original_enabled=null==h?void 0:h.enabled),k!==(null==h?void 0:h.variant)&&(m.original_variant=null==h?void 0:h.variant),l&&(m.metadata=u({},null==h?void 0:h.metadata,{payload:l,original_payload:null==h||null==(g=h.metadata)?void 0:g.payload})),d[e]=m}return this.oi||(ec.warn(" Overriding feature flag details!",{flagDetails:a,overriddenPayloads:c,finalDetails:d}),this.oi=!0),d}getFlagVariants(){var a=this._instance.get_property(bO),b=this._instance.get_property(ef);if(!b)return a||{};for(var c=bq({},a),d=Object.keys(b),e=0;e<d.length;e++)c[d[e]]=b[d[e]];return this.oi||(ec.warn(" Overriding feature flags!",{enabledFlags:a,overriddenFlags:b,finalFlags:c}),this.oi=!0),c}getFlagPayloads(){var a=this._instance.get_property(eg),b=this._instance.get_property(eh);if(!b)return a||{};for(var c=bq({},a||{}),d=Object.keys(b),e=0;e<d.length;e++)c[d[e]]=b[d[e]];return this.oi||(ec.warn(" Overriding feature flag payloads!",{flagPayloads:a,overriddenPayloads:b,finalPayloads:c}),this.oi=!0),c}reloadFeatureFlags(){this.ui||this._instance.config.advanced_disable_feature_flags||this.gi||(this.gi=setTimeout(()=>{this.mi()},5))}yi(){clearTimeout(this.gi),this.gi=void 0}ensureFlagsLoaded(){this.ai||this.li||this.gi||this.reloadFeatureFlags()}setAnonymousDistinctId(a){this.$anon_distinct_id=a}setReloadingPaused(a){this.ui=a}mi(a){var b;if(this.yi(),!this._instance.O())if(this.li)this.hi=!0;else{var c=this._instance.config.token,d=this._instance.get_property("$device_id"),e={token:c,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:u({},(null==(b=this._instance.persistence)?void 0:b.get_initial_props())||{},this._instance.get_property(bR)||{}),group_properties:this._instance.get_property(bS)};N(d)||K(d)||(e.$device_id=d),(null!=a&&a.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(e.disable_flags=!0),this.pi()&&(e.evaluation_contexts=this.fi());var f=this._instance.config.__preview_remote_config,g=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",h=this._instance.requestRouter.endpointFor("flags",(f?"/flags/?v=2":"/flags/?v=2&config=true")+g);f&&(e.timezone=dl()),this.li=!0,this._instance._send_request({method:"POST",url:h,data:e,compression:this._instance.config.disable_compression?void 0:dt.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:a=>{var b,c,d,f=!0;200===a.statusCode&&(this.hi||(this.$anon_distinct_id=void 0),f=!1),this.li=!1,this.di||(this.di=!0,this._instance.bi(null!=(d=a.json)?d:{})),(!e.disable_flags||this.hi)&&((this.vi=!f,a.json&&null!=(c=a.json.quotaLimited)&&c.includes(el.FeatureFlags))?ec.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(e.disable_flags||this.receivedFeatureFlags(null!=(b=a.json)?b:{},f),this.hi&&(this.hi=!1,this.mi())))}})}}getFeatureFlag(a,b){var c;if(void 0===b&&(b={}),this.ai||this.getFlags()&&this.getFlags().length>0){var d=this.getFeatureFlagResult(a,b);return null!=(c=null==d?void 0:d.variant)?c:null==d?void 0:d.enabled}ec.warn('getFeatureFlag for key "'+a+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(a){return this.getFlagsWithDetails()[a]}getFeatureFlagPayload(a){var b=this.getFeatureFlagResult(a,{send_event:!1});return null==b?void 0:b.payload}getFeatureFlagResult(a,b){if(void 0===b&&(b={}),this.ai||this.getFlags()&&this.getFlags().length>0){var c=this.getFlagVariants(),d=a in c,e=c[a],f=this.getFlagPayloads()[a],g=String(e),h=this._instance.get_property(ei)||void 0,i=this._instance.get_property(ej)||void 0,j=this._instance.get_property(bU)||{};if((b.send_event||!("send_event"in b))&&(!(a in j)||!j[a].includes(g))){G(j[a])?j[a].push(g):j[a]=[g],null==(m=this._instance.persistence)||m.register({[bU]:j});var k=this.getFeatureFlagDetails(a),l={$feature_flag:a,$feature_flag_response:e,$feature_flag_payload:f||null,$feature_flag_request_id:h,$feature_flag_evaluated_at:i,$feature_flag_bootstrapped_response:(null==(n=this._instance.config.bootstrap)||null==(n=n.featureFlags)?void 0:n[a])||null,$feature_flag_bootstrapped_payload:(null==(o=this._instance.config.bootstrap)||null==(o=o.featureFlagPayloads)?void 0:o[a])||null,$used_bootstrap_value:!this.vi};K(null==k||null==(p=k.metadata)?void 0:p.version)||(l.$feature_flag_version=k.metadata.version);var m,n,o,p,q,r,s,t,u,v,w=null!=(q=null==k||null==(r=k.reason)?void 0:r.description)?q:null==k||null==(s=k.reason)?void 0:s.code;w&&(l.$feature_flag_reason=w),null!=k&&null!=(t=k.metadata)&&t.id&&(l.$feature_flag_id=k.metadata.id),K(null==k?void 0:k.original_variant)&&K(null==k?void 0:k.original_enabled)||(l.$feature_flag_original_response=K(k.original_variant)?k.original_enabled:k.original_variant),null!=k&&null!=(u=k.metadata)&&u.original_payload&&(l.$feature_flag_original_payload=null==k||null==(v=k.metadata)?void 0:v.original_payload),this._instance.capture("$feature_flag_called",l)}if(d){var x=f;if(!K(f))try{x=JSON.parse(f)}catch(a){}return{key:a,enabled:!!e,variant:"string"==typeof e?e:void 0,payload:x}}}else ec.warn('getFeatureFlagResult for key "'+a+"\" failed. Feature flags didn't load in time.")}getRemoteConfigPayload(a,b){var c=this._instance.config.token,d={distinct_id:this._instance.get_distinct_id(),token:c};this.pi()&&(d.evaluation_contexts=this.fi()),this._instance._send_request({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:d,compression:this._instance.config.disable_compression?void 0:dt.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:c=>{var d,e=null==(d=c.json)?void 0:d.featureFlagPayloads;b((null==e?void 0:e[a])||void 0)}})}isFeatureEnabled(a,b){if(void 0===b&&(b={}),this.ai||this.getFlags()&&this.getFlags().length>0){var c=this.getFeatureFlag(a,b);return K(c)?void 0:!!c}ec.warn('isFeatureEnabled for key "'+a+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(a){this.featureFlagEventHandlers.push(a)}removeFeatureFlagsHandler(a){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(b=>b!==a)}receivedFeatureFlags(a,b){if(this._instance.persistence){this.ai=!0;var c=this.getFlagVariants(),d=this.getFlagPayloads(),e=this.getFlagsWithDetails();!function(a,b,c,d,e){void 0===c&&(c={}),void 0===d&&(d={}),void 0===e&&(e={});var f,g=((f=a.flags)?(a.featureFlags=Object.fromEntries(Object.keys(f).map(a=>{var b;return[a,null!=(b=f[a].variant)?b:f[a].enabled]})),a.featureFlagPayloads=Object.fromEntries(Object.keys(f).filter(a=>f[a].enabled).filter(a=>{var b;return null==(b=f[a].metadata)?void 0:b.payload}).map(a=>{var b;return[a,null==(b=f[a].metadata)?void 0:b.payload]}))):ec.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),a),h=g.flags,i=g.featureFlags,j=g.featureFlagPayloads;if(i){var k=a.requestId,l=a.evaluatedAt;if(G(i)){ec.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var m={};if(i)for(var n=0;n<i.length;n++)m[i[n]]=!0;b&&b.register({[ee]:i,[bO]:m})}else{var o=i,p=j,q=h;a.errorsWhileComputingFlags&&(o=u({},c,o),p=u({},d,p),q=u({},e,q)),b&&b.register(u({[ee]:Object.keys(ek(o)),[bO]:o||{},[eg]:p||{},[bQ]:q||{}},k?{[ei]:k}:{},l?{[ej]:l}:{}))}}}(a,this._instance.persistence,c,d,e),this.wi(b)}}override(a,b){void 0===b&&(b=!1),ec.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:a,suppressWarning:b})}overrideFeatureFlags(a){if(!this._instance.__loaded||!this._instance.persistence)return ec.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===a)return this._instance.persistence.unregister(ef),this._instance.persistence.unregister(eh),this.wi(),ed.info("All overrides cleared");if(a&&"object"==typeof a&&("flags"in a||"payloads"in a)){var b;if(this.oi=!!(null!=(b=a.suppressWarning)&&b),"flags"in a){if(!1===a.flags)this._instance.persistence.unregister(ef),ed.info("Flag overrides cleared");else if(a.flags){if(G(a.flags)){for(var c={},d=0;d<a.flags.length;d++)c[a.flags[d]]=!0;this._instance.persistence.register({[ef]:c})}else this._instance.persistence.register({[ef]:a.flags});ed.info("Flag overrides set",{flags:a.flags})}}return"payloads"in a&&(!1===a.payloads?(this._instance.persistence.unregister(eh),ed.info("Payload overrides cleared")):a.payloads&&(this._instance.persistence.register({[eh]:a.payloads}),ed.info("Payload overrides set",{payloads:a.payloads}))),void this.wi()}this.wi()}onFeatureFlags(a){if(this.addFeatureFlagsHandler(a),this.ai){var{flags:b,flagVariants:c}=this.xi();a(b,c)}return()=>this.removeFeatureFlagsHandler(a)}updateEarlyAccessFeatureEnrollment(a,b,c){var d,e=(this._instance.get_property(bP)||[]).find(b=>b.flagKey===a),f={["$feature_enrollment/"+a]:b},g={$feature_flag:a,$feature_enrollment:b,$set:f};e&&(g.$early_access_feature_name=e.name),c&&(g.$feature_enrollment_stage=c),this._instance.capture("$feature_enrollment_update",g),this.setPersonPropertiesForFlags(f,!1);var h=u({},this.getFlagVariants(),{[a]:b});null==(d=this._instance.persistence)||d.register({[ee]:Object.keys(ek(h)),[bO]:h}),this.wi()}getEarlyAccessFeatures(a,b,c){void 0===b&&(b=!1);var d=this._instance.get_property(bP),e=c?"&"+c.map(a=>"stage="+a).join("&"):"";if(d&&!b)return a(d);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+e),method:"GET",callback:b=>{var c,d;if(b.json){var e=b.json.earlyAccessFeatures;return null==(c=this._instance.persistence)||c.unregister(bP),null==(d=this._instance.persistence)||d.register({[bP]:e}),a(e)}}})}xi(){var a=this.getFlags(),b=this.getFlagVariants();return{flags:a.filter(a=>b[a]),flagVariants:Object.keys(b).filter(a=>b[a]).reduce((a,c)=>(a[c]=b[c],a),{})}}wi(a){var{flags:b,flagVariants:c}=this.xi();this.featureFlagEventHandlers.forEach(d=>d(b,c,{errorsLoading:a}))}setPersonPropertiesForFlags(a,b){void 0===b&&(b=!0);var c=this._instance.get_property(bR)||{};this._instance.register({[bR]:u({},c,a)}),b&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(bR)}setGroupPropertiesForFlags(a,b){void 0===b&&(b=!0);var c=this._instance.get_property(bS)||{};0!==Object.keys(c).length&&Object.keys(c).forEach(b=>{c[b]=u({},c[b],a[b]),delete a[b]}),this._instance.register({[bS]:u({},c,a)}),b&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(a){if(a){var b=this._instance.get_property(bS)||{};this._instance.register({[bS]:u({},b,{[a]:{}})})}else this._instance.unregister(bS)}reset(){this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this.$anon_distinct_id=void 0,this.yi(),this.oi=!1}}var en=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class eo{constructor(a,b){this.R=a,this.props={},this.Ei=!1,this.$i=(a=>{var b="";return a.token&&(b=a.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),a.persistence_name?"ph_"+a.persistence_name:"ph_"+b+"_posthog"})(a),this.Y=this.Si(a),this.load(),a.debug&&bj.info("Persistence loaded",a.persistence,u({},this.props)),this.update_config(a,a,b),this.save()}isDisabled(){return!!this.ki}Si(a){-1===en.indexOf(a.persistence.toLowerCase())&&(bj.critical("Unknown persistence type "+a.persistence+"; falling back to localStorage+cookie"),a.persistence="localStorage+cookie");var b,c,d=(void 0===(b=a.cookie_persisted_properties||[])&&(b=[]),c=[...cN,...b],u({},cM,{W:function(a){try{var b={};try{b=cK.W(a)||{}}catch(a){}var c=bq(b,JSON.parse(cM.q(a)||"{}"));return cM.G(a,c),c}catch(a){}return null},G:function(a,b,d,e,f,g){try{cM.G(a,b,void 0,void 0,g);var h={};c.forEach(a=>{b[a]&&(h[a]=b[a])}),Object.keys(h).length&&cK.G(a,h,d,e,f,g)}catch(a){cM.B(a)}},V:function(a,b){try{null==e||e.localStorage.removeItem(a),cK.V(a,b)}catch(a){cM.B(a)}}})),f=a.persistence.toLowerCase();return"localstorage"===f&&cM.H()?cM:"localstorage+cookie"===f&&d.H()?d:"sessionstorage"===f&&cR.H()?cR:"memory"===f?cP:"cookie"===f?cK:d.H()?d:cK}properties(){var a={};return bp(this.props,function(b,c){if(c===bO&&I(b))for(var d,e=Object.keys(b),f=0;f<e.length;f++)a["$feature/"+e[f]]=b[e[f]];else d=!1,(N(b2)?d:i&&b2.indexOf===i?-1!=b2.indexOf(c):(bp(b2,function(a){if(d||(d=a===c))return bn}),d))||(a[c]=b)}),a}load(){if(!this.ki){var a=this.Y.W(this.$i);a&&(this.props=bq({},a))}}save(){this.ki||this.Y.G(this.$i,this.props,this.Pi,this.Ti,this.Ii,this.R.debug)}remove(){this.Y.V(this.$i,!1),this.Y.V(this.$i,!0)}clear(){this.remove(),this.props={}}register_once(a,b,c){if(I(a)){K(b)&&(b="None"),this.Pi=K(c)?this.Ci:c;var d=!1;if(bp(a,(a,c)=>{this.props.hasOwnProperty(c)&&this.props[c]!==b||(this.props[c]=a,d=!0)}),d)return this.save(),!0}return!1}register(a,b){if(I(a)){this.Pi=K(b)?this.Ci:b;var c=!1;if(bp(a,(b,d)=>{a.hasOwnProperty(d)&&this.props[d]!==b&&(this.props[d]=b,c=!0)}),c)return this.save(),!0}return!1}unregister(a){a in this.props&&(delete this.props[a],this.save())}update_campaign_params(){if(!this.Ei){var a=de(this.R.custom_campaign_params,this.R.mask_personal_data_properties,this.R.custom_personal_data_properties);J(bv(a))||this.register(a),this.Ei=!0}}update_search_keyword(){var a;this.register((a=null==k?void 0:k.referrer)?dg(a):{})}update_referrer_info(){var a;this.register_once({$referrer:di(),$referring_domain:null!=k&&k.referrer&&(null==(a=cr(k.referrer))?void 0:a.host)||"$direct"},void 0)}set_initial_person_info(){this.props[bY]||this.props[bZ]||this.register_once({[b$]:dj(this.R.mask_personal_data_properties,this.R.custom_personal_data_properties)},void 0)}get_initial_props(){var a={};bp([bZ,bY],b=>{var c=this.props[b];c&&bp(c,function(b,c){a["$initial_"+B(c)]=b})});var b,c,d=this.props[b$];return d&&bq(a,(b=dk(d),c={},bp(b,function(a,b){c["$initial_"+B(b)]=a}),c)),a}safe_merge(a){return bp(this.props,function(b,c){c in a||(a[c]=b)}),a}update_config(a,b,c){if(this.Ci=this.Pi=a.cookie_expiration,this.set_disabled(a.disable_persistence||!!c),this.set_cross_subdomain(a.cross_subdomain_cookie),this.set_secure(a.secure_cookie),a.persistence!==b.persistence||!((a,b)=>{if(a.length!==b.length)return!1;var c=[...a].sort(),d=[...b].sort();return c.every((a,b)=>a===d[b])})(a.cookie_persisted_properties||[],b.cookie_persisted_properties||[])){var d=this.Si(a),e=this.props;this.clear(),this.Y=d,this.props=e,this.save()}}set_disabled(a){this.ki=a,this.ki?this.remove():this.save()}set_cross_subdomain(a){a!==this.Ti&&(this.Ti=a,this.remove(),this.save())}set_secure(a){a!==this.Ii&&(this.Ii=a,this.remove(),this.save())}set_event_timer(a,b){var c=this.props[bB]||{};c[a]=b,this.props[bB]=c,this.save()}remove_event_timer(a){var b=(this.props[bB]||{})[a];return K(b)||(delete this.props[bB][a],this.save()),b}get_property(a){return this.props[a]}set_property(a,b){this.props[a]=b,this.save()}}var ep=bk("[Product Tours]"),eq="ph_product_tours";class er{constructor(a){this.Ri=null,this.Fi=null,this._instance=a}onRemoteConfig(a){this._instance.persistence&&this._instance.persistence.register({[bJ]:!(null==a||!a.productTours)}),this.loadIfEnabled()}loadIfEnabled(){var a,b;this.Ri||(a=this._instance).config.disable_product_tours||null==(b=a.persistence)||!b.get_property(bJ)||this.it(()=>this.Mi())}it(a){var b,c;null!=(b=q.__PosthogExtensions__)&&b.generateProductTours?a():null==(c=q.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"product-tours",b=>{b?ep.error("Could not load product tours script",b):a()})}Mi(){var a;!this.Ri&&null!=(a=q.__PosthogExtensions__)&&a.generateProductTours&&(this.Ri=q.__PosthogExtensions__.generateProductTours(this._instance,!0))}getProductTours(a,b){if(void 0===b&&(b=!1),!G(this.Fi)||b){var c=this._instance.persistence;if(c){var d=c.props[eq];if(G(d)&&!b)return this.Fi=d,void a(d,{isLoaded:!0})}this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/product_tours/?token="+this._instance.config.token),method:"GET",callback:b=>{var d=b.statusCode;if(200!==d||!b.json){var e="Product Tours API could not be loaded, status: "+d;return ep.error(e),void a([],{isLoaded:!1,error:e})}var f=G(b.json.product_tours)?b.json.product_tours:[];this.Fi=f,c&&c.register({[eq]:f}),a(f,{isLoaded:!0})}})}else a(this.Fi,{isLoaded:!0})}getActiveProductTours(a){O(this.Ri)?a([],{isLoaded:!1,error:"Product tours not loaded"}):this.Ri.getActiveProductTours(a)}showProductTour(a){var b;null==(b=this.Ri)||b.showTourById(a)}previewTour(a){this.Ri?this.Ri.previewTour(a):this.it(()=>{var b;this.Mi(),null==(b=this.Ri)||b.previewTour(a)})}dismissProductTour(){var a;null==(a=this.Ri)||a.dismissTour("user_clicked_skip")}nextStep(){var a;null==(a=this.Ri)||a.nextStep()}previousStep(){var a;null==(a=this.Ri)||a.previousStep()}clearCache(){var a;this.Fi=null,null==(a=this._instance.persistence)||a.unregister(eq)}resetTour(a){var b;null==(b=this.Ri)||b.resetTour(a)}resetAllTours(){var a;null==(a=this.Ri)||a.resetAllTours()}cancelPendingTour(a){var b;null==(b=this.Ri)||b.cancelPendingTour(a)}}var es=((fo={}).Activation="events",fo.Cancellation="cancelEvents",fo),et=((fp={}).Button="button",fp.Tab="tab",fp.Selector="selector",(fq={}).TopLeft="top_left",fq.TopRight="top_right",fq.TopCenter="top_center",fq.MiddleLeft="middle_left",fq.MiddleRight="middle_right",fq.MiddleCenter="middle_center",fq.Left="left",fq.Center="center",fq.Right="right",fq.NextToTrigger="next_to_trigger",(fr={}).Top="top",fr.Left="left",fr.Right="right",fr.Bottom="bottom",(fs={}).Popover="popover",fs.API="api",fs.Widget="widget",fs.ExternalSurvey="external_survey",fs),eu=((ft={}).Open="open",ft.MultipleChoice="multiple_choice",ft.SingleChoice="single_choice",ft.Rating="rating",ft.Link="link",(fu={}).NextQuestion="next_question",fu.End="end",fu.ResponseBased="response_based",fu.SpecificQuestion="specific_question",(fv={}).Once="once",fv.Recurring="recurring",fv.Always="always",(fw={}).SHOWN="survey shown",fw.DISMISSED="survey dismissed",fw.SENT="survey sent",fw.ABANDONED="survey abandoned",fw),ev=((fx={}).SURVEY_ID="$survey_id",fx.SURVEY_NAME="$survey_name",fx.SURVEY_RESPONSE="$survey_response",fx.SURVEY_ITERATION="$survey_iteration",fx.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",fx.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",fx.SURVEY_SUBMISSION_ID="$survey_submission_id",fx.SURVEY_QUESTIONS="$survey_questions",fx.SURVEY_COMPLETED="$survey_completed",fx.PRODUCT_TOUR_ID="$product_tour_id",fx.SURVEY_LAST_SEEN_DATE="$survey_last_seen_date",fx),ew=((fy={}).Popover="popover",fy.Inline="inline",fy),ex=bk("[Surveys]"),ey="seenSurvey_",ez=a=>{var b;return b=""+ey+a.id,a.current_iteration&&a.current_iteration>0&&(b=""+ey+a.id+"_"+a.current_iteration),b},eA=[et.Popover,et.Widget,et.API],eB={ignoreConditions:!1,ignoreDelay:!1,displayType:ew.Popover};class eC{constructor(){this.Oi={},this.Oi={}}on(a,b){return this.Oi[a]||(this.Oi[a]=[]),this.Oi[a].push(b),()=>{this.Oi[a]=this.Oi[a].filter(a=>a!==b)}}emit(a,b){for(var c of this.Oi[a]||[])c(b);for(var d of this.Oi["*"]||[])d(a,b)}}function eD(a,b,c){if(O(a))return!1;switch(c){case"exact":return a===b;case"contains":return RegExp(b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/_/g,".").replace(/%/g,".*"),"i").test(a);case"regex":try{return new RegExp(b).test(a)}catch(a){return!1}default:return!1}}class eE{constructor(a){this.Ai=new eC,this.Di=(a,b)=>this.ji(a,b)&&this.Li(a,b)&&this.Ni(a,b)&&this.Ui(a,b),this.ji=(a,b)=>null==b||!b.event||(null==a?void 0:a.event)===(null==b?void 0:b.event),this._instance=a,this.zi=new Set,this.Hi=new Set}init(){var a,b;K(null==(a=this._instance)?void 0:a._addCaptureHook)||null==(b=this._instance)||b._addCaptureHook((a,b)=>{this.on(a,b)})}register(a){var b,c;if(!K(null==(b=this._instance)?void 0:b._addCaptureHook)&&(a.forEach(a=>{var b,c;null==(b=this.Hi)||b.add(a),null==(c=a.steps)||c.forEach(a=>{var b;null==(b=this.zi)||b.add((null==a?void 0:a.event)||"")})}),null!=(c=this._instance)&&c.autocapture)){var d,e=new Set;a.forEach(a=>{var b;null==(b=a.steps)||b.forEach(a=>{null!=a&&a.selector&&e.add(null==a?void 0:a.selector)})}),null==(d=this._instance)||d.autocapture.setElementSelectors(e)}}on(a,b){var c;null!=b&&0!=a.length&&(this.zi.has(a)||this.zi.has(null==b?void 0:b.event))&&this.Hi&&(null==(c=this.Hi)?void 0:c.size)>0&&this.Hi.forEach(a=>{this.Bi(b,a)&&this.Ai.emit("actionCaptured",a.name)})}qi(a){this.onAction("actionCaptured",b=>a(b))}Bi(a,b){if(null==(null==b?void 0:b.steps))return!1;for(var c of b.steps)if(this.Di(a,c))return!0;return!1}onAction(a,b){return this.Ai.on(a,b)}Li(a,b){if(null!=b&&b.url){var c,d=null==a||null==(c=a.properties)?void 0:c.$current_url;if(!d||"string"!=typeof d||!eD(d,b.url,b.url_matching||"contains"))return!1}return!0}Ni(a,b){return!!this.Wi(a,b)&&!!this.Gi(a,b)&&!!this.Vi(a,b)}Wi(a,b){if(null==b||!b.href)return!0;var c=this.Ji(a);if(c.length>0)return c.some(a=>eD(a.href,b.href,b.href_matching||"exact"));var d,e,f=(null==a||null==(d=a.properties)?void 0:d.$elements_chain)||"";return!!f&&eD((e=f.match(/(?::|")href="(.*?)"/))?e[1]:"",b.href,b.href_matching||"exact")}Gi(a,b){if(null==b||!b.text)return!0;var c=this.Ji(a);if(c.length>0)return c.some(a=>eD(a.text,b.text,b.text_matching||"exact")||eD(a.$el_text,b.text,b.text_matching||"exact"));var d,e,f,g,h=(null==a||null==(d=a.properties)?void 0:d.$elements_chain)||"";return!!h&&(e=function(a){for(var b,c=[],d=/(?::|")text="(.*?)"/g;!O(b=d.exec(a));)c.includes(b[1])||c.push(b[1]);return c}(h),f=b.text,g=b.text_matching||"exact",e.some(a=>eD(a,f,g)))}Vi(a,b){if(null==b||!b.selector)return!0;var c,d,e=null==a||null==(c=a.properties)?void 0:c.$element_selectors;if(null!=e&&e.includes(b.selector))return!0;var f=(null==a||null==(d=a.properties)?void 0:d.$elements_chain)||"";if(b.selector_regex&&f)try{return new RegExp(b.selector_regex).test(f)}catch(a){}return!1}Ji(a){var b;return null==(null==a||null==(b=a.properties)?void 0:b.$elements)?[]:null==a?void 0:a.properties.$elements}Ui(a,b){return null==b||!b.properties||0===b.properties.length||d9(b.properties.reduce((a,b)=>{var c=G(b.value)?b.value.map(String):null!=b.value?[String(b.value)]:[];return a[b.key]={values:c,operator:b.operator||"exact"},a},{}),null==a?void 0:a.properties)}}class eF{constructor(a){this._instance=a,this.Ki=new Map,this.Yi=new Map,this.Xi=new Map}Qi(a,b){return!!a&&d9(a.propertyFilters,null==b?void 0:b.properties)}Zi(a,b){var c=new Map;return a.forEach(a=>{var d;null==(d=a.conditions)||null==(d=d[b])||null==(d=d.values)||d.forEach(b=>{if(null!=b&&b.name){var d=c.get(b.name)||[];d.push(a.id),c.set(b.name,d)}})}),c}te(a,b,c){var d=(c===es.Activation?this.Ki:this.Yi).get(a),e=[];return this.ie(a=>{e=a.filter(a=>null==d?void 0:d.includes(a.id))}),e.filter(d=>{var e,f=null==(e=d.conditions)||null==(e=e[c])||null==(e=e.values)?void 0:e.find(b=>b.name===a);return this.Qi(f,b)})}register(a){var b;K(null==(b=this._instance)?void 0:b._addCaptureHook)||(this.ee(a),this.re(a))}re(a){var b=a.filter(a=>{var b,c;return(null==(b=a.conditions)?void 0:b.actions)&&(null==(c=a.conditions)||null==(c=c.actions)||null==(c=c.values)?void 0:c.length)>0});0!==b.length&&(null==this.se&&(this.se=new eE(this._instance),this.se.init(),this.se.qi(a=>{this.onAction(a)})),b.forEach(a=>{var b,c,d,e,f;a.conditions&&null!=(b=a.conditions)&&b.actions&&null!=(c=a.conditions)&&null!=(c=c.actions)&&c.values&&(null==(d=a.conditions)||null==(d=d.actions)||null==(d=d.values)?void 0:d.length)>0&&(null==(e=this.se)||e.register(a.conditions.actions.values),null==(f=a.conditions)||null==(f=f.actions)||null==(f=f.values)||f.forEach(b=>{if(b&&b.name){var c=this.Xi.get(b.name);c&&c.push(a.id),this.Xi.set(b.name,c||[a.id])}}))}))}ee(a){var b,c=a.filter(a=>{var b,c;return(null==(b=a.conditions)?void 0:b.events)&&(null==(c=a.conditions)||null==(c=c.events)||null==(c=c.values)?void 0:c.length)>0}),d=a.filter(a=>{var b,c;return(null==(b=a.conditions)?void 0:b.cancelEvents)&&(null==(c=a.conditions)||null==(c=c.cancelEvents)||null==(c=c.values)?void 0:c.length)>0});(0!==c.length||0!==d.length)&&(null==(b=this._instance)||b._addCaptureHook((a,b)=>{this.onEvent(a,b)}),this.Ki=this.Zi(a,es.Activation),this.Yi=this.Zi(a,es.Cancellation))}onEvent(a,b){var c,d=this.ne(),e=this.oe(),f=this.ae(),g=(null==(c=this._instance)||null==(c=c.persistence)?void 0:c.props[e])||[];if(f===a&&b&&g.length>0){d.info("event matched, removing item from activated items",{event:a,eventPayload:b,existingActivatedItems:g});var h,i,j=(null==b||null==(h=b.properties)?void 0:h.$survey_id)||(null==b||null==(i=b.properties)?void 0:i.$product_tour_id);if(j){var k=g.indexOf(j);k>=0&&(g.splice(k,1),this.le(g))}}else{if(this.Yi.has(a)){var l=this.te(a,b,es.Cancellation);l.length>0&&(d.info("cancel event matched, cancelling items",{event:a,itemsToCancel:l.map(a=>a.id)}),l.forEach(a=>{var b=g.indexOf(a.id);b>=0&&g.splice(b,1),this.ue(a.id)}),this.le(g))}if(this.Ki.has(a)){d.info("event name matched",{event:a,eventPayload:b,items:this.Ki.get(a)});var m=this.te(a,b,es.Activation);this.le(g.concat(m.map(a=>a.id)||[]))}}}onAction(a){var b,c=this.oe(),d=(null==(b=this._instance)||null==(b=b.persistence)?void 0:b.props[c])||[];this.Xi.has(a)&&this.le(d.concat(this.Xi.get(a)||[]))}le(a){var b,c=this.ne(),d=this.oe(),e=[...new Set(a)].filter(a=>!this.he(a));c.info("updating activated items",{activatedItems:e}),null==(b=this._instance)||null==(b=b.persistence)||b.register({[d]:e})}getActivatedIds(){var a,b=this.oe();return(null==(a=this._instance)||null==(a=a.persistence)?void 0:a.props[b])||[]}getEventToItemsMap(){return this.Ki}de(){return this.se}}class eG extends eF{constructor(a){super(a)}oe(){return"$surveys_activated"}ae(){return eu.SHOWN}ie(a){var b;null==(b=this._instance)||b.getSurveys(a)}ue(a){var b;null==(b=this._instance)||b.cancelPendingSurvey(a)}ne(){return ex}he(){return!1}getSurveys(){return this.getActivatedIds()}getEventToSurveys(){return this.getEventToItemsMap()}}class eH{constructor(a){this.ve=void 0,this._surveyManager=null,this.ce=!1,this.fe=[],this.pe=null,this._instance=a,this._surveyEventReceiver=null}onRemoteConfig(a){if(!this._instance.config.disable_surveys){var b=a.surveys;if(O(b))return ex.warn("Flags not loaded yet. Not loading surveys.");var c=G(b);this.ve=c?b.length>0:b,ex.info("flags response received, isSurveysEnabled: "+this.ve),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var a=[],b=0;b<localStorage.length;b++){var c=localStorage.key(b);(null!=c&&c.startsWith(ey)||null!=c&&c.startsWith("inProgressSurvey_"))&&a.push(c)}a.forEach(a=>localStorage.removeItem(a))}loadIfEnabled(){if(!this._surveyManager)if(this.ce)ex.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)ex.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())ex.info("Not loading surveys in cookieless mode without consent.");else{var a=null==q?void 0:q.__PosthogExtensions__;if(a){if(!K(this.ve)||this._instance.config.advanced_enable_surveys){var b=this.ve||this._instance.config.advanced_enable_surveys;this.ce=!0;try{var c=a.generateSurveys;if(c)return void this.ge(c,b);var d=a.loadExternalDependency;if(!d)return void this._e("PostHog loadExternalDependency extension not found.");d(this._instance,"surveys",c=>{c||!a.generateSurveys?this._e("Could not load surveys script",c):this.ge(a.generateSurveys,b)})}catch(a){throw this._e("Error initializing surveys",a),a}finally{this.ce=!1}}}else ex.error("PostHog Extensions not found.")}}ge(a,b){this._surveyManager=a(this._instance,b),this._surveyEventReceiver=new eG(this._instance),ex.info("Surveys loaded successfully"),this.me({isLoaded:!0})}_e(a,b){ex.error(a,b),this.me({isLoaded:!1,error:a})}onSurveysLoaded(a){return this.fe.push(a),this._surveyManager&&this.me({isLoaded:!0}),()=>{this.fe=this.fe.filter(b=>b!==a)}}getSurveys(a,b){if(void 0===b&&(b=!1),this._instance.config.disable_surveys)return ex.info("Disabled. Not loading surveys."),a([]);var c,d=this._instance.get_property(bT);if(d&&!b)return a(d,{isLoaded:!0});"u">typeof Promise&&this.pe?this.pe.then(b=>{var{surveys:c,context:d}=b;return a(c,d)}):("u">typeof Promise&&(this.pe=new Promise(a=>{c=a})),this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:b=>{this.pe=null;var d=b.statusCode;if(200!==d||!b.json){var e="Surveys API could not be loaded, status: "+d;ex.error(e);var f={isLoaded:!1,error:e};return a([],f),void(null==c||c({surveys:[],context:f}))}var g,h,i=b.json.surveys||[],j=i.filter(a=>{var b,c;return!(!a.start_date||a.end_date)&&(!(null==(b=a.conditions)||null==(b=b.events)||null==(b=b.values)||!b.length)||!(null==(c=a.conditions)||null==(c=c.actions)||null==(c=c.values)||!c.length))});j.length>0&&(null==(h=this._surveyEventReceiver)||h.register(j)),null==(g=this._instance.persistence)||g.register({[bT]:i});var k={isLoaded:!0};a(i,k),null==c||c({surveys:i,context:k})}}))}me(a){for(var b of this.fe)try{if(!a.isLoaded)return b([],a);this.getSurveys(b)}catch(a){ex.error("Error in survey callback",a)}}getActiveMatchingSurveys(a,b){if(void 0===b&&(b=!1),!O(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(a,b);ex.warn("init was not called")}ye(a){var b=null;return this.getSurveys(c=>{var d;b=null!=(d=c.find(b=>b.id===a))?d:null}),b}be(a){if(O(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var b="string"==typeof a?this.ye(a):a;return b?this._surveyManager.checkSurveyEligibility(b):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(a){if(O(this._surveyManager))return ex.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var b=this.be(a);return{visible:b.eligible,disabledReason:b.reason}}canRenderSurveyAsync(a,b){return O(this._surveyManager)?(ex.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(c=>{this.getSurveys(b=>{var d,e=null!=(d=b.find(b=>b.id===a))?d:null;if(e){var f=this.be(e);c({visible:f.eligible,disabledReason:f.reason})}else c({visible:!1,disabledReason:"Survey not found"})},b)})}renderSurvey(a,b,c){var d;if(O(this._surveyManager))ex.warn("init was not called");else{var e="string"==typeof a?this.ye(a):a;if(null!=e&&e.id)if(eA.includes(e.type)){var f=null==k?void 0:k.querySelector(b);if(f)return null!=(d=e.appearance)&&d.surveyPopupDelaySeconds?(ex.info("Rendering survey "+e.id+" with delay of "+e.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout(()=>{var a,b;ex.info("Rendering survey "+e.id+" with delay of "+(null==(a=e.appearance)?void 0:a.surveyPopupDelaySeconds)+" seconds"),null==(b=this._surveyManager)||b.renderSurvey(e,f,c),ex.info("Survey "+e.id+" rendered")},1e3*e.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(e,f,c);ex.warn("Survey element not found")}else ex.warn("Surveys of type "+e.type+" cannot be rendered in the app");else ex.warn("Survey not found")}}displaySurvey(a,b){var c;if(O(this._surveyManager))ex.warn("init was not called");else{var d=this.ye(a);if(d){var e=d;if(null!=(c=d.appearance)&&c.surveyPopupDelaySeconds&&b.ignoreDelay&&(e=u({},d,{appearance:u({},d.appearance,{surveyPopupDelaySeconds:0})})),b.displayType!==ew.Popover&&b.initialResponses&&ex.warn("initialResponses is only supported for popover surveys. prefill will not be applied."),!1===b.ignoreConditions){var f=this.canRenderSurvey(d);if(!f.visible)return void ex.warn("Survey is not eligible to be displayed: ",f.disabledReason)}b.displayType!==ew.Inline?this._surveyManager.handlePopoverSurvey(e,b):this.renderSurvey(e,b.selector,b.properties)}else ex.warn("Survey not found")}}cancelPendingSurvey(a){O(this._surveyManager)?ex.warn("init was not called"):this._surveyManager.cancelSurvey(a)}handlePageUnload(){var a;null==(a=this._surveyManager)||a.handlePageUnload()}}var eI=bk("[Conversations]");class eJ{constructor(a){this.we=void 0,this._conversationsManager=null,this.xe=!1,this.Ee=null,this._instance=a}onRemoteConfig(a){if(!this._instance.config.disable_conversations){var b=a.conversations;O(b)||(R(b)?this.we=b:(this.we=b.enabled,this.Ee=b),this.loadIfEnabled())}}reset(){var a;null==(a=this._conversationsManager)||a.reset(),this._conversationsManager=null,this.we=void 0,this.Ee=null}loadIfEnabled(){if(!this._conversationsManager&&!this.xe&&!(this._instance.config.disable_conversations||this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())){var a=null==q?void 0:q.__PosthogExtensions__;if(a&&!K(this.we)&&this.we)if(this.Ee&&this.Ee.token){this.xe=!0;try{var b=a.initConversations;if(b)return this.$e(b),void(this.xe=!1);var c=a.loadExternalDependency;if(!c)return void this.Se("PostHog loadExternalDependency extension not found.");c(this._instance,"conversations",b=>{b||!a.initConversations?this.Se("Could not load conversations script",b):this.$e(a.initConversations),this.xe=!1})}catch(a){this.Se("Error initializing conversations",a),this.xe=!1}}else eI.error("Conversations enabled but missing token in remote config.")}}$e(a){if(this.Ee)try{this._conversationsManager=a(this.Ee,this._instance),eI.info("Conversations loaded successfully")}catch(a){this.Se("Error completing conversations initialization",a)}else eI.error("Cannot complete initialization: remote config is null")}Se(a,b){eI.error(a,b),this._conversationsManager=null,this.xe=!1}show(){this._conversationsManager?this._conversationsManager.show():eI.warn("Conversations not loaded yet.")}hide(){this._conversationsManager&&this._conversationsManager.hide()}isAvailable(){return!0===this.we&&!N(this._conversationsManager)}isVisible(){var a,b;return null!=(a=null==(b=this._conversationsManager)?void 0:b.isVisible())&&a}sendMessage(a,b,c){var d=this;return t(function*(){return d._conversationsManager?d._conversationsManager.sendMessage(a,b,c):(eI.warn("Conversations not available yet."),null)})()}getMessages(a,b){var c=this;return t(function*(){return c._conversationsManager?c._conversationsManager.getMessages(a,b):(eI.warn("Conversations not available yet."),null)})()}markAsRead(a){var b=this;return t(function*(){return b._conversationsManager?b._conversationsManager.markAsRead(a):(eI.warn("Conversations not available yet."),null)})()}getTickets(a){var b=this;return t(function*(){return b._conversationsManager?b._conversationsManager.getTickets(a):(eI.warn("Conversations not available yet."),null)})()}getCurrentTicketId(){var a,b;return null!=(a=null==(b=this._conversationsManager)?void 0:b.getCurrentTicketId())?a:null}getWidgetSessionId(){var a,b;return null!=(a=null==(b=this._conversationsManager)?void 0:b.getWidgetSessionId())?a:null}}class eK{constructor(a){var b;this.ke=!1,this.Pe=!1,this._instance=a,this._instance&&null!=(b=this._instance.config.logs)&&b.captureConsoleLogs&&(this.ke=!0)}onRemoteConfig(a){var b,c=null==(b=a.logs)?void 0:b.captureConsoleLogs;!O(c)&&c&&(this.ke=!0,this.loadIfEnabled())}reset(){}loadIfEnabled(){if(this.ke&&!this.Pe){var a=bk("[logs]"),b=null==q?void 0:q.__PosthogExtensions__;if(b){var c=b.loadExternalDependency;c?c(this._instance,"logs",c=>{var d;c||null==(d=b.logs)||!d.initializeLogs?a.error("Could not load logs script",c):(b.logs.initializeLogs(this._instance),this.Pe=!0)}):a.error("PostHog loadExternalDependency extension not found.")}else a.error("PostHog Extensions not found.")}}}var eL=bk("[RateLimiter]");class eM{constructor(a){this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=a=>{var b=a.text;if(b&&b.length)try{(JSON.parse(b).quota_limited||[]).forEach(a=>{eL.info((a||"events")+" is quota limited."),this.serverLimits[a]=(new Date).getTime()+6e4})}catch(a){return void eL.warn('could not rate limit - continuing. Error: "'+(null==a?void 0:a.message)+'"',{text:b})}},this.instance=a,this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}get captureEventsPerSecond(){var a;return(null==(a=this.instance.config.rate_limiting)?void 0:a.events_per_second)||10}get captureEventsBurstLimit(){var a;return Math.max((null==(a=this.instance.config.rate_limiting)?void 0:a.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond)}clientRateLimitContext(a){void 0===a&&(a=!1);var b,c,d,{captureEventsBurstLimit:e,captureEventsPerSecond:f}=this,g=(new Date).getTime(),h=null!=(b=null==(c=this.instance.persistence)?void 0:c.get_property(bX))?b:{tokens:e,last:g};h.tokens+=(g-h.last)/1e3*f,h.last=g,h.tokens>e&&(h.tokens=e);var i=h.tokens<1;return i||a||(h.tokens=Math.max(0,h.tokens-1)),!i||this.lastEventRateLimited||a||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+f+" events per second and "+e+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=i,null==(d=this.instance.persistence)||d.set_property(bX,h),{isRateLimited:i,remainingTokens:h.tokens}}isServerRateLimited(a){var b=this.serverLimits[a||"events"]||!1;return!1!==b&&(new Date).getTime()<b}}var eN=bk("[RemoteConfig]");class eO{constructor(a){this._instance=a}get remoteConfig(){var a;return null==(a=q._POSTHOG_REMOTE_CONFIG)||null==(a=a[this._instance.config.token])?void 0:a.config}Te(a){var b,c;null!=(b=q.__PosthogExtensions__)&&b.loadExternalDependency?null==(c=q.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"remote-config",()=>a(this.remoteConfig)):(eN.error("PostHog Extensions not found. Cannot load remote config."),a())}Ie(a){this._instance._send_request({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:b=>{a(b.json)}})}load(){try{if(this.remoteConfig)return eN.info("Using preloaded remote config",this.remoteConfig),void this.bi(this.remoteConfig);if(this._instance.O())return void eN.warn("Remote config is disabled. Falling back to local config.");this.Te(a=>{a?this.bi(a):(eN.info("No config found after loading remote JS config. Falling back to JSON."),this.Ie(a=>{this.bi(a)}))})}catch(a){eN.error("Error loading remote config",a)}}bi(a){a?this._instance.config.__preview_remote_config?(this._instance.bi(a),!1!==a.hasFeatureFlags&&this._instance.featureFlags.ensureFlagsLoaded()):eN.info("__preview_remote_config is disabled. Logging config instead",a):eN.error("Failed to fetch remote config from PostHog.")}}class eP{constructor(a,b){this.Ce=!0,this.Re=[],this.Fe=Y((null==b?void 0:b.flush_interval_ms)||3e3,250,5e3,bj.createLogger("flush interval"),3e3),this.Me=a}enqueue(a){this.Re.push(a),this.Oe||this.Ae()}unload(){this.De();var a=Object.values(this.Re.length>0?this.je():{});[...a.filter(a=>0===a.url.indexOf("/e")),...a.filter(a=>0!==a.url.indexOf("/e"))].map(a=>{this.Me(u({},a,{transport:"sendBeacon"}))})}enable(){this.Ce=!1,this.Ae()}Ae(){var a=this;this.Ce||(this.Oe=setTimeout(()=>{if(this.De(),this.Re.length>0){var b=this.je();for(var c in b)!function(){var d=b[c],e=(new Date).getTime();d.data&&G(d.data)&&bp(d.data,a=>{a.offset=Math.abs(a.timestamp-e),delete a.timestamp}),a.Me(d)}()}},this.Fe))}De(){clearTimeout(this.Oe),this.Oe=void 0}je(){var a={};return bp(this.Re,b=>{var c,d=(b?b.batchKey:null)||b.url;K(a[d])&&(a[d]=u({},b,{data:[]})),null==(c=a[d].data)||c.push(b.data)}),this.Re=[],a}}var eQ=["retriesPerformedSoFar"];class eR{constructor(a){this.Le=!1,this.Ne=3e3,this.Re=[],this._instance=a,this.Re=[],this.Ue=!0,!K(e)&&"onLine"in e.navigator&&(this.Ue=e.navigator.onLine,this.ze=()=>{this.Ue=!0,this.Lt()},this.He=()=>{this.Ue=!1},by(e,"online",this.ze),by(e,"offline",this.He))}get length(){return this.Re.length}retriableRequest(a){var{retriesPerformedSoFar:b}=a,c=v(a,eQ);Q(b)&&(c.url=d1(c.url,{retry_count:b})),this._instance._send_request(u({},c,{callback:a=>{200!==a.statusCode&&(a.statusCode<400||a.statusCode>=500)&&(null!=b?b:0)<10?this.Be(u({retriesPerformedSoFar:b},c)):null==c.callback||c.callback(a)}}))}Be(a){var b,c,d,e=a.retriesPerformedSoFar||0;a.retriesPerformedSoFar=e+1;var f=(d=(Math.random()-.5)*((c=Math.min(18e5,b=3e3*Math.pow(2,e)))-b/2),Math.ceil(c+d)),g=Date.now()+f;this.Re.push({retryAt:g,requestOptions:a});var h="Enqueued failed request for retry in "+f;navigator.onLine||(h+=" (Browser is offline)"),bj.warn(h),this.Le||(this.Le=!0,this.qe())}qe(){(this.We&&clearTimeout(this.We),0===this.Re.length)?(this.Le=!1,this.We=void 0):this.We=setTimeout(()=>{this.Ue&&this.Re.length>0&&this.Lt(),this.qe()},this.Ne)}Lt(){var a=Date.now(),b=[],c=this.Re.filter(c=>c.retryAt<a||(b.push(c),!1));if(this.Re=b,c.length>0)for(var{requestOptions:d}of c)this.retriableRequest(d)}unload(){for(var{requestOptions:a}of(this.We&&(clearTimeout(this.We),this.We=void 0),this.Le=!1,K(e)||(this.ze&&(e.removeEventListener("online",this.ze),this.ze=void 0),this.He&&(e.removeEventListener("offline",this.He),this.He=void 0)),this.Re))try{this._instance._send_request(u({},a,{transport:"sendBeacon"}))}catch(a){bj.error(a)}this.Re=[]}}class eS{constructor(a){this.Ge=()=>{this.Ve||(this.Ve={});var a,b,c,d,e=this.scrollElement(),f=this.scrollY(),g=e?Math.max(0,e.scrollHeight-e.clientHeight):0,h=f+((null==e?void 0:e.clientHeight)||0),i=(null==e?void 0:e.scrollHeight)||0;this.Ve.lastScrollY=Math.ceil(f),this.Ve.maxScrollY=Math.max(f,null!=(a=this.Ve.maxScrollY)?a:0),this.Ve.maxScrollHeight=Math.max(g,null!=(b=this.Ve.maxScrollHeight)?b:0),this.Ve.lastContentY=h,this.Ve.maxContentY=Math.max(h,null!=(c=this.Ve.maxContentY)?c:0),this.Ve.maxContentHeight=Math.max(i,null!=(d=this.Ve.maxContentHeight)?d:0)},this._instance=a}getContext(){return this.Ve}resetContext(){var a=this.Ve;return setTimeout(this.Ge,0),a}startMeasuringScrollPosition(){by(e,"scroll",this.Ge,{capture:!0}),by(e,"scrollend",this.Ge,{capture:!0}),by(e,"resize",this.Ge)}scrollElement(){if(!this._instance.config.scroll_root_selector)return null==e?void 0:e.document.documentElement;for(var a of G(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector]){var b=null==e?void 0:e.document.querySelector(a);if(b)return b}}scrollY(){if(this._instance.config.scroll_root_selector){var a=this.scrollElement();return a&&a.scrollTop||0}return e&&(e.scrollY||e.pageYOffset||e.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var a=this.scrollElement();return a&&a.scrollLeft||0}return e&&(e.scrollX||e.pageXOffset||e.document.documentElement.scrollLeft)||0}}var eT=a=>dj(null==a?void 0:a.config.mask_personal_data_properties,null==a?void 0:a.config.custom_personal_data_properties);class eU{constructor(a,b,c,d){this.Je=a=>{var b=this.Ke();if(!b||b.sessionId!==a){var c={sessionId:a,props:this.Ye(this._instance)};this.Xe.register({[bW]:c})}},this._instance=a,this.Qe=b,this.Xe=c,this.Ye=d||eT,this.Qe.onSessionId(this.Je)}Ke(){return this.Xe.props[bW]}getSetOnceProps(){var a,b=null==(a=this.Ke())?void 0:a.props;return b?"r"in b?dk(b):{$referring_domain:b.referringDomain,$pathname:b.initialPathName,utm_source:b.utm_source,utm_campaign:b.utm_campaign,utm_medium:b.utm_medium,utm_content:b.utm_content,utm_term:b.utm_term}:{}}getSessionProps(){var a={};return bp(bv(this.getSetOnceProps()),(b,c)=>{"$current_url"===c&&(c="url"),a["$session_entry_"+B(c)]=b}),a}}var eV=bk("[SessionId]");class eW{on(a,b){return this.Ze.on(a,b)}constructor(a,b,c){if(this.tr=[],this.ir=void 0,this.Ze=new eC,this.er=(a,b)=>!(!Q(a)||!Q(b))&&Math.abs(a-b)>this.sessionTimeoutMs,!a.persistence)throw Error("SessionIdManager requires a PostHogPersistence instance");if("always"===a.config.cookieless_mode)throw Error('SessionIdManager cannot be used with cookieless_mode="always"');this.R=a.config,this.Xe=a.persistence,this.rr=void 0,this.sr=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.nr=b||cG,this.ar=c||cG;var d,e=this.R.persistence_name||this.R.token,f=this.R.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Y(f,60,36e3,eV.createLogger("session_idle_timeout_seconds"),1800),a.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.lr(),this.ur="ph_"+e+"_window_id",this.hr="ph_"+e+"_primary_window_exists",this.dr()){var g=cR.W(this.ur),h=cR.W(this.hr);g&&!h?this.rr=g:cR.V(this.ur),cR.G(this.hr,!0)}if(null!=(d=this.R.bootstrap)&&d.sessionID)try{var i=(a=>{var b=a.replace(/-/g,"");if(32!==b.length)throw Error("Not a valid UUID");if("7"!==b[12])throw Error("Not a UUIDv7");return parseInt(b.substring(0,12),16)})(this.R.bootstrap.sessionID);this.vr(this.R.bootstrap.sessionID,(new Date).getTime(),i)}catch(a){eV.error("Invalid sessionID in bootstrap",a)}this.cr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(a){return K(this.tr)&&(this.tr=[]),this.tr.push(a),this.sr&&a(this.sr,this.rr),()=>{this.tr=this.tr.filter(b=>b!==a)}}dr(){return"memory"!==this.R.persistence&&!this.Xe.ki&&cR.H()}pr(a){a!==this.rr&&(this.rr=a,this.dr()&&cR.G(this.ur,a))}gr(){return this.rr?this.rr:this.dr()?cR.W(this.ur):null}vr(a,b,c){a===this.sr&&b===this._sessionActivityTimestamp&&c===this._sessionStartTimestamp||(this._sessionStartTimestamp=c,this._sessionActivityTimestamp=b,this.sr=a,this.Xe.register({[bM]:[b,a,c]}))}_r(){var a=this.Xe.props[bM];return G(a)&&2===a.length&&a.push(a[0]),a||[0,null,0]}resetSessionId(){this.vr(null,null,null)}destroy(){clearTimeout(this.mr),this.mr=void 0,this.ir&&e&&(e.removeEventListener("beforeunload",this.ir,{capture:!1}),this.ir=void 0),this.tr=[]}cr(){this.ir=()=>{this.dr()&&cR.V(this.hr)},by(e,"beforeunload",this.ir,{capture:!1})}checkAndGetSessionAndWindowId(a,b){if(void 0===a&&(a=!1),void 0===b&&(b=null),"always"===this.R.cookieless_mode)throw Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var c=b||(new Date).getTime(),[d,e,f]=this._r(),g=this.gr(),h=Q(f)&&Math.abs(c-f)>864e5,i=!1,j=!e,k=!j&&!a&&this.er(c,d);j||k||h?(e=this.nr(),g=this.ar(),eV.info("new session ID generated",{sessionId:e,windowId:g,changeReason:{noSessionId:j,activityTimeout:k,sessionPastMaximumLength:h}}),f=c,i=!0):g||(g=this.ar(),i=!0);var l=Q(d)&&a&&!h?d:c,m=Q(f)?f:(new Date).getTime();return this.pr(g),this.vr(e,l,m),a||this.lr(),i&&this.tr.forEach(a=>a(e,g,i?{noSessionId:j,activityTimeout:k,sessionPastMaximumLength:h}:void 0)),{sessionId:e,windowId:g,sessionStartTimestamp:m,changeReason:i?{noSessionId:j,activityTimeout:k,sessionPastMaximumLength:h}:void 0,lastActivityTimestamp:d}}lr(){clearTimeout(this.mr),this.mr=setTimeout(()=>{var[a]=this._r();if(this.er((new Date).getTime(),a)){var b=this.sr;this.resetSessionId(),this.Ze.emit("forcedIdleReset",{idleSessionId:b})}},1.1*this.sessionTimeoutMs)}}var eX=["$set_once","$set"],eY=bk("[SiteApps]");class eZ{constructor(a){this._instance=a,this.yr=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}br(a,b){if(b){var c=this.globalsForEvent(b);this.yr.push(c),this.yr.length>1e3&&(this.yr=this.yr.slice(10))}}get siteAppLoaders(){var a;return null==(a=q._POSTHOG_REMOTE_CONFIG)||null==(a=a[this._instance.config.token])?void 0:a.siteApps}init(){if(this.isEnabled){var a=this._instance._addCaptureHook(this.br.bind(this));this.wr=()=>{a(),this.yr=[],this.wr=void 0}}}globalsForEvent(a){if(!a)throw Error("Event payload is required");var b,c,d,e,f,g,h,i={},j=this._instance.get_property("$groups")||[];for(var[k,l]of Object.entries(this._instance.get_property("$stored_group_properties")||{}))i[k]={id:j[k],type:k,properties:l};var{$set_once:m,$set:n}=a;return{event:u({},v(a,eX),{properties:u({},a.properties,n?{$set:u({},null!=(b=null==(c=a.properties)?void 0:c.$set)?b:{},n)}:{},m?{$set_once:u({},null!=(d=null==(e=a.properties)?void 0:e.$set_once)?d:{},m)}:{}),elements_chain:null!=(f=null==(g=a.properties)?void 0:g.$elements_chain)?f:"",distinct_id:null==(h=a.properties)?void 0:h.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:i}}setupSiteApp(a){var b=this.apps[a.id],c=()=>{var c;!b.errored&&this.yr.length&&(eY.info("Processing "+this.yr.length+" events for site app with id "+a.id),this.yr.forEach(a=>null==b.processEvent?void 0:b.processEvent(a)),b.processedBuffer=!0),Object.values(this.apps).every(a=>a.processedBuffer||a.errored)&&(null==(c=this.wr)||c.call(this))},d=!1,e=e=>{b.errored=!e,b.loaded=!0,eY.info("Site app with id "+a.id+" "+(e?"loaded":"errored")),d&&c()};try{var{processEvent:f}=a.init({posthog:this._instance,callback:a=>{e(a)}});f&&(b.processEvent=f),d=!0}catch(b){eY.error("Error while initializing PostHog app with config id "+a.id,b),e(!1)}if(d&&b.loaded)try{c()}catch(c){eY.error("Error while processing buffered events PostHog app with config id "+a.id,c),b.errored=!0}}Er(){var a=this.siteAppLoaders||[];for(var b of a)this.apps[b.id]={id:b.id,loaded:!1,errored:!1,processedBuffer:!1};for(var c of a)this.setupSiteApp(c)}$r(a){if(0!==Object.keys(this.apps).length){var b=this.globalsForEvent(a);for(var c of Object.values(this.apps))try{null==c.processEvent||c.processEvent(b)}catch(b){eY.error("Error while processing event "+a.event+" for site app "+c.id,b)}}}onRemoteConfig(a){var b,c,d,e=this;if(null!=(b=this.siteAppLoaders)&&b.length)return this.isEnabled?(this.Er(),void this._instance.on("eventCaptured",a=>this.$r(a))):void eY.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(c=this.wr)||c.call(this),null!=(d=a.siteApps)&&d.length)if(this.isEnabled){var f=function(a){var b;q["__$$ph_site_app_"+a]=e._instance,null==(b=q.__PosthogExtensions__)||null==b.loadSiteApp||b.loadSiteApp(e._instance,h,b=>{if(b)return eY.error("Error while initializing PostHog app with config id "+a,b)})};for(var{id:g,url:h}of a.siteApps)f(g)}else eY.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var e$=function(a,b){if(!a)return!1;var c=a.userAgent;if(c&&x(c,b))return!0;try{var d=null==a?void 0:a.userAgentData;if(null!=d&&d.brands&&d.brands.some(a=>x(null==a?void 0:a.brand,b)))return!0}catch(a){}return!!a.webdriver},e_=((fz={}).US="us",fz.EU="eu",fz.CUSTOM="custom",fz),e0="i.posthog.com";class e1{constructor(a){this.Sr={},this.instance=a}get apiHost(){var a=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===a?"https://us.i.posthog.com":a}get flagsApiHost(){var a=this.instance.config.flags_api_host;return a?a.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var a,b=null==(a=this.instance.config.ui_host)?void 0:a.replace(/\/$/,"");return b||(b=this.apiHost.replace("."+e0,".posthog.com")),"https://app.posthog.com"===b?"https://us.posthog.com":b}get region(){return this.Sr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Sr[this.apiHost]=e_.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Sr[this.apiHost]=e_.EU:this.Sr[this.apiHost]=e_.CUSTOM),this.Sr[this.apiHost]}endpointFor(a,b){if(void 0===b&&(b=""),b&&(b="/"===b[0]?b:"/"+b),"ui"===a)return this.uiHost+b;if("flags"===a)return this.flagsApiHost+b;if(this.region===e_.CUSTOM)return this.apiHost+b;var c=e0+b;switch(a){case"assets":return"https://"+this.region+"-assets."+c;case"api":return"https://"+this.region+"."+c}}}var e2={icontains:(a,b)=>!!e&&b.href.toLowerCase().indexOf(a.toLowerCase())>-1,not_icontains:(a,b)=>!!e&&-1===b.href.toLowerCase().indexOf(a.toLowerCase()),regex:(a,b)=>!!e&&d5(b.href,a),not_regex:(a,b)=>!!e&&!d5(b.href,a),exact:(a,b)=>b.href===a,is_not:(a,b)=>b.href!==a};class e3{constructor(a){var b=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(a){void 0===a&&(a=!1),b.getWebExperiments(a=>{e3.kr("retrieved web experiments from the server"),b.Pr=new Map,a.forEach(a=>{if(a.feature_flag_key){b.Pr&&(e3.kr("setting flag key ",a.feature_flag_key," to web experiment ",a),null==(c=b.Pr)||c.set(a.feature_flag_key,a));var c,d=b._instance.getFeatureFlag(a.feature_flag_key);L(d)&&a.variants[d]&&b.Tr(a.name,d,a.variants[d].transforms)}else if(a.variants)for(var e in a.variants){var f=a.variants[e];e3.Ir(f)&&b.Tr(a.name,e,f.transforms)}})},a)},this._instance=a,this._instance.onFeatureFlags(a=>{this.onFeatureFlags(a)})}onFeatureFlags(a){if(this._is_bot())e3.kr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(O(this.Pr))return this.Pr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();e3.kr("applying feature flags",a),a.forEach(a=>{var b;if(this.Pr&&null!=(b=this.Pr)&&b.has(a)){var c,d=this._instance.getFeatureFlag(a),e=null==(c=this.Pr)?void 0:c.get(a);d&&null!=e&&e.variants[d]&&this.Tr(e.name,d,e.variants[d].transforms)}})}}previewWebExperiment(){var a=e3.getWindowLocation();if(null!=a&&a.search){var b=ct(null==a?void 0:a.search,"__experiment_id"),c=ct(null==a?void 0:a.search,"__experiment_variant");b&&c&&(e3.kr("previewing web experiments "+b+" && "+c),this.getWebExperiments(a=>{this.Cr(parseInt(b),c,a)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(a,b,c){if(this._instance.config.disable_web_experiments&&!c)return a([]);var d=this._instance.get_property("$web_experiments");if(d&&!b)return a(d);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:b=>200===b.statusCode&&b.json?a(b.json.experiments||[]):a([])})}Cr(a,b,c){var d=c.filter(b=>b.id===a);d&&d.length>0&&(e3.kr("Previewing web experiment ["+d[0].name+"] with variant ["+b+"]"),this.Tr(d[0].name,b,d[0].variants[b].transforms))}static Ir(a){return!O(a.conditions)&&e3.Rr(a)&&e3.Fr(a)}static Rr(a){if(O(a.conditions)||O(null==(b=a.conditions)?void 0:b.url))return!0;var b,c,d,e,f=e3.getWindowLocation();return!!f&&(null==(c=a.conditions)||!c.url||e2[null!=(d=null==(e=a.conditions)?void 0:e.urlMatchType)?d:"icontains"](a.conditions.url,f))}static getWindowLocation(){return null==e?void 0:e.location}static Fr(a){if(O(a.conditions)||O(null==(c=a.conditions)?void 0:c.utm))return!0;var b=de();if(b.utm_source){var c,d,e,f,g,h,i,j,k,l=null==(d=a.conditions)||null==(d=d.utm)||!d.utm_campaign||(null==(e=a.conditions)||null==(e=e.utm)?void 0:e.utm_campaign)==b.utm_campaign,m=null==(f=a.conditions)||null==(f=f.utm)||!f.utm_source||(null==(g=a.conditions)||null==(g=g.utm)?void 0:g.utm_source)==b.utm_source,n=null==(h=a.conditions)||null==(h=h.utm)||!h.utm_medium||(null==(i=a.conditions)||null==(i=i.utm)?void 0:i.utm_medium)==b.utm_medium,o=null==(j=a.conditions)||null==(j=j.utm)||!j.utm_term||(null==(k=a.conditions)||null==(k=k.utm)?void 0:k.utm_term)==b.utm_term;return l&&n&&o&&m}return!1}static kr(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];bj.info("[WebExperiments] "+a,c)}Tr(a,b,c){this._is_bot()?e3.kr("Refusing to render web experiment since the viewer is a likely bot"):"control"!==b?c.forEach(c=>{if(c.selector){e3.kr("applying transform of variant "+b+" for experiment "+a+" ",c);var d,e=null==(d=document)?void 0:d.querySelectorAll(c.selector);null==e||e.forEach(a=>{c.html&&(a.innerHTML=c.html),c.css&&a.setAttribute("style",c.css)})}}):e3.kr("Control variants leave the page unmodified.")}_is_bot(){return j&&this._instance?e$(j,this._instance.config.custom_blocked_useragents):void 0}}var e4=bk("[PostHog ExternalIntegrations]"),e5={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class e6{constructor(a){this._instance=a}it(a,b){var c;null==(c=q.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,a,a=>{if(a)return e4.error("failed to load script",a);b()})}startIfEnabledOrStop(){var a,b=this,c=function(a){var c,d,f;!e||null!=(c=q.__PosthogExtensions__)&&null!=(c=c.integrations)&&c[a]||b.it(e5[a],()=>{var c;null==(c=q.__PosthogExtensions__)||null==(c=c.integrations)||null==(c=c[a])||c.start(b._instance)}),!e&&null!=(d=q.__PosthogExtensions__)&&null!=(d=d.integrations)&&d[a]&&(null==(f=q.__PosthogExtensions__)||null==(f=f.integrations)||null==(f=f[a])||f.stop())};for(var[d,e]of Object.entries(null!=(a=this._instance.config.integrations)?a:{}))c(d)}}var e7="[SessionRecording]",e8=bk(e7);class e9{get started(){var a;return!(null==(a=this.Mr)||!a.isStarted)}get status(){return this.Mr?this.Mr.status:this.Or&&!this.Ar?"disabled":"lazy_loading"}constructor(a){if(this._forceAllowLocalhostNetworkCapture=!1,this.Or=!1,this.Dr=void 0,this._instance=a,!this._instance.sessionManager)throw e8.error("started without valid sessionManager"),Error(e7+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw Error(e7+' cannot be used with cookieless_mode="always"')}get Ar(){var a,b=!(null==(a=this._instance.get_property(bL))||!a.enabled),c=!this._instance.config.disable_session_recording,d=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return e&&b&&c&&!d}startIfEnabledOrStop(a){var b;if(!this.Ar||null==(b=this.Mr)||!b.isStarted){var c=!K(Object.assign)&&!K(Array.from);this.Ar&&c?(this.jr(a),e8.info("starting")):this.stopRecording()}}jr(a){var b,c,d;this.Ar&&(null!=q&&null!=(b=q.__PosthogExtensions__)&&null!=(b=b.rrweb)&&b.record&&null!=(c=q.__PosthogExtensions__)&&c.initSessionRecording?this.Lr(a):null==(d=q.__PosthogExtensions__)||null==d.loadExternalDependency||d.loadExternalDependency(this._instance,this.Nr,b=>{if(b)return e8.error("could not load recorder",b);this.Lr(a)}))}stopRecording(){var a,b;null==(a=this.Dr)||a.call(this),this.Dr=void 0,null==(b=this.Mr)||b.stop()}Ur(){var a;null==(a=this._instance.persistence)||a.unregister(bN)}zr(a){if(this._instance.persistence){var b,c,d=this._instance.persistence,e=()=>{var b=!1===a.sessionRecording?void 0:a.sessionRecording,c=null==b?void 0:b.sampleRate,e=O(c)?null:parseFloat(c);O(e)&&this.Ur();var f=null==b?void 0:b.minimumDurationMilliseconds;d.register({[bL]:u({enabled:!!b},b,{networkPayloadCapture:u({capturePerformance:a.capturePerformance},null==b?void 0:b.networkPayloadCapture),canvasRecording:{enabled:null==b?void 0:b.recordCanvas,fps:null==b?void 0:b.canvasFps,quality:null==b?void 0:b.canvasQuality},sampleRate:e,minimumDurationMilliseconds:K(f)?null:f,endpoint:null==b?void 0:b.endpoint,triggerMatchType:null==b?void 0:b.triggerMatchType,masking:null==b?void 0:b.masking,urlTriggers:null==b?void 0:b.urlTriggers})})};e(),null==(b=this.Dr)||b.call(this),this.Dr=null==(c=this._instance.sessionManager)?void 0:c.onSessionId(e)}}onRemoteConfig(a){"sessionRecording"in a?!1!==a.sessionRecording?(this.zr(a),this.Or=!0,this.startIfEnabledOrStop()):this.Or=!0:e8.info("skipping remote config with no sessionRecording",a)}log(a,b){var c;void 0===b&&(b="log"),null!=(c=this.Mr)&&c.log?this.Mr.log(a,b):e8.warn("log called before recorder was ready")}get Nr(){var a,b,c=null==(a=this._instance)||null==(a=a.persistence)?void 0:a.get_property(bL);return(null==c||null==(b=c.scriptConfig)?void 0:b.script)||"lazy-recorder"}Lr(a){var b,c;if(null==(b=q.__PosthogExtensions__)||!b.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.Mr||(this.Mr=null==(c=q.__PosthogExtensions__)?void 0:c.initSessionRecording(this._instance),this.Mr._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.Mr.start(a)}onRRwebEmit(a){var b;null==(b=this.Mr)||null==b.onRRwebEmit||b.onRRwebEmit(a)}overrideLinkedFlag(){var a,b;this.Mr||null==(b=this._instance.persistence)||b.register({$replay_override_linked_flag:!0}),null==(a=this.Mr)||a.overrideLinkedFlag()}overrideSampling(){var a,b;this.Mr||null==(b=this._instance.persistence)||b.register({$replay_override_sampling:!0}),null==(a=this.Mr)||a.overrideSampling()}overrideTrigger(a){var b,c;this.Mr||null==(c=this._instance.persistence)||c.register({["url"===a?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),null==(b=this.Mr)||b.overrideTrigger(a)}get sdkDebugProperties(){var a;return(null==(a=this.Mr)?void 0:a.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(a,b){var c;return!(null==(c=this.Mr)||!c.tryAddCustomEvent(a,b))}}var fa={},fb=()=>{},fc="posthog",fd=!d_&&-1===(null==p?void 0:p.indexOf("MSIE"))&&-1===(null==p?void 0:p.indexOf("Mozilla")),fe=a=>{var b;return u({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:function(a){var b=null==a?void 0:a.hostname;if(!L(b))return!1;var c=b.split(".").slice(-2).join(".");for(var d of bw)if(c===d)return!1;return!0}(null==k?void 0:k.location),persistence:"localStorage+cookie",persistence_name:"",cookie_persisted_properties:[],loaded:fb,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:null!=a?a:"unset",__preview_deferred_init_extensions:!1,debug:l&&L(null==l?void 0:l.search)&&-1!==l.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_conversations:!1,disable_product_tours:!0,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==e||null==(b=e.location)?void 0:b.protocol),ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:a=>{var b="Bad HTTP status: "+a.statusCode+" "+a.text;bj.error(b)},get_device_id:a=>a,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:3e3},error_tracking:{},_onCapture:fb,__preview_eager_load_replay:!1},{rageclick:!(a&&a>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(a&&a>="2025-05-24")||"history_change",session_recording:a&&a>="2025-11-30"?{strictMinimumDuration:!0}:{},external_scripts_inject_target:a&&a>="2026-01-30"?"head":"body"})},ff=a=>{var b={};K(a.process_person)||(b.person_profiles=a.process_person),K(a.xhr_headers)||(b.request_headers=a.xhr_headers),K(a.cookie_name)||(b.persistence_name=a.cookie_name),K(a.disable_cookie)||(b.disable_persistence=a.disable_cookie),K(a.store_google)||(b.save_campaign_params=a.store_google),K(a.verbose)||(b.debug=a.verbose);var c=bq({},b,a);return G(a.property_blacklist)&&(K(a.property_denylist)?c.property_denylist=a.property_blacklist:G(a.property_denylist)?c.property_denylist=[...a.property_blacklist,...a.property_denylist]:bj.error("Invalid value for property_denylist config: "+a.property_denylist)),c};class fg{constructor(){this.__forceAllowLocalhost=!1}get Hr(){return this.__forceAllowLocalhost}set Hr(a){bj.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=a}}class fh{get decideEndpointWasHit(){var a,b;return null!=(a=null==(b=this.featureFlags)?void 0:b.hasLoadedFlags)&&a}get flagsEndpointWasHit(){var a,b;return null!=(a=null==(b=this.featureFlags)?void 0:b.hasLoadedFlags)&&a}constructor(){this.webPerformance=new fg,this.Br=!1,this.version=r.LIB_VERSION,this.qr=new eC,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=fe(),this.SentryIntegration=c2,this.sentryIntegration=a=>{var b;return b=c1(this,a),{name:c0,processEvent:a=>b(a)}},this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.Wr=!1,this.Gr=null,this.Vr=null,this.Jr=null,this.featureFlags=new em(this),this.toolbar=new c6(this),this.scrollManager=new eS(this),this.pageViewManager=new ds(this),this.surveys=new eH(this),this.conversations=new eJ(this),this.logs=new eK(this),this.experiments=new e3(this),this.exceptions=new eb(this),this.rateLimiter=new eM(this),this.requestRouter=new e1(this),this.consent=new cT(this),this.externalIntegrations=new e6(this),this.people={set:(a,b,c)=>{var d=L(a)?{[a]:b}:a;this.setPersonProperties(d),null==c||c({})},set_once:(a,b,c)=>{var d=L(a)?{[a]:b}:a;this.setPersonProperties(void 0,d),null==c||c({})}},this.on("eventCaptured",a=>bj.info('send "'+(null==a?void 0:a.event)+'"',a))}init(a,b,c){if(c&&c!==fc){var d,e=null!=(d=fa[c])?d:new fh;return e._init(a,b,c),fa[c]=e,fa[fc][c]=e,e}return this._init(a,b,c)}_init(a,b,c){if(void 0===b&&(b={}),K(a)||M(a))return bj.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},b.debug=this.Kr(b.debug),this.Yr=b,this.Xr=[],b.person_profiles&&(this.Vr=b.person_profiles),this.set_config(bq({},fe(b.defaults),ff(b),{name:c,token:a})),this.config.on_xhr_error&&bj.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=b.disable_compression?void 0:dt.GZipJS;var d=this.Qr();this.persistence=new eo(this.config,d),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new eo(u({},this.config,{persistence:"sessionStorage"}),d);var f=u({},this.persistence.props),g=u({},this.sessionPersistence.props);this.register({$initialization_time:(new Date).toISOString()}),this.Zr=new eP(a=>this.ts(a),this.config.request_queue_config),this.es=new eR(this),this.__request_queue=[];var h="always"===this.config.cookieless_mode||"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut();if(h||(this.sessionManager=new eW(this),this.sessionPropsManager=new eU(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(bj.info("Deferring extension initialization to improve startup performance"),setTimeout(()=>{this.rs(h)},0)):(bj.info("Initializing extensions synchronously"),this.rs(h)),r.DEBUG=r.DEBUG||this.config.debug,r.DEBUG&&bj.info("Starting in debug mode",{this:this,config:b,thisC:u({},this.config),p:f,s:g}),void 0!==(null==(i=b.bootstrap)?void 0:i.distinctID)){var i,j,k,l=this.config.get_device_id(cG()),m=null!=(j=b.bootstrap)&&j.isIdentifiedID?l:b.bootstrap.distinctID;this.persistence.set_property(bV,null!=(k=b.bootstrap)&&k.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:b.bootstrap.distinctID,$device_id:m})}if(this.ss()){var n,o,p=Object.keys((null==(n=b.bootstrap)?void 0:n.featureFlags)||{}).filter(a=>{var c;return!(null==(c=b.bootstrap)||null==(c=c.featureFlags)||!c[a])}).reduce((a,c)=>{var d;return a[c]=(null==(d=b.bootstrap)||null==(d=d.featureFlags)?void 0:d[c])||!1,a},{}),q=Object.keys((null==(o=b.bootstrap)?void 0:o.featureFlagPayloads)||{}).filter(a=>p[a]).reduce((a,c)=>{var d,e;return null!=(d=b.bootstrap)&&null!=(d=d.featureFlagPayloads)&&d[c]&&(a[c]=null==(e=b.bootstrap)||null==(e=e.featureFlagPayloads)?void 0:e[c]),a},{});this.featureFlags.receivedFeatureFlags({featureFlags:p,featureFlagPayloads:q})}if(h)this.register_once({distinct_id:b1,$device_id:null},"");else if(!this.get_distinct_id()){var s=this.config.get_device_id(cG());this.register_once({distinct_id:s,$device_id:s},""),this.persistence.set_property(bV,"anonymous")}return by(e,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),b.segment?function(a,b){var c=a.config.segment;if(!c)return b();!function(a,b){var c=a.config.segment;if(!c)return b();var d=c=>{var d=()=>c.anonymousId()||cG();a.config.get_device_id=d,c.id()&&(a.register({distinct_id:c.id(),$device_id:d()}),a.persistence.set_property(bV,"identified")),b()},e=c.user();"then"in e&&H(e.then)?e.then(d):d(e)}(a,()=>{var d;c.register((Promise&&Promise.resolve||c_.warn("This browser does not have Promise support, and can not use the segment integration"),d=(b,c)=>{if(!c)return b;b.event.userId||b.event.anonymousId===a.get_distinct_id()||(c_.info("No userId set, resetting PostHog"),a.reset()),b.event.userId&&b.event.userId!==a.get_distinct_id()&&(c_.info("UserId set, identifying with PostHog"),a.identify(b.event.userId));var d=a.calculateEventProperties(c,b.event.properties);return b.event.properties=Object.assign({},d,b.event.properties),b},{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:a=>d(a,a.event.event),page:a=>d(a,"$pageview"),identify:a=>d(a,"$identify"),screen:a=>d(a,"$screen")})).then(()=>{b()})})}(this,()=>this.ns()):this.ns(),H(this.config._onCapture)&&this.config._onCapture!==fb&&(bj.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",a=>this.config._onCapture(a.event,a))),this.config.ip&&bj.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}rs(a){var b=performance.now();this.historyAutocapture=new c$(this),this.historyAutocapture.startIfEnabled();var c=[];c.push(()=>{new c8(this).startIfEnabledOrStop()}),c.push(()=>{var a;this.siteApps=new eZ(this),null==(a=this.siteApps)||a.init()}),a||c.push(()=>{this.sessionRecording=new e9(this),this.sessionRecording.startIfEnabledOrStop()}),this.config.disable_scroll_properties||c.push(()=>{this.scrollManager.startMeasuringScrollPosition()}),c.push(()=>{this.autocapture=new cz(this),this.autocapture.startIfEnabled()}),c.push(()=>{this.surveys.loadIfEnabled()}),c.push(()=>{this.logs.loadIfEnabled()}),c.push(()=>{this.conversations.loadIfEnabled()}),c.push(()=>{this.productTours=new er(this),this.productTours.loadIfEnabled()}),c.push(()=>{this.heatmaps=new dr(this),this.heatmaps.startIfEnabled()}),c.push(()=>{this.webVitalsAutocapture=new dn(this)}),c.push(()=>{this.exceptionObserver=new cZ(this),this.exceptionObserver.startIfEnabledOrStop()}),c.push(()=>{this.deadClicksAutocapture=new cX(this,cW),this.deadClicksAutocapture.startIfEnabled()}),c.push(()=>{if(this.os){var a=this.os;this.os=void 0,this.bi(a)}}),this.ls(c,b)}ls(a,b){for(;a.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-b>=30&&a.length>0)return void setTimeout(()=>{this.ls(a,b)},0);var c=a.shift();if(c)try{c()}catch(a){bj.error("Error initializing extension:",a)}}var d=Math.round(performance.now()-b);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:d}),this.config.__preview_deferred_init_extensions&&bj.info("PostHog extensions initialized ("+d+"ms)")}bi(a){var b,c,d,e,f,g,h,i,j;k&&k.body?(this.config.__preview_deferred_init_extensions&&(this.os=a),this.compression=void 0,a.supportedCompression&&!this.config.disable_compression&&(this.compression=z(a.supportedCompression,dt.GZipJS)?dt.GZipJS:z(a.supportedCompression,dt.Base64)?dt.Base64:void 0),null!=(b=a.analytics)&&b.endpoint&&(this.analyticsDefaultEndpoint=a.analytics.endpoint),this.set_config({person_profiles:this.Vr?this.Vr:"identified_only"}),null==(c=this.siteApps)||c.onRemoteConfig(a),null==(d=this.sessionRecording)||d.onRemoteConfig(a),null==(e=this.autocapture)||e.onRemoteConfig(a),null==(f=this.heatmaps)||f.onRemoteConfig(a),this.surveys.onRemoteConfig(a),this.logs.onRemoteConfig(a),this.conversations.onRemoteConfig(a),null==(g=this.productTours)||g.onRemoteConfig(a),null==(h=this.webVitalsAutocapture)||h.onRemoteConfig(a),null==(i=this.exceptionObserver)||i.onRemoteConfig(a),this.exceptions.onRemoteConfig(a),null==(j=this.deadClicksAutocapture)||j.onRemoteConfig(a)):(bj.info("document not ready yet, trying again in 500 milliseconds..."),setTimeout(()=>{this.bi(a)},500))}ns(){try{this.config.loaded(this)}catch(a){bj.critical("`loaded` function failed",a)}this.us(),this.config.capture_pageview&&setTimeout(()=>{(this.consent.isOptedIn()||"always"===this.config.cookieless_mode)&&this.hs()},1),new eO(this).load(),this.featureFlags.flags()}us(){var a;this.is_capturing()&&this.config.request_batching&&(null==(a=this.Zr)||a.enable())}_dom_loaded(){this.is_capturing()&&bo(this.__request_queue,a=>this.ts(a)),this.__request_queue=[],this.us()}_handle_unload(){var a,b;this.surveys.handlePageUnload(),this.config.request_batching?(this.ds()&&this.capture("$pageleave"),null==(a=this.Zr)||a.unload(),null==(b=this.es)||b.unload()):this.ds()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(a){this.__loaded&&(fd?this.__request_queue.push(a):this.rateLimiter.isServerRateLimited(a.batchKey)||(a.transport=a.transport||this.config.api_transport,a.url=d1(a.url,{ip:+!!this.config.ip}),a.headers=u({},this.config.request_headers,a.headers),a.compression="best-available"===a.compression?this.compression:a.compression,a.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(a.disableTransport=["sendBeacon"]),a.fetchOptions=a.fetchOptions||this.config.fetch_options,(a=>{var b,c,d,e=u({},a);e.timeout=e.timeout||6e4,e.url=d1(e.url,{_:(new Date).getTime().toString(),ver:r.LIB_VERSION,compression:e.compression});var f=null!=(b=e.transport)?b:"fetch",g=d4.filter(a=>!e.disableTransport||!a.transport||!e.disableTransport.includes(a.transport)),h=null!=(c=null==(d=bx(g,a=>a.transport===f))?void 0:d.method)?c:g[0].method;if(!h)throw Error("No available transport method");h(e)})(u({},a,{callback:b=>{var c,d;this.rateLimiter.checkForLimiting(b),b.statusCode>=400&&(null==(c=(d=this.config).on_request_error)||c.call(d,b)),null==a.callback||a.callback(b)}}))))}ts(a){this.es?this.es.retriableRequest(a):this._send_request(a)}_execute_array(a){var b,c=[],d=[],e=[];bo(a,a=>{a&&(G(b=a[0])?e.push(a):H(a)?a.call(this):G(a)&&"alias"===b?c.push(a):G(a)&&-1!==b.indexOf("capture")&&H(this[b])?e.push(a):d.push(a))});var f=function(a,b){bo(a,function(a){if(G(a[0])){var c=b;bp(a,function(a){c=c[a[0]].apply(c,a.slice(1))})}else this[a[0]].apply(this,a.slice(1))},b)};f(c,this),f(d,this),f(e,this)}ss(){var a,b;return(null==(a=this.config.bootstrap)?void 0:a.featureFlags)&&Object.keys(null==(b=this.config.bootstrap)?void 0:b.featureFlags).length>0||!1}push(a){this._execute_array([a])}capture(a,b,c){var d;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Zr){if(this.is_capturing())if(!K(a)&&L(a)){var e=!this.config.opt_out_useragent_filter&&this._is_bot();if(!(e&&!this.config.__preview_capture_bot_pageviews)){var f=null!=c&&c.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==f||!f.isRateLimited){null!=b&&b.$current_url&&!L(null==b?void 0:b.$current_url)&&(bj.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==b||delete b.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var g=new Date,h=(null==c?void 0:c.timestamp)||g,i=cG(),j={uuid:i,event:a,properties:this.calculateEventProperties(a,b||{},h,i)};"$pageview"===a&&this.config.__preview_capture_bot_pageviews&&e&&(j.event="$bot_pageview",j.properties.$browser_type="bot"),f&&(j.properties.$lib_rate_limit_remaining_tokens=f.remainingTokens),(null==c?void 0:c.$set)&&(j.$set=null==c?void 0:c.$set);var k,l="$groupidentify"!==a,m=this.vs(null==c?void 0:c.$set_once,l);if(m&&(j.$set_once=m),(n=j,o=null!=c&&c._noTruncate?null:this.config.properties_string_max_length,p=a=>L(a)&&!N(o)?a.slice(0,o):a,q=new Set,j=function a(b,c){var d;return b!==Object(b)?p?p(b,c):b:q.has(b)?void 0:(q.add(b),G(b)?(d=[],bo(b,b=>{d.push(a(b))})):(d={},bp(b,(b,c)=>{q.has(b)||(d[c]=a(b,c))})),d)}(n)).timestamp=h,K(null==c?void 0:c.timestamp)||(j.properties.$event_time_override_provided=!0,j.properties.$event_time_override_system_time=g),a===eu.DISMISSED||a===eu.SENT){var n,o,p,q,r,s,t,v=null==b?void 0:b[ev.SURVEY_ID],w=null==b?void 0:b[ev.SURVEY_ITERATION];k={id:v,current_iteration:w},localStorage.getItem(ez(k))||localStorage.setItem(ez(k),"true"),j.$set=u({},j.$set,{[(r={id:v,current_iteration:w},t="$survey_"+(s=a===eu.SENT?"responded":"dismissed")+"/"+r.id,r.current_iteration&&r.current_iteration>0&&(t="$survey_"+s+"/"+r.id+"/"+r.current_iteration),t)]:!0})}else a===eu.SHOWN&&(j.$set=u({},j.$set,{[ev.SURVEY_LAST_SEEN_DATE]:(new Date).toISOString()}));var x=u({},j.properties.$set,j.$set);if(J(x)||this.setPersonPropertiesForFlags(x),!O(this.config.before_send)){var y=this.cs(j);if(!y)return;j=y}this.qr.emit("eventCaptured",j);var z={method:"POST",url:null!=(d=null==c?void 0:c._url)?d:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:j,compression:"best-available",batchKey:null==c?void 0:c._batchKey};return!this.config.request_batching||c&&(null==c||!c._batchKey)||null!=c&&c.send_instantly?this.ts(z):this.Zr.enqueue(z),j}bj.critical("This capture call is ignored due to client rate limiting.")}}else bj.error("No event name provided to posthog.capture")}else bj.uninitializedWarning("posthog.capture")}_addCaptureHook(a){return this.on("eventCaptured",b=>a(b.event,b))}calculateEventProperties(a,b,c,d,f){if(c=c||new Date,!this.persistence||!this.sessionPersistence)return b;var g,h=f?void 0:this.persistence.remove_event_timer(a),i=u({},b);if(i.token=this.config.token,i.$config_defaults=this.config.defaults,("always"==this.config.cookieless_mode||"on_reject"==this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut())&&(i.$cookieless_mode=!0),"$snapshot"===a){var j=u({},this.persistence.properties(),this.sessionPersistence.properties());return i.distinct_id=j.distinct_id,(!L(i.distinct_id)&&!P(i.distinct_id)||M(i.distinct_id))&&bj.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),i}var m,n=function(a,b){if(!p)return{};var c,d,f=a?br([],da,b||[]):[],[g,h]=function(a){for(var b=0;b<aV.length;b++){var[c,d]=aV[b],e=c.exec(a),f=e&&(H(d)?d(e,a):d);if(f)return f}return["",""]}(p);return bq(bv({$os:g,$os_version:h,$browser:aS(p,navigator.vendor),$device:aW(p),$device_type:(d=aW(p))===af||d===ae||"Kobo"===d||"Kindle Fire"===d||d===aJ?ad:d===ay||d===aA||d===az||d===aG?"Console":d===ah?"Wearable":d?ab:"Desktop",$timezone:dl(),$timezone_offset:function(){try{return(new Date).getTimezoneOffset()}catch(a){return}}()}),{$current_url:cu(null==l?void 0:l.href,f,dc),$host:null==l?void 0:l.host,$pathname:null==l?void 0:l.pathname,$raw_user_agent:p.length>1e3?p.substring(0,997)+"...":p,$browser_version:aU(p,navigator.vendor),$browser_language:dh(),$browser_language_prefix:"string"==typeof(c=dh())?c.split("-")[0]:void 0,$screen_height:null==e?void 0:e.screen.height,$screen_width:null==e?void 0:e.screen.width,$viewport_height:null==e?void 0:e.innerHeight,$viewport_width:null==e?void 0:e.innerWidth,$lib:"web",$lib_version:r.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:o,windowId:q}=this.sessionManager.checkAndGetSessionAndWindowId(f,c.getTime());i.$session_id=o,i.$window_id=q}this.sessionPropsManager&&bq(i,this.sessionPropsManager.getSessionProps());try{this.sessionRecording&&bq(i,this.sessionRecording.sdkDebugProperties),i.$sdk_debug_retry_queue_size=null==(g=this.es)?void 0:g.length}catch(a){i.$sdk_debug_error_capturing_properties=String(a)}if(this.requestRouter.region===e_.CUSTOM&&(i.$lib_custom_api_host=this.config.api_host),m="$pageview"!==a||f?"$pageleave"!==a||f?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(c):this.pageViewManager.doPageView(c,d),i=bq(i,m),"$pageview"===a&&k&&(i.title=k.title),!K(h)){var s=c.getTime()-h;i.$duration=parseFloat((s/1e3).toFixed(3))}p&&this.config.opt_out_useragent_filter&&(i.$browser_type=this._is_bot()?"bot":"browser"),(i=bq({},n,this.persistence.properties(),this.sessionPersistence.properties(),i)).$is_identified=this._isIdentified(),G(this.config.property_denylist)?bp(this.config.property_denylist,function(a){delete i[a]}):bj.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var t=this.config.sanitize_properties;t&&(bj.error("sanitize_properties is deprecated. Use before_send instead"),i=t(i,a));var v=this.fs();return i.$process_person_profile=v,v&&!f&&this.ps("_calculate_event_properties"),i}vs(a,b){if(void 0===b&&(b=!0),!this.persistence||!this.fs()||this.Br)return a;var c,d=bq({},this.persistence.get_initial_props(),(null==(c=this.sessionPropsManager)?void 0:c.getSetOnceProps())||{},a||{}),e=this.config.sanitize_properties;return e&&(bj.error("sanitize_properties is deprecated. Use before_send instead"),d=e(d,"$set_once")),b&&(this.Br=!0),J(d)?void 0:d}register(a,b){var c;null==(c=this.persistence)||c.register(a,b)}register_once(a,b,c){var d;null==(d=this.persistence)||d.register_once(a,b,c)}register_for_session(a){var b;null==(b=this.sessionPersistence)||b.register(a)}unregister(a){var b;null==(b=this.persistence)||b.unregister(a)}unregister_for_session(a){var b;null==(b=this.sessionPersistence)||b.unregister(a)}gs(a,b){this.register({[a]:b})}getFeatureFlag(a,b){return this.featureFlags.getFeatureFlag(a,b)}getFeatureFlagPayload(a){return this.featureFlags.getFeatureFlagPayload(a)}getFeatureFlagResult(a,b){return this.featureFlags.getFeatureFlagResult(a,b)}isFeatureEnabled(a,b){return this.featureFlags.isFeatureEnabled(a,b)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateFlags(a,b,c){var d=null!=c&&c.merge?this.featureFlags.getFlagVariants():{},e=null!=c&&c.merge?this.featureFlags.getFlagPayloads():{},f=u({},d,a),g=u({},e,b),h={};for(var[i,j]of Object.entries(f)){var k="string"==typeof j;h[i]={key:i,enabled:!!k||!!j,variant:k?j:void 0,reason:void 0,metadata:K(null==g?void 0:g[i])?void 0:{id:0,version:void 0,description:void 0,payload:g[i]}}}this.featureFlags.receivedFeatureFlags({flags:h})}updateEarlyAccessFeatureEnrollment(a,b,c){this.featureFlags.updateEarlyAccessFeatureEnrollment(a,b,c)}getEarlyAccessFeatures(a,b,c){return void 0===b&&(b=!1),this.featureFlags.getEarlyAccessFeatures(a,b,c)}on(a,b){return this.qr.on(a,b)}onFeatureFlags(a){return this.featureFlags.onFeatureFlags(a)}onSurveysLoaded(a){return this.surveys.onSurveysLoaded(a)}onSessionId(a){var b,c;return null!=(b=null==(c=this.sessionManager)?void 0:c.onSessionId(a))?b:()=>{}}getSurveys(a,b){void 0===b&&(b=!1),this.surveys.getSurveys(a,b)}getActiveMatchingSurveys(a,b){void 0===b&&(b=!1),this.surveys.getActiveMatchingSurveys(a,b)}renderSurvey(a,b){this.surveys.renderSurvey(a,b)}displaySurvey(a,b){void 0===b&&(b=eB),this.surveys.displaySurvey(a,b)}cancelPendingSurvey(a){this.surveys.cancelPendingSurvey(a)}canRenderSurvey(a){return this.surveys.canRenderSurvey(a)}canRenderSurveyAsync(a,b){return void 0===b&&(b=!1),this.surveys.canRenderSurveyAsync(a,b)}identify(a,b,c){if(!this.__loaded||!this.persistence)return bj.uninitializedWarning("posthog.identify");if(P(a)&&(a=a.toString(),bj.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),a)if(["distinct_id","distinctid"].includes(a.toLowerCase()))bj.critical('The string "'+a+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(a!==b1){if(this.ps("posthog.identify")){var d=this.get_distinct_id();this.register({$user_id:a}),this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:d},""),a!==d&&a!==this.get_property(bA)&&(this.unregister(bA),this.register({distinct_id:a}));var e="anonymous"===(this.persistence.get_property(bV)||"anonymous");a!==d&&e?(this.persistence.set_property(bV,"identified"),this.setPersonPropertiesForFlags(u({},c||{},b||{}),!1),this.capture("$identify",{distinct_id:a,$anon_distinct_id:d},{$set:b||{},$set_once:c||{}}),this.Jr=d6(a,b,c),this.featureFlags.setAnonymousDistinctId(d)):(b||c)&&this.setPersonProperties(b,c),a!==d&&(this.reloadFeatureFlags(),this.unregister(bU))}}else bj.critical('The string "'+b1+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else bj.error("Unique user id has not been set in posthog.identify")}setPersonProperties(a,b){if((a||b)&&this.ps("posthog.setPersonProperties")){var c=d6(this.get_distinct_id(),a,b);this.Jr!==c?(this.setPersonPropertiesForFlags(u({},b||{},a||{})),this.capture("$set",{$set:a||{},$set_once:b||{}}),this.Jr=c):bj.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(a,b,c){if(a&&b){var d=this.getGroups();d[a]!==b&&this.resetGroupPropertiesForFlags(a),this.register({$groups:u({},d,{[a]:b})}),c&&(this.capture("$groupidentify",{$group_type:a,$group_key:b,$group_set:c}),this.setGroupPropertiesForFlags({[a]:c})),d[a]===b||c||this.reloadFeatureFlags()}else bj.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(a,b){void 0===b&&(b=!0),this.featureFlags.setPersonPropertiesForFlags(a,b)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(a,b){void 0===b&&(b=!0),this.ps("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(a,b)}resetGroupPropertiesForFlags(a){this.featureFlags.resetGroupPropertiesForFlags(a)}reset(a){if(bj.info("reset"),!this.__loaded)return bj.uninitializedWarning("posthog.reset");var b,c,d,e,f=this.get_property("$device_id");if(this.consent.reset(),null==(b=this.persistence)||b.clear(),null==(c=this.sessionPersistence)||c.clear(),this.surveys.reset(),this.featureFlags.reset(),null==(d=this.persistence)||d.set_property(bV,"anonymous"),null==(e=this.sessionManager)||e.resetSessionId(),this.Jr=null,"always"===this.config.cookieless_mode)this.register_once({distinct_id:b1,$device_id:null},"");else{var g=this.config.get_device_id(cG());this.register_once({distinct_id:g,$device_id:a?g:f},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var a,b;return null!=(a=null==(b=this.sessionManager)?void 0:b.checkAndGetSessionAndWindowId(!0).sessionId)?a:""}get_session_replay_url(a){if(!this.sessionManager)return"";var{sessionId:b,sessionStartTimestamp:c}=this.sessionManager.checkAndGetSessionAndWindowId(!0),d=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+b);if(null!=a&&a.withTimestamp&&c){var e,f=null!=(e=a.timestampLookBack)?e:10;if(!c)return d;d+="?t="+Math.max(Math.floor(((new Date).getTime()-c)/1e3)-f,0)}return d}alias(a,b){return a===this.get_property(bz)?(bj.critical("Attempting to create alias for existing People user - aborting."),-2):this.ps("posthog.alias")?(K(b)&&(b=this.get_distinct_id()),a!==b?(this.gs(bA,a),this.capture("$create_alias",{alias:a,distinct_id:b})):(bj.warn("alias matches current distinct_id - skipping api call."),this.identify(a),-1)):void 0}set_config(a){var b=u({},this.config);if(I(a)){bq(this.config,ff(a));var c,d,e,f,g,h,i,j=this.Qr();null==(c=this.persistence)||c.update_config(this.config,b,j),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new eo(u({},this.config,{persistence:"sessionStorage"}),j);var k=this.Kr(this.config.debug);R(k)&&(this.config.debug=k),R(this.config.debug)&&(this.config.debug?(r.DEBUG=!0,cM.H()&&cM.G("ph_debug","true"),bj.info("set_config",{config:a,oldConfig:b,newConfig:u({},this.config)})):(r.DEBUG=!1,cM.H()&&cM.V("ph_debug"))),null==(d=this.exceptionObserver)||d.onConfigChange(),null==(e=this.sessionRecording)||e.startIfEnabledOrStop(),null==(f=this.autocapture)||f.startIfEnabled(),null==(g=this.heatmaps)||g.startIfEnabled(),null==(h=this.exceptionObserver)||h.startIfEnabledOrStop(),this.surveys.loadIfEnabled(),this._s(),null==(i=this.externalIntegrations)||i.startIfEnabledOrStop()}}startSessionRecording(a){var b,c,d,e,f,g=!0===a,h={sampling:g||!(null==a||!a.sampling),linked_flag:g||!(null==a||!a.linked_flag),url_trigger:g||!(null==a||!a.url_trigger),event_trigger:g||!(null==a||!a.event_trigger)};Object.values(h).some(Boolean)&&(null==(b=this.sessionManager)||b.checkAndGetSessionAndWindowId(),h.sampling&&(null==(c=this.sessionRecording)||c.overrideSampling()),h.linked_flag&&(null==(d=this.sessionRecording)||d.overrideLinkedFlag()),h.url_trigger&&(null==(e=this.sessionRecording)||e.overrideTrigger("url")),h.event_trigger&&(null==(f=this.sessionRecording)||f.overrideTrigger("event"))),this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var a;return!(null==(a=this.sessionRecording)||!a.started)}captureException(a,b){var c=Error("PostHog syntheticException"),d=this.exceptions.buildProperties(a,{handled:!0,syntheticException:c});return this.exceptions.sendExceptionEvent(u({},d,b))}startExceptionAutocapture(a){this.set_config({capture_exceptions:null==a||a})}stopExceptionAutocapture(){this.set_config({capture_exceptions:!1})}loadToolbar(a){return this.toolbar.loadToolbar(a)}get_property(a){var b;return null==(b=this.persistence)?void 0:b.props[a]}getSessionProperty(a){var b;return null==(b=this.sessionPersistence)?void 0:b.props[a]}toString(){var a,b=null!=(a=this.config.name)?a:fc;return b!==fc&&(b=fc+"."+b),b}_isIdentified(){var a,b;return"identified"===(null==(a=this.persistence)?void 0:a.get_property(bV))||"identified"===(null==(b=this.sessionPersistence)?void 0:b.get_property(bV))}fs(){var a,b;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&J(this.getGroups())&&(null==(a=this.persistence)||null==(a=a.props)||!a[bA])&&(null==(b=this.persistence)||null==(b=b.props)||!b[b_]))}ds(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this.fs()||this.ps("posthog.createPersonProfile")&&this.setPersonProperties({},{})}ps(a){return"never"===this.config.person_profiles?(bj.error(a+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.gs(b_,!0),!0)}Qr(){if("always"===this.config.cookieless_mode)return!0;var a=this.consent.isOptedOut(),b=this.config.opt_out_persistence_by_default||"on_reject"===this.config.cookieless_mode;return this.config.disable_persistence||a&&!!b}_s(){var a,b,c,d,e=this.Qr();return(null==(a=this.persistence)?void 0:a.ki)!==e&&(null==(c=this.persistence)||c.set_disabled(e)),(null==(b=this.sessionPersistence)?void 0:b.ki)!==e&&(null==(d=this.sessionPersistence)||d.set_disabled(e)),e}opt_in_capturing(a){var b,c,d,e;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),null==(c=this.sessionManager)||c.destroy(),null==(d=this.pageViewManager)||d.destroy(),this.sessionManager=new eW(this),this.pageViewManager=new ds(this),this.persistence&&(this.sessionPropsManager=new eU(this,this.sessionManager,this.persistence)),this.sessionRecording=new e9(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this._s(),this.us(),null==(b=this.sessionRecording)||b.startIfEnabledOrStop(),"on_reject"==this.config.cookieless_mode&&this.surveys.loadIfEnabled(),(K(null==a?void 0:a.captureEventName)||null!=a&&a.captureEventName)&&this.capture(null!=(e=null==a?void 0:a.captureEventName)?e:"$opt_in",null==a?void 0:a.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.hs()):bj.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var a,b,c;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this._s(),"on_reject"===this.config.cookieless_mode&&(this.register({distinct_id:b1,$device_id:null}),null==(a=this.sessionManager)||a.destroy(),null==(b=this.pageViewManager)||b.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,null==(c=this.sessionRecording)||c.stopRecording(),this.sessionRecording=void 0,this.hs())):bj.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var a=this.consent.consent;return a===cS.GRANTED?"granted":a===cS.DENIED?"denied":"pending"}is_capturing(){return"always"===this.config.cookieless_mode||("on_reject"===this.config.cookieless_mode?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this._s()}_is_bot(){return j?e$(j,this.config.custom_blocked_useragents):void 0}hs(){k&&("visible"===k.visibilityState?this.Wr||(this.Wr=!0,this.capture("$pageview",{title:k.title},{send_instantly:!0}),this.Gr&&(k.removeEventListener("visibilitychange",this.Gr),this.Gr=null)):this.Gr||(this.Gr=this.hs.bind(this),by(k,"visibilitychange",this.Gr)))}debug(a){!1===a?(null==e||e.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(null==e||e.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}O(){var a,b,c,d,e=this.Yr||{};return"advanced_disable_flags"in e?!!e.advanced_disable_flags:!1!==this.config.advanced_disable_flags?!!this.config.advanced_disable_flags:!0===this.config.advanced_disable_decide?(bj.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(b="advanced_disable_decide",c=(a="advanced_disable_flags")in e&&!O(e[a]),d=b in e&&!O(e[b]),c?e[a]:!!d&&(bj&&bj.warn("Config field '"+b+"' is deprecated. Please use '"+a+"' instead. The old field will be removed in a future major version."),e[b]))}cs(a){if(O(this.config.before_send))return a;var b=G(this.config.before_send)?this.config.before_send:[this.config.before_send],c=a;for(var d of b){if(O(c=d(c))){var e="Event '"+a.event+"' was rejected in beforeSend function";return S(a.event)?bj.warn(e+". This can cause unexpected behavior."):bj.info(e),null}c.properties&&!J(c.properties)||bj.warn("Event '"+a.event+"' has no properties after beforeSend function, this is likely an error.")}return c}getPageViewId(){var a;return null==(a=this.pageViewManager.Kt)?void 0:a.pageViewId}captureTraceFeedback(a,b){this.capture("$ai_feedback",{$ai_trace_id:String(a),$ai_feedback_text:b})}captureTraceMetric(a,b,c){this.capture("$ai_metric",{$ai_trace_id:String(a),$ai_metric_name:b,$ai_metric_value:String(c)})}Kr(a){var b=R(a)&&!a,c=cM.H()&&"true"===cM.q("ph_debug");return!b&&(!!c||a)}}for(var fi=["identify"],fj=0;fj<fi.length;fj++)fh.prototype[fi[fj]]=bu(fh.prototype[fi[fj]]);var fk,fl,fm,fn,fo,fp,fq,fr,fs,ft,fu,fv,fw,fx,fy,fz,fA,fB=(fA=fa[fc]=new fh,function(){function a(){a.done||(a.done=!0,fd=!1,bp(fa,function(a){a._dom_loaded()}))}null!=k&&k.addEventListener?"complete"===k.readyState?a():by(k,"DOMContentLoaded",a,{capture:!1}):e&&bj.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),fA),fC=(0,c.createContext)({client:fB,bootstrap:void 0});function fD(a){var b,d,e=a.children,f=a.client,g=a.apiKey,h=a.options,i=(0,c.useRef)(null),j=(0,c.useMemo)(function(){return f?(g&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),h&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),f):(g||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),fB)},[f,g,JSON.stringify(h)]);return(0,c.useEffect)(function(){if(!f){var a=i.current;a?(g!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),h&&!function a(b,c,d){if(void 0===d&&(d=new WeakMap),b===c)return!0;if("object"!=typeof b||null===b||"object"!=typeof c||null===c)return!1;if(d.has(b)&&d.get(b)===c)return!0;d.set(b,c);var e=Object.keys(b),f=Object.keys(c);if(e.length!==f.length)return!1;for(var g=0;g<e.length;g++){var h=e[g];if(!f.includes(h)||!a(b[h],c[h],d))return!1}return!0}(h,a.options)&&fB.set_config(h)):(fB.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),fB.init(g,h)),i.current={apiKey:g,options:null!=h?h:{}}}},[f,g,JSON.stringify(h)]),c.default.createElement(fC.Provider,{value:{client:j,bootstrap:null!=(b=null==h?void 0:h.bootstrap)?b:null==(d=null==f?void 0:f.config)?void 0:d.bootstrap}},e)}var fE=function(a){return"function"==typeof a},fF=function(a,b){return(fF=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)};"function"==typeof SuppressedError&&SuppressedError;var fG={componentStack:null,exceptionEvent:null,error:null},fH=c.default.Component;if("function"!=typeof fH&&null!==fH)throw TypeError("Class extends value "+String(fH)+" is not a constructor or null");function fI(){this.constructor=fJ}function fJ(a){var b=fH.call(this,a)||this;return b.state=fG,b}fF(fJ,fH),fJ.prototype=null===fH?Object.create(fH):(fI.prototype=fH.prototype,new fI),fJ.prototype.componentDidCatch=function(a,b){var c,d=this.props.additionalProperties;fE(d)?c=d(a):"object"==typeof d&&(c=d);var e=this.context.client.captureException(a,c),f=b.componentStack;this.setState({error:a,componentStack:null!=f?f:null,exceptionEvent:e})},fJ.prototype.render=function(){var a=this.props,b=a.children,d=a.fallback,e=this.state;if(null==e.componentStack)return fE(b)?b():b;var f=fE(d)?c.default.createElement(d,{error:e.error,componentStack:e.componentStack,exceptionEvent:e.exceptionEvent}):d;return c.default.isValidElement(f)?f:(console.warn("[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."),c.default.createElement(c.default.Fragment,null))},fJ.contextType=fC;let fK=!1;function fL(){return(0,c.useEffect)(()=>{if(fK)return;let a=process.env.NEXT_PUBLIC_POSTHOG_KEY,b=process.env.NEXT_PUBLIC_POSTHOG_HOST;a&&b&&(fB.init(a,{api_host:b,person_profiles:"identified_only",capture_pageview:!1,session_recording:{captureCanvas:{recordCanvas:!0,canvasFps:4,canvasQuality:"0.4"}},debug:!1}),fB.startSessionRecording(),fK=!0)},[]),null}function fM(){let a=(0,d.usePathname)();return(0,c.useEffect)(()=>{},[a]),null}function fN({children:a}){return(0,b.jsxs)(fD,{client:fB,children:[(0,b.jsx)(fL,{}),(0,b.jsx)(fM,{}),a]})}function fO(){return(0,c.useEffect)(()=>{},[]),null}function fP({children:a}){return(0,b.jsxs)(fN,{children:[(0,b.jsx)(fO,{}),a]})}a.s(["Providers",()=>fP],94229)}];

//# sourceMappingURL=Energetic_efaa12d2._.js.map